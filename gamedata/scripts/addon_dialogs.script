
--СЛУЖЕБНЫЕ  ФУНКЦИИ  ДЛЯ  КВЕСТОВ----------------------------------------------------------------------------------------------------------------------------
--Created by Jek@n-limon
--19.12.2011

-- то, что должно сначала быть у нас по сюжету:

function start_spawn_actor() -- в профиль!!
local sim = alife()
sim:create('vodka', vector(),0,0,0)
sim:create('wpn_bm16_full', vector(),0,0,0)
sim:create('yod', vector(),0,0,0)
sim:create('flare_1', vector(),0,0,0)
sim:create('conserva', vector(),0,0,0)
sim:create('bandage', vector(),0,0,0)
sim:create('medkit', vector(),0,0,0)
sim:create('knife_1', vector(),0,0,0)
sim:create('antirad', vector(),0,0,0)
sim:create('novice_outfit', vector(),0,0,0)
sim:create('flyaga_full', vector(),0,0,0)
sim:create('medkomplekt', vector(),0,0,0)
sim:create('detector_simple', vector(),0,0,0)
sim:create('matches', vector(),0,0,0)
amk.spawn_ammo_in_inv("ammo_12x70_buck", 30)
end


function start_spawn()
-- Начальный спавн всего: ----------------------------------------------------------
local sim = alife()
-- спальные места:
sim:create("sleep_place", vector():set (-210.71,-22.88,-121.96), 42634, 59) -- Кордон, деревня, подвал
sim:create("sleep_place", vector():set (-126.14,-29.51,-383.85), 125966, 27) -- Кордон, блокпост, казарма
sim:create("sleep_place", vector():set (-115.97,-29.51,-383.78), 138397, 27) -- Кордон, блокпост, казарма
sim:create("sleep_place", vector():set (-166.95,-24.89,-357.03), 82410, 31) -- Кордон, блокпост, вышка
sim:create("sleep_place", vector():set (1.49,-17.21,-160.22), 277763, 108) -- Кордон, лагерь учёных, кунг
sim:create("sleep_place", vector():set (140.10,3.55,336.88), 444960, 232) -- Кордон, домик за мостом на 2 этаже
sim:create("sleep_place_matras", vector():set (26.28,16.55,678.86), 306463, 208) -- Кордон, КПП
sim:create("sleep_place", vector():set (47.12,1.80,243.99), 218602, 359) -- Свалка, блокпост, вагон
sim:create("sleep_place", vector():set (-70.14,-1.98,19.81), 131025, 329) -- Свалка, ангар, кровать
sim:create("sleep_place", vector():set (-73.89,-1.87,16.87), 136601, 330) -- Свалка, ангар, диван
sim:create("sleep_place", vector():set (-224.18,-7.67,-129.88), 17001, 281) -- Свалка, лагерь за экскаватором
sim:create("sleep_place", vector():set (33.44,7.83,-17.82), 272389, 664) -- Агропром, фабрика, диван
sim:create("sleep_place", vector():set (0.14,7.83,15.65), 238943, 682) -- Агропром, фабрика, диван
sim:create("sleep_place", vector():set (-155.89,1.15,-175.63), 81220, 669) -- Агропром, НИИ, казарма
sim:create("sleep_place", vector():set (-160.65,1.63,-148.05), 76238, 668) -- Агропром, НИИ, казарма
sim:create("sleep_place", vector():set (-68.21,-6.38,-68.65), 3552, 717) -- Подземка Агро, тайник Стрелка
sim:create("sleep_place", vector():set (145.48,0.76,-251.70), 344403, 959) -- Долина, фабрика
sim:create("sleep_place", vector():set (131.27,0.31,-268.40), 328833, 960) -- Долина, фабрика
sim:create("sleep_place", vector():set (45.97,1.10,-59.15), 232788, 1083) -- Долина, недостройка 1 этаж
sim:create("sleep_place", vector():set (38.75,5.07,-81.80), 222352, 1100) -- Долина, недостройка, диван в кабинете
sim:create("sleep_place", vector():set (25.75,4.87,-85.58), 205994, 1099) -- Долина, недостройка, диван в кабинете
sim:create("sleep_place", vector():set (33.56,4.63,-57.65), 215702, 1074) -- Долина, недостройка 2 этаж
sim:create("sleep_place_matras", vector():set (37.76,1.60,-220.58), 221297, 856) -- Долина, вагончик разведчика
sim:create("sleep_place_matras", vector():set (123.12,-2.84,-276.84), 320131, 812) -- Долина, подвал фабрики
sim:create("sleep_place_matras", vector():set (109.87,4.22,-12.60), 306353, 987) -- Долина, домик на заправке
sim:create("sleep_place", vector():set (257.49,-0.16,73.49), 429416, 498) -- Агро, в конце ж\д туннеля
sim:create("sleep_place", vector():set (0.14,4.83,15.55), 239682, 682) -- Агро, второй этаж фабрики, диван
sim:create("sleep_place", vector():set (-156.84,1.67,-153.59), 81242, 668) -- Агро, казарма, кровать
sim:create("sleep_place", vector():set (-150.39,1.18,-171.11), 87373, 669) -- Агро, казарма, кровать
sim:create("sleep_place", vector():set (-150.34,1.63,-165.46), 86658, 669) -- Агро, казарма, кровать
sim:create("sleep_place", vector():set (222.91,-4.91,131.23), 56342, 1198) -- Бар, бункер Долга, диван
sim:create("sleep_place", vector():set (227.22,-5.11,125.72), 57231, 1198) -- Бар, бункер Долга, диван
sim:create("sleep_place", vector():set (232.08,-4.87,131.42), 59080, 1200) -- Бар, бункер Долга, кровать
sim:create("sleep_place", vector():set (110.03,0.42,74.04), 33034, 1225) -- Бар, кибитка, диван
sim:create("sleep_place", vector():set (150.30,0.76,67.63), 40157, 1180) -- Бар, каморка перед ареной, диван
sim:create("sleep_place", vector():set (209.34,0.76,58.99), 50944, 1203) -- Бар, каморка Петренки, диван
sim:create("sleep_place_matras", vector():set (-83.66,1.95,155.83), 47958, 1420) -- Росток, домик разведчика
sim:create("sleep_place_matras", vector():set (-134.19,-0.00,123.81), 43370, 1315) -- Росток, гаражи
sim:create("sleep_place_matras", vector():set (-260.67,-6.00,91.42), 6550, 1359) -- Росток, подземный переход
sim:create("sleep_place_matras", vector():set (-250.10,1.29,16.30), 9754, 1424) -- Росток, вагончик
sim:create("sleep_place", vector():set (-68.26,4.93,367.00), 837614, 2898)	--	Предбанник, хутор, чердак
sim:create("sleep_place", vector():set (-72.87,0.98,365.91), 831450, 2898)	--	Предбанник, хутор, дом
sim:create("sleep_place", vector():set (-1.92,0.82,365.56), 940196, 2919)	--	Предбанник, хутор, дом
sim:create("sleep_place", vector():set (-224.44,30.71,274.66), 597901, 2873)	--	Предбанник, пещера
sim:create("sleep_place", vector():set (-224.44,30.71,274.66), 597901, 2873)	--	Предбанник, палатка
sim:create("sleep_place", vector():set (27.69,-10.96,-280.53), 54978, 1480) -- Янтарь, бункер учёных
sim:create("sleep_place", vector():set (-430.93,12.41,-142.76), 281942, 2830)	--	Предбанник, пожарная станция, квартира
sim:create("sleep_place", vector():set (-425.45,12.19,-153.31), 290042, 2830)	--	Предбанник, пожарная станция, квартира
sim:create("sleep_place", vector():set (-540.50,10.42,-121.35), 118733, 2806)	--	Предбанник, пожарная станция, квартира
sim:create("sleep_place", vector():set (-434.19,10.38,-121.12), 127350, 2806)	--	Предбанник, пожарная станция, квартира
sim:create("sleep_place", vector():set (-466.36,5.78,-143.65), 229504, 2820)	--	Предбанник, пожарная станция, квартира
sim:create("sleep_place", vector():set (-25.90,-6.82,-26.90), 281271, 1593)	--	Милитари, часть, штаб.
sim:create("sleep_place", vector():set (-18.58,-3.77,-21.31), 288157, 1593)	--	Милитари, часть, штаб.


-- места с водой:
sim:create("vater_place", vector():set (-212.51,-22.23,-129.13), 40596, 60) -- Кордон, деревня, подвал
sim:create("vater_place", vector():set (-203.42,-21.45,-127.16), 49142, 58) -- Кордон, деревня, другой подвал
sim:create("vater_place_kanistra", vector():set (130.55,0.21,336.71), 435469, 233) -- Кордон, домик за мостом
sim:create("vater_place_kanistra", vector():set (24.26,16.55,678.23), 304056, 208) -- Кордон, КПП
sim:create("vater_place_kanistra", vector():set (43.54,0.91,236.90), 216643, 359) -- Свалка, вагончик, канистра
sim:create("vater_place", vector():set (34.17,3.75,-15.55), 273037, 663) -- Агропром, фабрика, раковина
sim:create("vater_place_kanistra", vector():set (-70.27,-6.87,-74.19), 3439, 717) -- Тайник Стрелка
sim:create("vater_place", vector():set (123.54,-1.17,-227.31), 320213, 957) -- Долина, фабрика, бак с трубами 1
sim:create("vater_place", vector():set (113.90,-1.17,-227.41), 311535, 957) -- Долина, фабрика, бак с трубами 2
sim:create("vater_place_kanistra", vector():set (37.15,1.68,-218.21), 220363, 856) -- Долина, вагончик разведчика
sim:create("vater_place", vector():set (-9.19,5.43,-3.18), 1617, 1166) -- Х-18, туалет, раковина
sim:create("vater_place", vector():set (23.97,5.32,21.01), 6429, 1120) -- Х-18, туалет, раковина
sim:create("vater_place_kanistra", vector():set (22.24,4.18,6.98), 6130, 1119) -- Х-18, в генераторной
sim:create("vater_place_kanistra", vector():set (3.69,4.19,0.69), 3284, 1124) -- Х-18, под матюгальником
sim:create("vater_place_kanistra", vector():set (111.36,4.22,-10.04), 307930, 987) -- Долина, домик на заправке
sim:create("vater_place_kanistra", vector():set (226.95,-5.39,123.38), 57228, 1198) -- Бар, бункер Долга
sim:create("vater_place_kanistra", vector():set (-250.52,1.37,13.97), 9490, 1424) -- Росток, в вагончике
sim:create("vater_place_kanistra", vector():set (27.69,-11.69,-276.63), 54981, 1480) -- Янтарь, бункер учёных
sim:create("vater_place", vector():set (26.41,6.72,17.61), 4718, 1537) -- Х-16, раковина


-- места с топливом:
sim:create("fuel_place_barel", vector():set (131.75,-7.68,-7.35), 435757, 134) --  Кордон, АТП (бензин)
sim:create("fuel_place2", vector():set (117.97,8.19,-74.82), 326124, 979) -- Долина, заправка, на баке №1 (солярка)
sim:create("fuel_place", vector():set (117.80,8.19,-62.12), 326142, 979) -- Долина, заправка, на баке №2 (бензин)
sim:create("fuel_place", vector():set (117.90,8.19,-49.14), 326160, 980) -- Долина, заправка, на баке №3 (бензин)
sim:create("fuel_place_barel", vector():set (-107.32,1.52,-36.11), 106991, 321) --  Свалка, двор ангара, под навесом (бензин)
sim:create("fuel_place_barel", vector():set (-36.26,0.83,361.36), 886260, 2910) --  Предбанник, сарай (бензин)


-- запчасти для тачек:
sim:create("wheel", vector():set (107.23,-6.28,-18.10), 402940, 121) 	-- Кордон
sim:create("wheel", vector():set (97.94,-7.18,-21.40), 396982, 121)
sim:create("wheel", vector():set (100.55,-7.63,-4.40), 400386, 116)
sim:create("wheel", vector():set (-205.09,-22.53,-129.24), 47860, 58)
sim:create("avtomobile_tank", vector():set (116.98,-7.61,-38.81), 419553, 124)
sim:create("wheel", vector():set (79.43,1.83,357.19), 373009, 195)
sim:create("bearing", vector():set (140.89,4.54,342.53), 445678, 232)
sim:create("bearing", vector():set (344.13,16.79,244.58), 588104, 251)
sim:create("wheel", vector():set (-65.64,-1.03,-220.04), 134215, 268) 	-- Свалка
sim:create("akumulator", vector():set (-107.92,-1.69,-186.64), 104527, 270)
sim:create("wheel", vector():set (-129.41,-0.65,-188.32), 86631, 269) 
sim:create("bearing", vector():set (-222.83,-7.64,-131.75), 17620, 281)
sim:create("avtomobile_tank", vector():set (108.82,8.19,158.66), 273162, 374)
sim:create("wheel", vector():set (-71.94,-2.45,20.52), 134381, 330) 
sim:create("wheel", vector():set (-109.40,-0.85,22.61), 105425, 319) 
sim:create("wheel", vector():set (18.54,-0.00,24.36), 258678, 480) 	-- Агро
sim:create("avtomobile_tank", vector():set (4.31,1.24,42.53), 244609, 490)
sim:create("akumulator", vector():set (-27.76,-1.04,-180.91), 212328, 676)
sim:create("wheel", vector():set (-176.48,-0.00,-184.64), 60274, 666) 
sim:create("wheel", vector():set (79.37,1.90,-109.52), 314341, 427) 
sim:create("wheel", vector():set (-18.64,-4.44,-475.20), 151838, 953)
sim:create("avtomobile_tank", vector():set (-245.61,0.90,172.63), 11424, 1336) 	-- Росток
sim:create("wheel", vector():set (-288.43,-0.00,129.80), 405, 1350)
sim:create("wheel", vector():set (-282.11,-0.00,84.27), 1316, 1411)
sim:create("wheel", vector():set (-204.19,0.11,64.70), 25850, 1374)
sim:create("wheel", vector():set (-137.17,-0.00,122.22), 43368, 1315)
sim:create("akumulator", vector():set (-252.18,1.15,18.12), 8268, 1395)
sim:create("wheel", vector():set (-29.38,3.85,363.54), 897661, 2910)	--	Предбанник
sim:create("akumulator", vector():set (-67.03,4.85,366.03), 839704, 2898)
sim:create("avtomobile_tank", vector():set (-84.14,1.51,335.50), 814211, 2898)
sim:create("wheel", vector():set (-20.86,2.10,353.35), 911073, 2910)
sim:create("wheel", vector():set (-16.85,1.55,344.19), 917646, 2910)
sim:create("wheel", vector():set (-68.33,0.94,365.52), 837609, 2898)
sim:create("avtomobile_tank", vector():set (19.47,0.42,-122.97), 48526, 1446)	--	Янтарь
sim:create("akumulator", vector():set (127.47,-8.75,-174.07), 109373, 1471)
sim:create("wheel", vector():set (178.17,-7.24,-103.49), 134152, 1451)
sim:create("wheel", vector():set (159.00,-7.23,-87.83), 128741, 1463)



-- всякая всячина:
sim:create("wonder_doll_static", vector():set (-195.71,-19.49,-132.37), 63641, 56)
sim:create("wonder_doll", vector():set (-195.71,-19.49,-132.37), 63641, 56)
sim:create("esc_kamp_dnevnik", vector():set (5.56,-17.85,-159.25), 282051, 108)
spawn_red_sphere_dummy()
sim:create("pda_ochkaric", vector():set (68.55,1.39,163.36), 240043, 364) -- под серпом и молотом на Свалке(тотемное место! что ж туда положить?...)
xr_effects.garb_static_af_loop_spawn()
sim:create("ammo_7.62x54_7h1", vector():set (-6.52,-0.06,1.33), 270419, 83)
sim:create("medkit_army", vector():set (-9.36,0.48,7.09), 267759, 82)
sim:create("bandage", vector():set (-12.38,0.01,5.93), 264333, 82)
--sim:create("irp-b", vector():set (-8.77,0.78,9.89), 267763, 82)
sim:create("flyaga_empty", vector():set (-9.71,4.18,-5.78), 1667, 1166)
spawn_dar_fadric_ballon1()
spawn_dar_fadric_ballon2()
sim:create("montirovka", vector():set (-13.61,-4.90,-470.50), 158145, 953)
sim:create("dar_farm_dead_barrel", vector():set (-119.32,0.79,-503.48), 38659, 834)
sim:create("dar_farm_dead_barrel", vector():set (-117.90,0.77,-502.99), 40111, 834)
sim:create("dar_farm_dead_barrel", vector():set (-119.00,0.78,-502.36), 38660, 834)
sim:create("flyaga_empty", vector():set (-12.22,-4.11,-287.34), 160030, 850)
sim:create("gidroperit", vector():set (-12.22,-4.11,-287.34), 160030, 850)
sim:create("outfit_stalker_green", vector():set (-12.22,-4.11,-287.34), 160030, 850)
sim:create("equipment_bag", vector():set (60.99,0.03,-239.03), 256981, 855)
sim:create("garb_angar_zaz968", vector():set (-94.23,1.51,-31.24), 116278, 321)
sim:create("dar_farm_dead_barrel", vector():set (-125.88,-0.62,207.73), 89097, 348)
sim:create("dar_farm_dead_barrel", vector():set (-124.29,-0.13,209.64), 91749, 348)
sim:create("dar_farm_dead_barrel", vector():set (-125.96,-0.45,208.96), 90405, 348)
sim:create("dar_farm_dead_barrel", vector():set (116.27,2.00,-169.74), 349803, 639)
sim:create("dar_farm_dead_barrel", vector():set (116.27,2.00,-169.74), 349803, 639)
sim:create("dar_farm_dead_barrel", vector():set (116.27,2.00,-169.74), 349803, 639)
sim:create("repair_kit", vector():set (-91.42,1.52,-32.65), 118098, 321)
sim:create("garb_to_ruins_seif_port", vector():set (64.31,13.99,141.15), 235901, 364)
sim:create("agr_reservuars_artefact", vector():set (-37.96,1.00,38.96), 203744, 679)
sim:create("ufo", vector():set (-94.79,49.69,-601.91), 38789, 13)
sim:create("af_crown", vector():set (-114.67,1.53,-29.84), 127313, 599)
sim:create("agr_nii_stairs_port", vector():set (-123.74,12.49,-206.37), 115974, 624)
sim:create("ammo_7.62x54_7h1", vector():set (-217.86,-19.82,-159.30), 34087, 47)
sim:create("ammo_7.62x54_7h1", vector():set (-217.86,-19.82,-159.30), 34087, 47)
sim:create("medkit_scientic", vector():set (-217.11,-19.68,-186.71), 34087, 47)
sim:create("esc_chickenblind_zone_art", vector():set (273.97,4.35,313.56), 547617, 245)
sim:create("agrund_upstairs_nopass_port", vector():set (-72.24,1.10,-113.61), 3268, 797)
sim:create("teapot", vector():set (-213.29,-22.53,-125.85), 41281, 59)
sim:create("wpn_psy_npc", vector():set (32.41,2.06,-55.93), 213787, 1084)
sim:create("headhunter_outfit", vector():set (32.73,2.06,-58.86), 214712, 1084)
spawn_bar_roadbus_magnitofon()
sim:create("medic_bag", vector():set (390.32,12.80,-352.46), 88522, 1290)
sim:create("guitar_f", vector():set (393.64,12.89,-350.92), 89762, 1290)
sim:create("bar_roadbus_box", vector():set (388.54,13.55,-351.57), 87884, 1290)
spawn_bar_road_raciya()
sim:create("ammo_7.62x54_7h1", vector():set (219.90,-0.01,-9.37), 54567, 1261)
sim:create("medkit_army", vector():set (222.81,-0.01,-4.19), 55676, 1261)
sim:create("bar_bunkerdoor_trigger1", vector():set (183.83,1.30,123.61), 45421, 1191)
sim:create("bar_bunkerdoor_trigger2", vector():set (184.49,1.30,123.60), 45527, 1190)
sim:create("bar_bunkerdoor_trigger3", vector():set (226.42,-4.00,138.34), 55485, 1199)
sim:create("bar_bunkerdoor_trigger4", vector():set (151.82,-19.80,74.00), 40435, 1181)
sim:create("bar_koteln_ventilyator1", vector():set (167.10,1.19,89.06), 43099, 1186)
sim:create("bar_koteln_ventilyator2", vector():set (166.80,1.22,97.41), 43107, 1187)
sim:create("bar_karlik_docs1", vector():set (112.48,1.00,73.44), 33195, 1225)
sim:create("bar_karlik_docs2", vector():set (209.97,1.33,63.90), 50694, 1203)
spawn_bar_ventil1()
spawn_bar_ventil2()
spawn_bar_ventil3()
sim:create("vodka", vector():set (-78.07,-0.00,141.29), 49276, 1310)
sim:create("vodka", vector():set (-78.50,-0.00,138.97), 49273, 1310)
sim:create("vodka", vector():set (-74.67,-0.00,138.58), 50291, 1310)
sim:create("vodka", vector():set (-82.62,-0.00,145.54), 48134, 1420)
sim:create("vodka", vector():set (-82.26,-0.00,148.44), 48138, 1420)
sim:create("vodka", vector():set (-82.43,-0.00,142.41), 48129, 1420)
sim:create("scelet_bone1", vector():set (-80.36,-0.00,139.62), 48685, 1310)
sim:create("guitar_f", vector():set (-74.32,-0.00,138.01), 50486, 1310)
sim:create("ammo_og-7b", vector():set (-77.72,-0.00,138.58), 49482, 1310)
sim:create("chair", vector():set (-78.15,0.09,143.42), 49279, 1310)
sim:create("af_chip", vector():set (-259.88,0.27,94.92), 8348, 1378)
sim:create("af_chip", vector():set (-254.35,-5.89,88.60), 8335, 1382)
sim:create("af_chip", vector():set (-288.79,0.79,175.24), 350, 1341)
sim:create("af_chip", vector():set (-253.21,1.41,10.61), 8495, 1424)
sim:create("af_chip", vector():set (-162.42,0.10,95.15), 35076, 1322)
turret_spawn.ros_hunter_turret_spawn()
sim:create("chair", vector():set (-133.75,-0.00,125.61), 43372, 1315)
sim:create("bread", vector():set (-134.80,-0.00,126.10), 43373, 1315)
sim:create("medkit", vector():set (-134.34,-0.00,126.06), 43373, 1315)
sim:create("ros_international", vector():set (-84.12,1.95,153.97), 47770, 1420)
sim:create("ros_vetryak_button", vector():set (-253.69,1.25,142.84), 8402, 1348)
sim:create("medic_bag", vector():set (-258.19,-4.60,91.09), 6736, 1359)
sim:create("bipsizon", vector():set (-257.63,-6.00,89.84), 7345, 1359)
sim:create("ros_acid_bottle", vector():set (-214.01,2.73,87.91), 22437, 1370)
sim:create("ros_house_keis_static", vector():set (-195.34,0.45,98.82), 20847, 1371)
sim:create("ros_house_diary1", vector():set (-211.29,2.79,93.18), 20846, 1371)
sim:create("ros_polter_item1", vector():set (-121.91,-0.04,145.92), 42555, 1312)
sim:create("ros_polter_item2", vector():set (-130.28,-0.13,136.27), 41496, 1313)
sim:create("ros_polter_item3", vector():set (-134.19,-0.03,143.80), 40978, 1313)
sim:create("ros_polter_item4", vector():set (-153.36,-0.00,142.61), 38048, 1314)
sim:create("ros_polter_item5", vector():set (-163.38,-0.02,130.87), 34882, 1314)
sim:create("ros_polter_item6", vector():set (-176.49,-0.01,128.25), 31415, 1324)
sim:create("ros_polter_item7", vector():set (-170.31,-0.05,139.22), 32764, 1314)
sim:create("ros_polter_item8", vector():set (-215.60,1.39,114.73), 23209, 1370)
sim:create("ros_polter_item9", vector():set (-174.35,-0.02,151.55), 31863, 1325)
sim:create("ros_polter_item10", vector():set (-260.27,-6.00,90.41), 6548, 1359)
sim:create("wpn_bm16_full", vector():set (-212.88,1.88,105.52), 25421, 1373)
sim:create("ros_to_krane_port", vector():set (-245.98,8.65,39.31), 12158, 1387)
sim:create("vatnik_outfit", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("wpn_samopal", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("ammo_samopal", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("ammo_samopal", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("bandage", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("vodka", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("medkit", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("bread", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("detector_simple", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("flare_1", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("mobile_changer_33", vector():set (183.32,-8.06,-1.70), 483932, 137)
sim:create("esc_lost_man_pda", vector():set (183.32,-8.06,-1.70), 483932, 137)
spawn_faint_body1()
sim:create("hand_radio", vector():set (-70.41,-15.63,-195.16), 51351, 1431)
sim:create("detector_simple", vector():set (-64.12,-15.52,-195.60), 53218, 1431)
sim:create("electric_motor", vector():set (84.01,1.53,-137.23), 83386, 1440)
sim:create("esc_post_zapiska_obj", vector():set (-114.61,-30.05,-391.55), 140229, 27)

teleport_body1()
teleport_body2()
teleport_body3()
teleport_body4()
teleport_body5()
teleport_body6()
teleport_body7()
teleport_body8()
teleport_body9()
teleport_body10()
teleport_body11()
teleport_body12()
teleport_body13()
teleport_body14()
teleport_body15()
teleport_body16()
teleport_body17()
teleport_body18()
teleport_body19()
teleport_body20()
teleport_body21()
teleport_body22()
teleport_body23()
teleport_body24()
teleport_body25()
teleport_body26()


end



-- Спавн гнезд монстров -------------------------------------------------------------------------------------------------------------

function monsters_spawn()
local sim = alife()
-- Зомби, Кордон, мельница:
sim:create("esc_miln_zombie1", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie2", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie3", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie4", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie5", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie6", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie7", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie8", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie9", vector():set (-14.97,2.48,65.21), 262390, 88)
sim:create("esc_miln_zombie10", vector():set (-14.97,2.48,65.21), 262390, 88)	

-- Зомби и контролёр, Кордон, АТП:
sim:create("esc_atp_zombie1", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie2", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie3", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie4", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie5", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie6", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie7", vector():set (113.08,-7.68,-17.48), 415534, 115)
sim:create("esc_atp_zombie8", vector():set (113.08,-7.68,-17.48), 415534, 115)
spawn_esc_atp_controler()

-- Кровососы, туннель, Свалка:
sim:create("garb_tunnel_sos_boss", vector():set (-218.89,0.34,10.42), 19321, 314)
sim:create("garb_tunnel_sos1", vector():set (-218.89,0.34,10.42), 19321, 314)
sim:create("garb_tunnel_sos2", vector():set (-218.89,0.34,10.42), 19321, 314)
sim:create("garb_tunnel_sos3", vector():set (-218.89,0.34,10.42), 19321, 314)
sim:create("garb_tunnel_sos4", vector():set (-218.89,0.34,10.42), 19321, 314)
sim:create("garb_tunnel_sos5", vector():set (-218.89,0.34,10.42), 19321, 314)

-- Вооруженные зомби, бункер, Бар:
sim:create("bar_bunkerzombie_boss", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie1", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie2", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie3", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie4", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie5", vector():set (223.47,-5.44,127.20), 56041, 1198)
sim:create("bar_bunkerzombie6", vector():set (198.67,-0.00,122.01), 47417, 1190)
sim:create("bar_bunkerzombie7", vector():set (198.67,-0.00,122.01), 47417, 1190)

-- Собаки, лесок, Свалка:
sim:create("garb_forest_pseudodog_boss", vector():set (156.79,-1.03,-178.19), 310566, 406)
sim:create("garb_forest_pseudodog1", vector():set (156.79,-1.03,-178.19), 310566, 406)
sim:create("garb_forest_pseudodog2", vector():set (156.79,-1.03,-178.19), 310566, 406)
sim:create("garb_forest_pseudodog3", vector():set (156.79,-1.03,-178.19), 310566, 406)
sim:create("garb_forest_pseudodog4", vector():set (156.79,-1.03,-178.19), 310566, 406)
sim:create("garb_forest_pseudodog5", vector():set (156.79,-1.03,-178.19), 310566, 406)


-- Призраки у экскаватора, Свалка:
sim:create("garb_moving_smoke1", vector():set (-184.61,-3.55,109.21), 39970, 341)
sim:create("garb_moving_smoke1", vector():set (-184.61,-3.55,109.21), 39970, 341)
sim:create("garb_moving_smoke1", vector():set (-184.61,-3.55,109.21), 39970, 341)
sim:create("garb_moving_smoke1", vector():set (-184.61,-3.55,109.21), 39970, 341)

-- Серый рой у ангара, Свалка:
sim:create("garb_moving_fly13", vector():set (-48.09,0.40,-30.70), 142929, 323)
sim:create("garb_moving_fly14", vector():set (-48.09,0.40,-30.70), 142929, 323)
sim:create("garb_moving_fly15", vector():set (-48.09,0.40,-30.70), 142929, 323)
sim:create("garb_moving_fly16", vector():set (-48.09,0.40,-30.70), 142929, 323)
sim:create("garb_moving_fly17", vector():set (-48.09,0.40,-30.70), 142929, 323)

-- Шаровые молнии первый этаж НИИ, Агропром:
sim:create("agr_nii_moving_fire1", vector():set (-148.02,-0.00,-200.82), 90226, 620)
sim:create("agr_nii_moving_fire2", vector():set (-148.02,-0.00,-200.82), 90226, 620)
sim:create("agr_nii_moving_fire3", vector():set (-148.02,-0.00,-200.82), 90226, 620)

-- Желтый рой за трубой на фабрике, Агропром:
sim:create("agr_moving_fly1", vector():set (14.81,-2.53,-0.81), 254773, 479)
sim:create("agr_moving_fly2", vector():set (14.81,-2.53,-0.81), 254773, 479)
sim:create("agr_moving_fly3", vector():set (14.81,-2.53,-0.81), 254773, 479)
sim:create("agr_moving_fly4", vector():set (14.81,-2.53,-0.81), 254773, 479)
sim:create("agr_moving_fly5", vector():set (14.81,-2.53,-0.81), 254773, 479)

-- Желтый рой в будке у фабрики, Агропром:
sim:create("agr_moving_fly6", vector():set (-47.20,-0.80,-35.11), 194127, 654)
sim:create("agr_moving_fly7", vector():set (-47.20,-0.80,-35.11), 194127, 654)
sim:create("agr_moving_fly8", vector():set (-47.20,-0.80,-35.11), 194127, 654)
sim:create("agr_moving_fly9", vector():set (-47.20,-0.80,-35.11), 194127, 654)

-- Домовые, фабрика, Агропром:
--spawn_agr_factory_brownie2()

--  Электроразряд, у ангара, Свалка:
sim:create("garb_electric_fly1", vector():set (-142.64,0.42,8.62), 74245, 318)


-- Телепорты-охранники, фабрика, ТД:
sim:create("dar_factory_teleport1", vector():set (133.01,0.23,-237.24), 330334, 957)
sim:create("dar_factory_teleport2", vector():set (133.01,0.23,-237.24), 330334, 957)
sim:create("dar_factory_teleport3", vector():set (133.01,0.23,-237.24), 330334, 957)
sim:create("dar_factory_teleport4", vector():set (133.01,0.23,-237.24), 330334, 957)
sim:create("dar_factory_teleport5", vector():set (133.01,0.23,-237.24), 330334, 957)

-- Зомбированный солдаты у БТР-а, ТД:
spawn_dar_btr_soldiers()

--  Электроразряды, у перехода на Агро, Свалка:
sim:create("garb_electric_fly2", vector():set (-271.67,1.11,-7.79), 3817, 312)
sim:create("garb_electric_fly3", vector():set (-254.68,0.80,-7.08), 7619, 309)
sim:create("garb_electric_fly4", vector():set (-250.72,0.40,-16.87), 8788, 309)
sim:create("garb_electric_fly5", vector():set (-258.67,1.75,-25.01), 6550, 311)
sim:create("garb_electric_fly6", vector():set (-279.20,2.09,-23.26), 2520, 259)
sim:create("garb_electric_fly7", vector():set (-246.48,0.56,-10.54), 10016, 309)
sim:create("garb_electric_fly8", vector():set (-249.31,2.34,0.61), 9210, 310)

--  Светлячки:
sim:create("esc_glowworm", vector():set (67.84,-0.26,364.84), 358192, 196)
sim:create("garb_glowworm", vector():set (240.33,-2.05,-146.57), 363675, 404)
sim:create("agr_glowworm", vector():set (64.20,15.53,155.17), 300849, 510)
sim:create("dar_glowworm", vector():set (16.89,-2.50,-133.82), 194193, 871)

-- Призрак у камаза, Долина:
sim:create("dar_moving_smoke1", vector():set (-12.84,-4.78,-471.22), 158966, 953)

-- Призрак на болоте, Долина:
sim:create("dar_moving_smoke2", vector():set (-14.66,-4.04,-284.97), 156747, 853)

-- Заразные зомби, Бар:
spawn_bar_zombies()

-- Воскресающие зомби на Ростке:
spawn_ros_deadzombies()

--  Электроразряды в подземном переходе на Ростке:
sim:create("ros_electric_fly1", vector():set (-276.14,-6.00,104.55), 2523, 1379)
sim:create("ros_electric_fly2", vector():set (-276.14,-6.00,104.55), 2523, 1379)
sim:create("ros_electric_fly3", vector():set (-276.14,-6.00,104.55), 2523, 1379)
sim:create("ros_electric_fly4", vector():set (-276.14,-6.00,104.55), 2523, 1379)
sim:create("ros_electric_fly5", vector():set (-276.14,-6.00,104.55), 2523, 1379)

-- Призраки у экскаватора, Янтарь:
sim:create("yan_moving_smoke1", vector():set (128.24,-1.92,45.00), 110217, 1523)
sim:create("yan_moving_smoke2", vector():set (128.24,-1.92,45.00), 110217, 1523)
sim:create("yan_moving_smoke3", vector():set (128.24,-1.92,45.00), 110217, 1523)

-- Тесла в электрощитовой на Янтаре:
sim:create("yan_electric_fly1", vector():set (84.01,1.53,-137.23), 83386, 1440)

-- Желтый рой в будке КПП на Милитари:
sim:create("mil_moving_fly1", vector():set (1.26,-5.39,85.02), 308834, 1580)
sim:create("mil_moving_fly2", vector():set (1.26,-5.39,85.02), 308834, 1580)
sim:create("mil_moving_fly3", vector():set (1.26,-5.39,85.02), 308834, 1580)


end

-- Лидеры гнезд ---------------------------------------------------------------------

function spawn_esc_atp_controler()
 local sim = alife()
 local sobj = sim:create("esc_atp_controler", vector():set (111.64,-2.75,1.40), 413041, 117)
 sim_assign_story_id(sobj.id, story_ids.esc_atp_controler)
end

function release_esc_atp_controler()
	local obj = alife():story_object( story_ids.esc_atp_controler )
	if obj then
 		alife():release(obj , true)
	end
end 






function spawn_agr_factory_brownie1()
 local sim = alife()
 local sobj = sim:create("agr_brownie1", vector():set (-5.16,2.49,14.54), 235249, 482)
 sim_assign_story_id(sobj.id, story_ids.agr_brownie1)
end

function spawn_agr_factory_brownie2()
 local sim = alife()
 local sobj = sim:create("agr_brownie2", vector():set (-3.84,7.19,15.10), 236733, 682)
 sim_assign_story_id(sobj.id, story_ids.agr_brownie2)
end

function spawn_agr_factory_brownie3()
 local sim = alife()
 local sobj = sim:create("agr_brownie3", vector():set (45.38,2.49,-12.50), 282930, 663)
 sim_assign_story_id(sobj.id, story_ids.agr_brownie3)
end

function spawn_agr_factory_brownie4()
 local sim = alife()
 local sobj = sim:create("agr_brownie4", vector():set (45.26,7.19,-12.69), 282929, 664)
 sim_assign_story_id(sobj.id, story_ids.agr_brownie4)
end



function mark_agr_brownie2() --??
   local obj = alife():story_object(8262)
   if obj then
 	level.map_add_object_spot_ser(obj.id,"green_location","Домовой")
   end
end



----------------------------------------------------------------------------------------------------------------------

function spawn_dar_btr_soldiers()
alife():create("dar_btr_zomb_oficer", vector():set (-139.04,-1.00,-304.81), 19596, 848)
alife():create("dar_btr_zomb_soldier1", vector():set (-139.04,-1.00,-304.81), 19596, 848)
local obj1 = alife():create("dar_btr_zomb_soldier2", vector():set (-139.04,-1.00,-304.81), 19596, 848)
local obj2 = alife():create("dar_btr_zomb_soldier2", vector():set (-139.04,-1.00,-304.81), 19596, 848)
local obj3 = alife():create("dar_btr_zomb_soldier2", vector():set (-139.04,-1.00,-304.81), 19596, 848)
local obj4 = alife():create("dar_btr_zomb_soldier2", vector():set (-139.04,-1.00,-304.81), 19596, 848)
obj1:on_death()
obj2:on_death()
obj3:on_death()
obj4:on_death()
end

-- Охотники за ГГ ---------------------------------------------------------------------------------------------------

function esc_headhunters_spawn()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		esc_headhunters1_spawn()
	elseif rnd == 2 then 
		esc_headhunters2_spawn()
	elseif rnd == 3 then 
		esc_headhunters3_spawn()
	end
end

function garb_headhunters_spawn()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		garb_headhunters1_spawn()
	elseif rnd == 2 then 
		garb_headhunters2_spawn()
	elseif rnd == 3 then 
		garb_headhunters1_spawn()
	end
end

function agr_headhunters_spawn()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		agr_headhunters1_spawn()
	elseif rnd == 2 then 
		agr_headhunters2_spawn()
	elseif rnd == 3 then 
		agr_headhunters3_spawn()
	end
end

function dar_headhunters_spawn()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		dar_headhunters1_spawn()
	elseif rnd == 2 then 
		dar_headhunters2_spawn()
	elseif rnd == 3 then 
		dar_headhunters1_spawn()
	end
end



function esc_headhunters1_spawn()
alife():create("esc_headhunter1_1", vector():set (27.28,1.19,24.76), 306643, 90)
alife():create("esc_headhunter1_2", vector():set (27.28,1.19,24.76), 306643, 90)
alife():create("esc_headhunter1_3", vector():set (27.28,1.19,24.76), 306643, 90)
end

function esc_headhunters2_spawn()
alife():create("esc_headhunter2_1", vector():set (-99.59,-4.53,-103.60), 161249, 72)
alife():create("esc_headhunter2_2", vector():set (-99.59,-4.53,-103.60), 161249, 72)
alife():create("esc_headhunter2_3", vector():set (-99.59,-4.53,-103.60), 161249, 72)
end

function esc_headhunters3_spawn()
alife():create("esc_headhunter3_1", vector():set (32.28,0.20,-74.16), 312352, 112)
alife():create("esc_headhunter3_2", vector():set (32.28,0.20,-74.16), 312352, 112)
alife():create("esc_headhunter3_3", vector():set (32.28,0.20,-74.16), 312352, 112)
end



function garb_headhunters1_spawn()
alife():create("garb_headhunter1_1", vector():set (124.63,-1.24,177.09), 286162, 374)
alife():create("garb_headhunter1_2", vector():set (124.63,-1.24,177.09), 286162, 374)
alife():create("garb_headhunter1_3", vector():set (124.63,-1.24,177.09), 286162, 374)
end

function garb_headhunters2_spawn()
alife():create("garb_headhunter2_1", vector():set (18.00,0.41,-15.55), 191004, 293)
alife():create("garb_headhunter2_2", vector():set (18.00,0.41,-15.55), 191004, 293)
alife():create("garb_headhunter2_3", vector():set (18.00,0.41,-15.55), 191004, 293)
end



-- Тайники с трупов -----------------------------------------------------------------------------------------------

function spawn_body_habar1()
local obj = level_object_by_sid(8183)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar1", vector():set (40.50,1.27,35.82), 322585, 90) -- в кустах у автобусной остановки
	local sobj_id = sobj.id
	text = "Хабар Сноудена"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("atp_body1_article")
	alife():create("body_habar1", vector():set (40.50,1.27,35.82), 322585, 90)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar2()
local obj = level_object_by_sid(8081)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar2", vector():set (-202.28,-19.93,-125.58), 50431, 58) -- в деревне, за погребом
	local sobj_id = sobj.id
	text = "Хабар Мордатого"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body1_article")
	alife():create("body_habar2", vector():set (-202.28,-19.93,-125.58), 50431, 58)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end--mawrak
end


function spawn_body_habar3()
local obj = level_object_by_sid(8082)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar3", vector():set (-9.29,6.65,129.08), 267902, 95) -- у ж\д моста
	local sobj_id = sobj.id
	text = "Хабар Фишки"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body2_article")
	alife():create("body_habar3", vector():set (-9.29,6.65,129.08), 267902, 95)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end--
end


function spawn_body_habar4()
local obj = level_object_by_sid(8083)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar4", vector():set (-58.90,-19.17,-207.97), 218468, 106) -- напротив хутора, через дорогу, у камней
	local sobj_id = sobj.id
	text = "Хабар Корбута"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body3_article")
	alife():create("body_habar4", vector():set (-58.90,-19.17,-207.97), 218468, 106)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end--
end


function spawn_body_habar5()
local obj = level_object_by_sid(8084)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar5", vector():set (-35.70,2.41,57.44), 242395, 82) -- у мельницы, под кустами
	local sobj_id = sobj.id
	text = "Хабар Носатого"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body4_article")
	alife():create("body_habar5", vector():set (-35.70,2.41,57.44), 242395, 82)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar6()
local obj = level_object_by_sid(8085)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar6", vector():set (-79.57,-7.30,-61.21), 186585, 76) -- рядом с вагончиком, в кустах
	local sobj_id = sobj.id
	text = "Хабар Горшка"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body5_article")
	alife():create("body_habar6", vector():set (-79.57,-7.30,-61.21), 186585, 76)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar7()
local obj = level_object_by_sid(8086)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar7", vector():set (15.99,-4.76,-85.86), 293629, 112) -- недалеко от АТП, под деревом у холма
	local sobj_id = sobj.id
	text = "Хабар Дизеля"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body6_article")
	alife():create("body_habar7", vector():set (15.99,-4.76,-85.86), 293629, 112)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar8()

local obj = level_object_by_sid(8087)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar8", vector():set (341.21,14.64,202.34), 585865, 146) -- в куче камней рядом с локомотивом
	local sobj_id = sobj.id
	text = "Хабар Мартына"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body7_article")
	alife():create("body_habar8", vector():set (341.21,14.64,202.34), 585865, 146)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar9()
local obj = level_object_by_sid(8088)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar9", vector():set (287.74,14.81,8.81), 558802, 139) -- под деревом, у дороги к туннелю в ТД
	local sobj_id = sobj.id
	text = "Хабар Козыря"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body8_article")
	alife():create("body_habar9", vector():set (287.74,14.81,8.81), 558802, 139)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar10()
local obj = level_object_by_sid(8182)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar10", vector():set (-94.43,2.18,110.96), 168332, 84) -- У туннеля с электрой, слева за камнями
	local sobj_id = sobj.id
	text = "Хабар Джека"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("bridge_body9_article")
	alife():create("body_habar10", vector():set (-94.43,2.18,110.96), 168332, 84)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar11()
local obj = level_object_by_sid(8142)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar11", vector():set (-201.61,-13.23,-163.23), 50382, 53) -- Деревня, на трубе разруш. дома
	local sobj_id = sobj.id
	text = "Хабар Виталика"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("beforepost_body1_article")
	alife():create("body_habar11", vector():set (-201.61,-13.23,-163.23), 50382, 53)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end

-- Свалка:

function spawn_body_habar12()
local obj = level_object_by_sid(8107)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar12", vector():set (-152.30,-2.98,146.98), 64846, 344) -- Ложбинка у экскаватора, в одной из труб
	local sobj_id = sobj.id
	text = "Хабар Гарика"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_body1_article")
	alife():create("body_habar12", vector():set (-152.30,-2.98,146.98), 64846, 344)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar14()
local obj = level_object_by_sid(8109)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar14", vector():set (-102.41,-1.23,-224.53), 111112, 271) -- Кладбище техники, в кузове ЗИЛ-а
	local sobj_id = sobj.id
	text = "Хабар Толпыги"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_body3_article")
	alife():create("body_habar14", vector():set (-102.41,-1.23,-224.53), 111112, 271)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar15()
local obj = level_object_by_sid(8110)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar15", vector():set (-56.20,19.41,103.51), 173668, 332) -- На куче с аномальной зоной, в хреновине с трубой
	local sobj_id = sobj.id
	text = "Хабар Бздуна"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_body4_article")
	alife():create("body_habar15", vector():set (-56.20,19.41,103.51), 173668, 332)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar16()
local obj = level_object_by_sid(8111)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar16", vector():set (-140.32,11.51,-3.78), 76864, 320) -- Свалка, вышка во дворе ангара
	alife():create("body_habar16teleport", vector():set (-100.98,0.45,-40.68), 111864, 320)
end
    end

end


function spawn_body_habar17()

local obj = level_object_by_sid(8112)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar17", vector():set (-49.66,0.39,54.93), 142238, 334) -- Слева от входа в ангар, в строит. мусоре
	local sobj_id = sobj.id
	text = "Хабар Юзи"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_body6_article")
	alife():create("body_habar17", vector():set (-49.66,0.39,54.93), 142238, 334)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar18()
local obj = level_object_by_sid(8196)
if db.actor then--mawrak
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar18", vector():set (9.55,0.39,245.40), 288694, 179) -- Рядом с фермой, под сухими кустами
	local sobj_id = sobj.id
	text = "Хабар Ильи"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("kpp_body1_article")
	alife():create("body_habar18", vector():set (9.55,0.39,245.40), 288694, 179)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end
end


function spawn_body_habar19()
local obj = level_object_by_sid(8199)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar19", vector():set (57.65,1.77,375.01), 344510, 196) -- Рядом с дорогой на КПП, за пнем
	local sobj_id = sobj.id
	text = "Хабар Мэдисона"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("kpp_body2_article")
	alife():create("body_habar19", vector():set (57.65,1.77,375.01), 344510, 196)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar20()
local obj = level_object_by_sid(8200)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar20", vector():set (123.39,6.68,341.32), 427195, 233) -- На дереве рядом с убежищем, что на Кордоне
	local sobj_id = sobj.id
	text = "Хабар Хована"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("kpp_body3_article")
	alife():create("body_habar20", vector():set (123.39,6.68,341.32), 427195, 233)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar21()
local obj = level_object_by_sid(8201)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar21", vector():set (181.51,6.78,294.17), 484335, 238) -- Под кустом на холме, рядом с вертом и электрой
	local sobj_id = sobj.id
	text = "Хабар Полторашкина"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("kpp_body4_article")
	alife():create("body_habar21", vector():set (181.51,6.78,294.17), 484335, 238)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar22()
local obj = level_object_by_sid(8208)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar22", vector():set (164.23,-7.76,20.10), 468182, 137) -- под большим деревом за АТП
	local sobj_id = sobj.id
	text = "Хабар Злобного Задрота"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("esc_tunnel_body1_article")
	alife():create("body_habar22", vector():set (164.23,-7.76,20.10), 468182, 137)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar23()
local obj = level_object_by_sid(8304)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar23", vector():set (106.83,9.51,156.65), 270878, 364) -- на втором ярусе разрушенного 3-этажн. здания
	local sobj_id = sobj.id
	text = "Хабар Борща"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_minefield_body1_article")
	alife():create("body_habar23", vector():set (106.83,9.51,156.65), 270878, 364)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar24()
local obj = level_object_by_sid(8305)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar24", vector():set (167.91,-3.57,128.69), 320535, 375) -- Под деревом у болотца, что по дороге в Долину
	local sobj_id = sobj.id
	text = "Хабар Изи"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_minefield_body2_article")
	alife():create("body_habar24", vector():set (167.91,-3.57,128.69), 320535, 375)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar25()
local obj = level_object_by_sid(8306)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar25", vector():set (-167.73,4.38,8.06), 33522, 308) -- на локомотиве у входа в тоннель
	local sobj_id = sobj.id
	text = "Хабар Хитреца"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_minefield_body3_article")
	alife():create("body_habar25", vector():set (-167.73,4.38,8.06), 33522, 308)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar26()
local obj = level_object_by_sid(8307)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar26", vector():set (-208.66,0.39,-35.39), 23177, 307) -- в трубе по дороге на АГРО
	local sobj_id = sobj.id
	text = "Хабар Попандопало"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("garb_minefield_body4_article")
	alife():create("body_habar26", vector():set (-208.66,0.39,-35.39), 23177, 307)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_body_habar29()
local obj = level_object_by_sid(8332)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar29", vector():set (-89.26,3.03,-151.97), 73477, 879) -- Долина, камаз у карьера
	end
end


function spawn_body_habar30()
local obj = level_object_by_sid(8337)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar30", vector():set (-22.99,1.41,-182.08), 149042, 875) -- Долина, возле входа в коридор
	end
end


function spawn_body_habar31()
local obj = level_object_by_sid(8347)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar31", vector():set (-117.27,0.90,-537.28), 42950, 836) -- Долина, на ферме под кустом
	end
end


function spawn_body_habar32()
local obj = level_object_by_sid(8415)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar32", vector():set (-40.72,-4.61,-3.38), 4687, 731) -- Подземка Агро, рюкзак в туннеле с электрой
	alife():create("body_habar33", vector():set (-49.56,-6.26,4.70), 4244, 728) -- Подземка Агро, рюкзак в первом зале за колонной
	end
end


function spawn_body_habar34()
local obj = level_object_by_sid(8450)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar34", vector():set (-79.25,-16.52,-114.03), 2843, 783) -- Подземка Агро, рюкзак под винтовой лестницей
	end
end


function spawn_body_habar35()
local obj = level_object_by_sid(8464)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar35_1", vector():set (13.81,1.34,-249.45), 186828, 264) -- Свалка, багажник жигулей на дороге
	end
end


function spawn_body_habar36()
local obj = level_object_by_sid(8531)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar36", vector():set (-44.53,15.85,-192.57), 144778, 267) -- Свалка, на вышке у кладбища техники
	alife():create("body_habar36teleport", vector():set (-110.67,2.37,-197.78), 103911, 269)
		if db.actor:object("wonder_doll") ~= nil then
		addon.actor_disable_inventory()
		news_manager.send_tip(db.actor, "body_habar36_dolltip", nil, "doll", 10000, nil)
		end
	end
end

function spawn_body_habar37()
local obj = level_object_by_sid(8641)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	alife():create("body_habar37", vector():set (-53.51,4.97,340.34), 859537, 2907)
	end
end


function spawn_body_habar38()
local obj = level_object_by_sid(8647)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar38", vector():set (-208.40,32.09,279.03), 618126, 2873) -- на утёсе у входа в пещеру недалеко от палатки
	local sobj_id = sobj.id
	text = "Хабар Руслана"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("predb_cave_body1_article")
	alife():create("body_habar38", vector():set (-208.40,32.09,279.03), 618126, 2873)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end

function spawn_body_habar39()
local obj = level_object_by_sid(8810)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then

	end
end

function spawn_body_habar40()
local obj = level_object_by_sid(8859)
if db.actor and obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("body_habar40", vector():set (332.51,-46.77,-150.26), 82391, 2086) -- лес на Радаре, под камнями у верта.
	local sobj_id = sobj.id
	text = "Хабар мёртвого агента"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	addon.actor_disable_inventory()

	elseif karma<0.5 then
	db.actor:give_info_portion ("rad_dead_agent4_info_article")
	alife():create("body_habar40", vector():set (332.51,-46.77,-150.26), 82391, 2086)
	news_manager.send_tip(db.actor, "treasure2", nil)
	addon.actor_disable_inventory()
	end
end
end


function spawn_kamp_controler_secret()
alife():create("kamp_controler_treasure", vector():set (-248.74,-19.32,-171.06), 10687, 41)
end
--------------------------------------------------------------------------------------------------------------------------------

function spawn_smoke_habar()
alife():create("esc_house_shron1", vector():set(-218.38,-19.91,-166.17), 34087, 47)
end

function spawn_esc_helicrash()
alife():create("esc_helicrash", vector():set(210.28,2.04,322.07), 504493, 238)
end

function have_sigarets(stalker, player)
    return db.actor:object("sigarets") ~= nil
end

function sigarets_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "sigarets", "out")
end


function mark_hunters()
	local sids = {8056,8057,8058,8059}
	for k, v in ipairs(sids) do
		local sobj = alife():story_object(v)
		if sobj then
			level.map_add_object_spot_ser(sobj.id, "blue_location", "Разведчик")
		end
	end
end
------------------------------------------------------------------------------------------------------------------------------------------------------------------------



function blokpost_alarm_tip()
news_manager.send_tip(db.actor, "blokpost_alarm_tip", nil, "army", 10000, nil)
end

function put_items_to_post_box()
transfer_to_box(5014)
end



function post_patrol_scream()
local obj = level_object_by_sid(37)
local pos = obj:position()
local snd_obj = xr_sound.get_safe_sound_object([[characters_voice\human_01\military\fight\attack\attack_one_5]])
snd_obj:play_at_pos(obj, obj:position(), 0, sound_object.s3d)
end

function blokpost_alarm_tip2()
news_manager.send_tip(db.actor, "blokpost_alarm_tip2", nil, "army", 10000, nil)
end

function blokpost_enemy()
  local sold1 = level_object_by_sid(8118)
if sold1 ~= nil and sold1:alive() then
   sold1:set_relation(game_object.enemy, db.actor)
   sold1:set_goodwill(-5000, db.actor)
  end
  local sold1 = level_object_by_sid(8119)
if sold2 ~= nil and sold2:alive() then
   sold2:set_relation(game_object.enemy, db.actor)
   sold2:set_goodwill(-5000, db.actor)
  end
  local sold3 = level_object_by_sid(8120)
if sold3 ~= nil and sold3:alive() then
   sold3:set_relation(game_object.enemy, db.actor)
   sold3:set_goodwill(-5000, db.actor)
  end
  local sold4 = level_object_by_sid(8121)
if sold4 ~= nil and sold4:alive() then
   sold4:set_relation(game_object.enemy, db.actor)
   sold4:set_goodwill(-5000, db.actor)
  end
  local sold5 = level_object_by_sid(8122)
if sold5 ~= nil and sold5:alive() then
   sold5:set_relation(game_object.enemy, db.actor)
   sold5:set_goodwill(-5000, db.actor)
  end
  local sold6 = level_object_by_sid(8123)
if sold6 ~= nil and sold6:alive() then
   sold6:set_relation(game_object.enemy, db.actor)
   sold6:set_goodwill(-5000, db.actor)
  end
  local sold7 = level_object_by_sid(8124)
if sold7 ~= nil and sold7:alive() then
   sold7:set_relation(game_object.enemy, db.actor)
   sold7:set_goodwill(-5000, db.actor)
  end
  local sold8 = level_object_by_sid(8125)
if sold8 ~= nil and sold8:alive() then
   sold8:set_relation(game_object.enemy, db.actor)
   sold8:set_goodwill(-5000, db.actor)
  end
  local sold9 = level_object_by_sid(8126)
if sold9 ~= nil and sold9:alive() then
   sold9:set_relation(game_object.enemy, db.actor)
   sold9:set_goodwill(-5000, db.actor)
  end
  local sold10 = level_object_by_sid(8127)
if sold10 ~= nil and sold10:alive() then
   sold10:set_relation(game_object.enemy, db.actor)
   sold10:set_goodwill(-5000, db.actor)
  end
  local sold11 = level_object_by_sid(8128)
if sold11 ~= nil and sold11:alive() then
   sold11:set_relation(game_object.enemy, db.actor)
   sold11:set_goodwill(-5000, db.actor)
  end
  local sold12 = level_object_by_sid(8129)
if sold12 ~= nil and sold12:alive() then
   sold12:set_relation(game_object.enemy, db.actor)
   sold12:set_goodwill(-5000, db.actor)
  end
  local sold13 = level_object_by_sid(8130)
if sold13 ~= nil and sold13:alive() then
   sold13:set_relation(game_object.enemy, db.actor)
   sold13:set_goodwill(-5000, db.actor)
  end
  local sold14 = level_object_by_sid(8131)
if sold14 ~= nil and sold14:alive() then
   sold14:set_relation(game_object.enemy, db.actor)
   sold14:set_goodwill(-5000, db.actor)
  end
  local sold15 = level_object_by_sid(8132)
if sold15 ~= nil and sold15:alive() then
   sold15:set_relation(game_object.enemy, db.actor)
   sold15:set_goodwill(-5000, db.actor)
  end
  local sold16 = level_object_by_sid(8133)
if sold16 ~= nil and sold16:alive() then
   sold16:set_relation(game_object.enemy, db.actor)
   sold16:set_goodwill(-5000, db.actor)
  end
end


function post_dopros_end()
level.disable_input()
end


function comander_offline()
 local npc = level_object_by_sid(8135)
    if npc == nil or npc:alive () == false then return end
    local sim = alife ()
    if sim ~= nil then
	sim:set_switch_offline (npc, true)
    end
end

function have_morphine(stalker, player)
    return db.actor:object("vint") ~= nil
end

function morphine_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "vint", "out")
end

function skrepka_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "skrepka", "in")
end


function skidan_first_help(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "flare_1", "in")
    dialogs.relocate_item_section(second_speaker, "knife_1", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
    dialogs.relocate_item_section(second_speaker, "vatnik_outfit", "in")
    dialogs.relocate_item_section(second_speaker, "bread", "in")
    dialogs.relocate_item_section(second_speaker, "flyaga_full", "in")
end

function sanya_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "powder", "in")
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
end

function sanya_give_food_items(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "bowler", "in")
    dialogs.relocate_item_section(second_speaker, "matches", "in")
    dialogs.relocate_item_section(second_speaker, "flyaga_empty", "in")
    dialogs.relocate_item_section(second_speaker, "yod", "in")
end

function medkit_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
end

function spawn_esc_food_boar()
 local sim = alife()
 local sobj = sim:create("esc_food_boar", vector():set (-40.85,-10.18,-72.61), 237969, 77)
 sim_assign_story_id(sobj.id, story_ids.esc_food_boar)
end

function have_boarleg(stalker, player)
    return db.actor:object("mutant_boar_leg") ~= nil
end

function have_boarleg_soup(stalker, player)
    return db.actor:object("boarleg_soup") ~= nil
end

function give_boarleg_portion()
	if db.actor:dont_has_info("boarleg_portion") then
	db.actor:give_info_portion ("boarleg_portion")
	end
end

function have_kapsula1(stalker, player)
    return db.actor:object("kapsula_1") ~= nil
end

function no_have_kapsula1(stalker, player)
    return db.actor:object("kapsula_1") == nil
end

function give_bowler_and_matches(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "bowler", "in")
    dialogs.relocate_item_section(second_speaker, "matches", "in")
end

function boarleg_soup_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "boarleg_soup", "out")
end

function skidan_food_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "repair_kit", "in")
    dialogs.relocate_item_section(second_speaker, "mobile_changer_33", "in")
    dialogs.relocate_item_section(second_speaker, "armor_remkit", "in")
    dialogs.relocate_item_section(second_speaker, "powder", "in")
    dialogs.relocate_item_section(second_speaker, "lighter", "in")
end

function skidan_food_reward2(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "yod", "in")
    dialogs.relocate_item_section(second_speaker, "yod", "in")
    dialogs.relocate_item_section(second_speaker, "antirad", "in")
    dialogs.relocate_item_section(second_speaker, "antirad", "in")
    dialogs.relocate_item_section(second_speaker, "antirad", "in")
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
    dialogs.relocate_item_section(second_speaker, "bread", "in")
    dialogs.relocate_item_section(second_speaker, "kolbasa", "in")
end

function skidan_first_habar_reward1(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 9000, "in")
end

function skidan_first_habar_reward2(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 11000, "in")
end

function skidan_first_habar_reward3(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 15000, "in")
end
-------------------------------------------------------------------------------------------------------------------------------------------------


function have_malandrinus_item(stalker, player)
    return db.actor:object("esc_rad_medicine") ~= nil
end


function start_malandrinus_habar_timer()
start_real_timer(2, "timer_actions.malandrinus_habar_timer_action")
end

function spawn_malandrinus_habar()
rnd = math.random(1, 3)
if rnd == 1 then 
	spawn_malandrinus_habar1()
end
if rnd == 2 then 
	spawn_malandrinus_habar2()
end
if rnd == 3 then 
	spawn_malandrinus_habar3()
end
end


function spawn_malandrinus_habar1()
 local sim = alife()
 local sobj = sim:create("malandrinus_habar", vector():set (58.84,-8.44,-64.17), 345770, 112)
 sim_assign_story_id(sobj.id, story_ids.malandrinus_habar)
end

function spawn_malandrinus_habar2()
 local sim = alife()
 local sobj = sim:create("malandrinus_habar", vector():set (-34.98,2.46,54.14), 243010, 82)
 sim_assign_story_id(sobj.id, story_ids.malandrinus_habar)
end

function spawn_malandrinus_habar3()
 local sim = alife()
 local sobj = sim:create("malandrinus_habar", vector():set (-75.65,-4.91,50.73), 195010, 79)
 sim_assign_story_id(sobj.id, story_ids.malandrinus_habar)
end


function esc_rad_medicine_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "esc_rad_medicine", "out")
end

function medicine_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_samopal", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
end

---------------------------------------------------------------------------------------------------------------------------------------

function beforepost_body_on_place()
	local body = level_object_by_sid(8142)
	local zone = level_object_by_sid(8143)
	return body ~= nil and zone ~= nil and zone:inside(body:position())
end

function beforepost_body_on_place2()
	local body = level_object_by_sid(8142)
	local zone = level_object_by_sid(8144)
	return body ~= nil and zone ~= nil and zone:inside(body:position())
end

function release_blokpost_body1()
local obj = alife():story_object(8142)
  if obj then
   alife():release(obj , true)
  end
end 

function malandrinus_body_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mre", "in")
    dialogs.relocate_item_section(second_speaker, "vodka", "in")
end
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

function spawn_esc_miln_strangers()
spawn_esc_miln_stranger_bag()
start_real_timer(1, "timer_actions.esc_volf_talk_action")
end

function spawn_esc_miln_stranger_bag()
 local sim = alife()
 local sobj = sim:create("miln_stranger_bag", vector():set (314.60,4.13,115.17), 572407, 143)
 sim_assign_story_id(sobj.id, story_ids.miln_stranger_bag)
end

function have_miln_key(stalker, player)
    return db.actor:object("miln_key") ~= nil
end

function actor_in_miln_hide_zone()
	local zone = level_object_by_sid(8162)
	return zone ~= nil and zone:inside(db.actor:position())
end

function have_miln_flash(stalker, player)
    return db.actor:object("miln_strang_flash") ~= nil
end

function have_wpn_psy(stalker, player)
    return db.actor:object("wpn_psy") ~= nil
end

function miln_strangers_on_place()
	if ( has_alife_info("miln_stranger1_on_place") and
		has_alife_info("miln_stranger2_on_place") and
		has_alife_info("miln_stranger3_on_place")  )
	then
		return true
	else
		return false
	end
end

function vagon_ambush_think()
local st = get_hud():GetCustomStatic("vagon_ambush_think") or get_hud():AddCustomStatic("vagon_ambush_think",true)
st.m_endTime = time_global()/1000 + 10
end

function esc_vagon_ambush_dollhint()
start_real_timer(1, "timer_actions.esc_vagon_ambush_dollhint_timer_action")
end

function volk_nightvision_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_nightvision_1", "in")
end

function sanya_about_bobik_tip()
news_manager.send_tip(db.actor, "sanya_about_bobik_tip", nil, "stalker", 5000, nil)
-- mark_bobik()
end

function volk_krivoy_flyaga_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "unic_flyaga_empty", "in")
end

-- Мочим контролёра на АТП ----------------------------------------------------------------------------------------

function esc_atp_monsterspawn()
alife():create("esc_atp_zombie1", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie2", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie3", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie4", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie5", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie6", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie7", vector():set (113.08,-7.68,-17.48), 415534, 115)
alife():create("esc_atp_zombie8", vector():set (113.08,-7.68,-17.48), 415534, 115)
spawn_esc_atp_controler()
end

function hit_atp_controler()
local obj = level_object_by_sid (5481)
local h = hit()
h.draftsman = db.actor
h.type = hit.wound
h.impulse = 0
h.direction = obj:direction()
h.power = 0.9
	if obj ~= nil and obj:alive() == true then
	obj:hit(h)
	end
end


function esc_atp_controler_agress_tip()
if ( has_alife_info("malandrinus_before_atp") and db.actor:dont_has_info("esc_atp_controler_dead") ) then
news_manager.send_tip(db.actor, "esc_atp_controler_agress_tip", nil, "maland", 8000, nil)
end
end

function controler_task_timer()
start_real_timer(3*60, "timer_actions.skidan_control_task_timer_action")
end

function skidan_give_knife2(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "knife_2", "in")
end

function skidan_give_knife4(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "knife_4", "in")
end

function skidan_give_knife5(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "knife_5", "in")
end

function malandrinus_give_binoc(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "binocl_civil", "in")
end

function skidan_control_task_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "antirad", "in")
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "detector_advances", "in")
    dialogs.relocate_item_section(second_speaker, "novice_outfit_leather", "in")
end

function atp_controler_agress_texture()
local st = get_hud():GetCustomStatic("atp_controler_agress_texture") or get_hud():AddCustomStatic("atp_controler_agress_texture",true)
st.m_endTime = time_global()/1000 + 2
end

-----------------------------------------------------------------------------------------------------------------------------------------------------------------

function actor_in_killershide_zone()
	local zone = level_object_by_sid(8178)
	return zone ~= nil and zone:inside(db.actor:position())
end

function killers_in_bridge_zone()
	local zone = level_object_by_sid(8178)
	local npc1 = level_object_by_sid(8179)
	local npc2 = level_object_by_sid(8180)
	local npc3 = level_object_by_sid(8181)
	return npc1 ~= nil and npc2 ~= nil and npc3 ~= nil and zone ~= nil and zone:inside(npc1:position()) and zone:inside(npc2:position()) and zone:inside(npc3:position())
end

function headhunters_relation_bad()
	relation_registry.set_community_goodwill ("headhunter", db.actor:id(), -5000)
end

-------------------------------------------------------------------------------------------------------------------------------------

function izgoy_give_skanner(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "afscanner", "in")
end


function have_af_ballast(stalker, player)
    return stalker:object("af_ballast") ~= nil
end

function have_af_roll(stalker, player)
    return stalker:object("af_roll") ~= nil
end

function have_af_chicken_god(stalker, player)
    return stalker:object("af_chicken_god") ~= nil
end


function af_ballast_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_ballast", "out")
end

function af_roll_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_roll", "out")
end

function af_chicken_god_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_chicken_god", "out")
end


function start_skidan_habar_timer()
start_real_timer(10*60, "timer_actions.skidan_first_habar_timer_action")
end


function have_izgoy_face_tuschano(stalker, player)
    return stalker:object("mad_tuschano_head") ~= nil
end

function izgoy_face_tuschano_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mad_tuschano_head", "out")
end

function izgoy_boots_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "army_boots", "in")
end



function have_esc_lost_man_pda(stalker, player)
    return stalker:object("esc_lost_man_pda") ~= nil
end

function esc_lost_man_pda_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "esc_lost_man_pda", "out")
end

--------------------------------------------------------------------------------------------------------------------------------------

function spawn_farm_boars()
alife():create("esc_farm_attak_boar1", vector():set (-11.84,0.63,291.99), 265396, 187)
alife():create("esc_farm_attak_boar2", vector():set (-11.84,0.63,291.99), 265396, 187)
alife():create("esc_farm_attak_boar3", vector():set (-11.84,0.63,291.99), 265396, 187)
end

function have_medkit(stalker, player)
    return db.actor:object("medkit") ~= nil
end

function have_medkit_army(stalker, player)
    return db.actor:object("medkit_army") ~= nil
end

function have_medkit_scient(stalker, player)
    return db.actor:object("medkit_scientic") ~= nil
end

function have_medkits(stalker, player)
    return ( db.actor:object("medkit") ~= nil or db.actor:object("medkit_army") ~= nil or db.actor:object("medkit_scientic") ~= nil )
end



function medkit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit", "out")
end

function army_medkit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit_army", "out")
end

function scient_medkit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit_scientic", "out")
end


function medkit_remove()
    addon.remove_items("medkit", 1)
end

function army_medkit_remove()
    addon.remove_items("medkit_army", 1)
end

function scient_medkit_remove()
    addon.remove_items("medkit_scientic", 1)
end
-------------------------------------------------------------------------------------------------------------------------------------

function mask_outfit_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mask_outfit", "in")
end

function have_ecolog_outfit(stalker, player)
    return db.actor:object("ecolog_outfit") ~= nil
end


function set_soldier10_neutral()
  local sold = level_object_by_sid(8130)
if sold ~= nil and sold:alive() then
   sold:set_relation(game_object.neutral, db.actor)
   sold:set_goodwill(5000, db.actor)
  end
end


function post_prapor_box_spawn()
 local sim = alife()
 local sobj = sim:create("post_prapor_box", vector():set (-138.21,-29.69,-361.02), 112787, 18)
 sim_assign_story_id(sobj.id, story_ids.post_prapor_box)
end

function have_quest_mask_outfit(stalker, player)
    return db.actor:object("mask_outfit_quest") ~= nil
end

function have_kazarma_key(stalker, player)
    return db.actor:object("kazarma_door_key") ~= nil
end


function soldier10_clear_inventory()
  local npc = level_object_by_sid(8130)
	if npc:alive() then
	amk.clear_npc_inventory(npc)
  	end
end


function mask_outfit_quest_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mask_outfit_quest", "out")
end

function blokpost_stels_task_alarm_think()
local st = get_hud():GetCustomStatic("blokpost_stels_task_alarm_think") or get_hud():AddCustomStatic("blokpost_stels_task_alarm_think",true)
st.m_endTime = time_global()/1000 + 7
end

function mask_outfit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mask_outfit", "out")
end

function sold10_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "soldier_outfit", "in")
end

------------------------------------------------------------------------------------------------------------------------------------------
function enemy(obj1, obj2)
obj2:set_relation(game_object.enemy, obj1)
obj1:set_relation(game_object.enemy, obj2)
end
--------------------------------------------------------------------------------------------------------------------------------------------

function helicrash_survival_artspawn()
 local sim = alife()
 local sobj = sim:create("helicrash_survival_art", vector():set (-61.38,0.76,204.24), 222886, 171)
 sim_assign_story_id(sobj.id, story_ids.helicrash_survival_art)
end

function have_helicrash_survival_art_in_inventory(stalker, player)
   return db.actor:object("helicrash_survival_art") ~= nil
end

function have_helicrash_survival_art()
	if db.actor:object("helicrash_survival_art") ~= nil
                 then
               db.actor:give_info_portion ("helicrash_survival_art_have")
	end
end

function helicrash_survival_art_timer()
start_real_timer(300, "timer_actions.helicrash_survival_art_timer_action")
end

function hunter1_enemy()
local npc = level_object_by_sid(8056)
	if npc ~= nil and npc:alive() then
   	npc:set_relation(game_object.enemy, db.actor)
   	npc:set_goodwill(-5000, db.actor)
  	end
end

function helicrash_survival_art_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "helicrash_survival_art", "out")
end

function kpp_bandits_timer_start()
start_real_timer(70, "timer_actions.kpp_bandits_timer_action")
end

function milnflash_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "miln_strang_flash", "out")
end

function garbage_key_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "garbage_key", "in")
end

function hunter1reward_for_abdul(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_cristallic", "in")
end


function garbage_companions_timer_start()
start_real_timer(1, "timer_actions.garbage_companions_action")
end

--------------------------------------------------------------------------------------------------------------------------------------------
function spawn_test_changer()

end
-------------------------------------------------------------------------------------------------------------------------------------------------

function spawn_abdul_roundfly_zone()
	local sobj = alife():create("abdul_camera_restrictor", db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id())
	--[[local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.shapes:addSphere(2)
		pk:set(data)
	end
end
----------------------------------------------------------------------------------------------------------------------------------------------------


function hunter1unmake_invulnerable()
local npc = level_object_by_sid(8056)
  npc:invulnerable(false)
  amk.remove_item(npc:object("invulnerable"))
end

function helisurvival_enemy()
local npc = level_object_by_sid(8193)
	if npc ~= nil and npc:alive() then
   	npc:set_relation(game_object.enemy, db.actor)
   	npc:set_goodwill(-5000, db.actor)
  	end
end

-----------------------------------------------------------------------------------------------------------------------------------------------

function give_masterart(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "master_art", "out")
end

function varg_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "harmonica_unic", "in")
end

------------------------------------------------------------------------------------------------------------------------------------------

function garbage_companions_start()
	local npc1 = level_object_by_sid(8224)
	local npc2 = level_object_by_sid(8225)
	if npc1 and npc1:alive() then
		dialogs.companion_start_following(npc1, db.actor)
	end
	if npc2 and npc2:alive() then
		dialogs.companion_start_following(npc2, db.actor)
	end
end

function garbage_companions_off()
	local npc1 = level_object_by_sid(8224)
	local npc2 = level_object_by_sid(8225)
	if npc1 and npc1:alive() then
		dialogs.companion_stop_following(npc1, db.actor)
	end
	if npc2 and npc2:alive() then
		dialogs.companion_stop_following(npc2, db.actor)
	end
end


function someone_companions_on_place()
	if has_alife_info("garbage_companions_on_place") then
		return true
	else
		return false
	end
end

function garb_stalker_vagon_zone_clear()
	if ( has_alife_info("izlom_garb_ataker1_dead") and
		has_alife_info("izlom_garb_ataker2_dead") and
		has_alife_info("izlom_garb_ataker3_dead") and
		has_alife_info("boar_garb_ataker1_dead") and
		has_alife_info("boar_garb_ataker2_dead") and
		has_alife_info("boar_garb_ataker3_dead") and
		has_alife_info("pseudo_garb_ataker1_dead") and
		has_alife_info("pseudo_garb_ataker2_dead") and
		has_alife_info("pseudo_garb_ataker3_dead") )
	then
		return true
	else
		return false
	end
end

function gar_mobs_atak_zones_recharge()
local level_name = level.name()

end

function gar_mobs_atak_zone_task_give()
local new_task = CGameTask()
new_task:load("defend_lager_1")
db.actor:give_task(new_task, 17280*1000, false)
end


function spawn_garb_vagon_door_zone()
	local sim = alife()
	local sobj = sim:create("garb_vagon_door_zone", vector():set (39.64,0.91,233.34), 21404, 359)
	sim_assign_story_id(sobj.id, story_ids.garb_vagon_door_zone)
--[[	local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 3
	t.restrictor_type = 2
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.DefaultRestrictorTypeIn -- тип 2
		data.shapes:addSphere(3)
		pk:set(data)
	end
end


function skidan_job1_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "bulletproof_outfit", "in")
    dialogs.relocate_item_section(second_speaker, "armor_remkit", "in")
    dialogs.relocate_item_section(second_speaker, "antirad", "in")
    dialogs.relocate_item_section(second_speaker, "yod", "in")
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "bandage", "in")
    dialogs.relocate_item_section(second_speaker, "gidroperit", "in")
    dialogs.relocate_item_section(second_speaker, "gidroperit", "in")
end
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function garb3shperes_task_spawns()
spawn_green_sphere_dummy()
alife():create("af_gold_sphere", vector():set (-180.31,0.00,109.36), 47105, 341)
alife():create("garb_moving_fly7", vector():set (275.70,-7.47,1.67), 378751, 390)
alife():create("garb_moving_fly8", vector():set (275.70,-7.47,1.67), 378751, 390)
alife():create("garb_moving_fly9", vector():set (275.70,-7.47,1.67), 378751, 390)
alife():create("garb_moving_fly10", vector():set (275.70,-7.47,1.67), 378751, 390)
alife():create("garb_moving_fly11", vector():set (275.70,-7.47,1.67), 378751, 390)
alife():create("garb_moving_fly12", vector():set (275.70,-7.47,1.67), 378751, 390)
end

function spawn_green_sphere_dummy()
	local sim = alife()
 local sobj = sim:create("green_sphere_dummy", vector():set (279.14,7.05,-3.15), 379631, 390)
 sim_assign_story_id(sobj.id, story_ids.green_sphere_dummy)
end

function spawn_red_sphere_dummy()
	local sim = alife()
 local sobj = sim:create("red_sphere_dummy", vector():set (82.63,18.59,98.12), 241853, 370)
 sim_assign_story_id(sobj.id, story_ids.red_sphere_dummy)
end

---------------------------------------------------------------------------------------------------------------------------------------------------------




-- Клиенты: ---------------------------------------------------------------------------------------------------------------------------------------

--Хью -----------------------------------------------------------------------------------
function client1_task1_give()
local new_task = CGameTask()
new_task:load("tm_find_item_1")
db.actor:give_task(new_task, 172800*1000, false)
end

function client1_task2_give()
local new_task = CGameTask()
new_task:load("tm_find_item_2")
db.actor:give_task(new_task, 172800*1000, false)
end

function client1_task3_give()
local new_task = CGameTask()
new_task:load("tm_find_item_3")
db.actor:give_task(new_task, 172800*1000, false)
end



function client1_tasks_give()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		addon_devices.notebook_client1task1()
	elseif rnd == 2 then 
		addon_devices.notebook_client1task2()
	elseif rnd == 3 then
		addon_devices.notebook_client1task3()
	end
end



function black_splash_have()
	if db.actor:object("af_black_splash") ~= nil
                 then
               db.actor:give_info_portion ("client1_art1_have")
	end
end

function fulminating_napkin_have()
	if db.actor:object("af_fulminating_napkin") ~= nil
                 then
               db.actor:give_info_portion ("client1_art2_have")
	end
end

function cancer_eye_have()
	if db.actor:object("af_cancer_eye") ~= nil
                 then
               db.actor:give_info_portion ("client1_art3_have")
	end
end

function notebook_client1task1_spawns()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			notebook_client1task1garb_spawns()
		elseif level_name == "l03_agroprom" then
			notebook_client1task1agr_spawns()	
		elseif level_name == "l04_darkvalley" then
			notebook_client1task1dar_spawns()
		elseif level_name == "l07_military" then
			notebook_client1task1mil_spawns()
		elseif level_name == "l08_yantar" then
			notebook_client1task1yan_spawns()
		end
end

function notebook_client1task2_spawns()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			notebook_client1task2garb_spawns()
		elseif level_name == "l03_agroprom" then
			notebook_client1task2agr_spawns()	
		elseif level_name == "l04_darkvalley" then
			notebook_client1task2dar_spawns()
		elseif level_name == "l07_military" then
			notebook_client1task2mil_spawns()
		elseif level_name == "l08_yantar" then
			notebook_client1task2yan_spawns()
		end
end

function notebook_client1task3_spawns()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			notebook_client1task3garb_spawns()
		elseif level_name == "l03_agroprom" then
			notebook_client1task3agr_spawns()	
		elseif level_name == "l04_darkvalley" then
			notebook_client1task3dar_spawns()
		elseif level_name == "l07_military" then
			notebook_client1task3mil_spawns()
		elseif level_name == "l08_yantar" then
			notebook_client1task3yan_spawns()
		end
end




function notebook_client1task1garb_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_black_splash", vector():set (-219.25,-8.15,-131.48), 19217, 281)
	elseif rnd == 2 then 
		alife():create("af_black_splash", vector():set (84.17,16.32,22.66), 301129, 385)
	elseif rnd == 3 then 
		alife():create("af_black_splash", vector():set (-49.29,0.39,55.63), 142628, 334)
	elseif rnd == 4 then 
		alife():create("af_black_splash", vector():set (-212.47,0.41,12.74), 22838, 314)
	elseif rnd == 5 then 
		alife():create("af_black_splash", vector():set (-140.98,0.42,-39.48), 74185, 320)
	elseif rnd == 6 then 
		alife():create("af_black_splash", vector():set (106.04,-2.59,-263.17), 271020, 263)
	elseif rnd == 7 then 
		alife():create("af_black_splash", vector():set (265.54,-8.77,-120.70), 375096, 405)
	end
end

function notebook_client1task2garb_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_fulminating_napkin", vector():set (-219.25,-8.15,-131.48), 19217, 281)
	elseif rnd == 2 then 
		alife():create("af_fulminating_napkin", vector():set (84.17,16.32,22.66), 301129, 385)
	elseif rnd == 3 then 
		alife():create("af_fulminating_napkin", vector():set (-49.29,0.39,55.63), 142628, 334)
	elseif rnd == 4 then 
		alife():create("af_fulminating_napkin", vector():set (-212.47,0.41,12.74), 22838, 314)
	elseif rnd == 5 then 
		alife():create("af_fulminating_napkin", vector():set (-140.98,0.42,-39.48), 74185, 320)
	elseif rnd == 6 then 
		alife():create("af_fulminating_napkin", vector():set (106.04,-2.59,-263.17), 271020, 263)
	elseif rnd == 7 then 
		alife():create("af_fulminating_napkin", vector():set (265.54,-8.77,-120.70), 375096, 405)
	end
end

function notebook_client1task3garb_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_cancer_eye", vector():set (-219.25,-8.15,-131.48), 19217, 281)
	elseif rnd == 2 then 
		alife():create("af_cancer_eye", vector():set (84.17,16.32,22.66), 301129, 385)
	elseif rnd == 3 then 
		alife():create("af_cancer_eye", vector():set (-49.29,0.39,55.63), 142628, 334)
	elseif rnd == 4 then 
		alife():create("af_cancer_eye", vector():set (-212.47,0.41,12.74), 22838, 314)
	elseif rnd == 5 then 
		alife():create("af_cancer_eye", vector():set (-140.98,0.42,-39.48), 74185, 320)
	elseif rnd == 6 then 
		alife():create("af_cancer_eye", vector():set (106.04,-2.59,-263.17), 271020, 263)
	elseif rnd == 7 then 
		alife():create("af_cancer_eye", vector():set (265.54,-8.77,-120.70), 375096, 405)
	end
end


-- 
function notebook_client1task1agr_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_black_splash", vector():set (-125.81,0.15,-129.33), 113757, 604)
	elseif rnd == 2 then 
		alife():create("af_black_splash", vector():set (-224.87,6.52,29.69), 12722, 540)
	elseif rnd == 3 then 
		alife():create("af_black_splash", vector():set (-122.89,7.88,136.61), 117180, 523)
	elseif rnd == 4 then 
		alife():create("af_black_splash", vector():set (45.13,10.15,170.51), 282537, 687)
	elseif rnd == 5 then 
		alife():create("af_black_splash", vector():set (166.98,0.44,28.68), 390725, 584)
	elseif rnd == 6 then 
		alife():create("af_black_splash", vector():set (275.81,0.31,-14.83), 433041, 693)
	elseif rnd == 7 then 
		alife():create("af_black_splash", vector():set (213.98,22.15,123.98), 414015, 573)
	end
end

function notebook_client1task2agr_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_fulminating_napkin", vector():set (-125.81,0.15,-129.33), 113757, 604)
	elseif rnd == 2 then 
		alife():create("af_fulminating_napkin", vector():set (-224.87,6.52,29.69), 12722, 540)
	elseif rnd == 3 then 
		alife():create("af_fulminating_napkin", vector():set (-122.89,7.88,136.61), 117180, 523)
	elseif rnd == 4 then 
		alife():create("af_fulminating_napkin", vector():set (45.13,10.15,170.51), 282537, 687)
	elseif rnd == 5 then 
		alife():create("af_fulminating_napkin", vector():set (166.98,0.44,28.68), 390725, 584)
	elseif rnd == 6 then 
		alife():create("af_fulminating_napkin", vector():set (275.81,0.31,-14.83), 433041, 693)
	elseif rnd == 7 then 
		alife():create("af_fulminating_napkin", vector():set (213.98,22.15,123.98), 414015, 573)
	end
end

function notebook_client1task3agr_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_cancer_eye", vector():set (-125.81,0.15,-129.33), 113757, 604)
	elseif rnd == 2 then 
		alife():create("af_cancer_eye", vector():set (-224.87,6.52,29.69), 12722, 540)
	elseif rnd == 3 then 
		alife():create("af_cancer_eye", vector():set (-122.89,7.88,136.61), 117180, 523)
	elseif rnd == 4 then 
		alife():create("af_cancer_eye", vector():set (45.13,10.15,170.51), 282537, 687)
	elseif rnd == 5 then 
		alife():create("af_cancer_eye", vector():set (166.98,0.44,28.68), 390725, 584)
	elseif rnd == 6 then 
		alife():create("af_cancer_eye", vector():set (275.81,0.31,-14.83), 433041, 693)
	elseif rnd == 7 then 
		alife():create("af_cancer_eye", vector():set (213.98,22.15,123.98), 414015, 573)
	end
end


--
function notebook_client1task1dar_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_black_splash", vector():set (180.72,0.15,-230.90), 381127, 927)
	elseif rnd == 2 then 
		alife():create("af_black_splash", vector():set (-158.58,-4.69,-88.61), 359171, 919)
	elseif rnd == 3 then 
		alife():create("af_black_splash", vector():set (130.72,-1.37,60.24), 328459, 911)
	elseif rnd == 4 then 
		alife():create("af_black_splash", vector():set (-77.62,-6.28,12.85), 83678, 896)
	elseif rnd == 5 then 
		alife():create("af_black_splash", vector():set (179.77,6.89,-358.10), 380280, 938)
	elseif rnd == 6 then 
		alife():create("af_black_splash", vector():set (91.77,1.77,-490.85), 286494, 949)
	elseif rnd == 7 then 
		alife():create("af_black_splash", vector():set (-114.80,3.20,-410.69), 42402, 827)
	end
end

function notebook_client1task2dar_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_fulminating_napkin", vector():set (180.72,0.15,-230.90), 381127, 927)
	elseif rnd == 2 then 
		alife():create("af_fulminating_napkin", vector():set (-158.58,-4.69,-88.61), 359171, 919)
	elseif rnd == 3 then 
		alife():create("af_fulminating_napkin", vector():set (130.72,-1.37,60.24), 328459, 911)
	elseif rnd == 4 then 
		alife():create("af_fulminating_napkin", vector():set (-77.62,-6.28,12.85), 83678, 896)
	elseif rnd == 5 then 
		alife():create("af_fulminating_napkin", vector():set (179.77,6.89,-358.10), 380280, 938)
	elseif rnd == 6 then 
		alife():create("af_fulminating_napkin", vector():set (91.77,1.77,-490.85), 286494, 949)
	elseif rnd == 7 then 
		alife():create("af_fulminating_napkin", vector():set (-114.80,3.20,-410.69), 42402, 827)
	end
end

function notebook_client1task3dar_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_cancer_eye", vector():set (180.72,0.15,-230.90), 381127, 927)
	elseif rnd == 2 then 
		alife():create("af_cancer_eye", vector():set (-158.58,-4.69,-88.61), 359171, 919)
	elseif rnd == 3 then 
		alife():create("af_cancer_eye", vector():set (130.72,-1.37,60.24), 328459, 911)
	elseif rnd == 4 then 
		alife():create("af_cancer_eye", vector():set (-77.62,-6.28,12.85), 83678, 896)
	elseif rnd == 5 then 
		alife():create("af_cancer_eye", vector():set (179.77,6.89,-358.10), 380280, 938)
	elseif rnd == 6 then 
		alife():create("af_cancer_eye", vector():set (91.77,1.77,-490.85), 286494, 949)
	elseif rnd == 7 then 
		alife():create("af_cancer_eye", vector():set (-114.80,3.20,-410.69), 42402, 827)
	end
end
--

function notebook_client1task1mil_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_black_splash", vector():set (-85.94,-8.36,411.05), 228117, 1819)
	elseif rnd == 2 then 
		alife():create("af_black_splash", vector():set (34.48,-11.80,384.20), 338597, 1814)
	elseif rnd == 3 then 
		alife():create("af_black_splash", vector():set (104.55,0.79,305.20), 396083, 1775)
	elseif rnd == 4 then 
		alife():create("af_black_splash", vector():set (23.39,-8.17,24.23), 329004, 1581)
	elseif rnd == 5 then 
		alife():create("af_black_splash", vector():set (-110.77,-5.41,-8.51), 205179, 1613)
	elseif rnd == 6 then 
		alife():create("af_black_splash", vector():set (-164.96,-2.99,2.71), 155792, 1628)
	elseif rnd == 7 then 
		alife():create("af_black_splash", vector():set (-337.47,-4.38,126.47), 14395, 1792)
	end
end

function notebook_client1task2mil_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_fulminating_napkin", vector():set (-85.94,-8.36,411.05), 228117, 1819)
	elseif rnd == 2 then 
		alife():create("af_fulminating_napkin", vector():set (34.48,-11.80,384.20), 338597, 1814)
	elseif rnd == 3 then 
		alife():create("af_fulminating_napkin", vector():set (104.55,0.79,305.20), 396083, 1775)
	elseif rnd == 4 then 
		alife():create("af_fulminating_napkin", vector():set (23.39,-8.17,24.23), 329004, 1581)
	elseif rnd == 5 then 
		alife():create("af_fulminating_napkin", vector():set (-110.77,-5.41,-8.51), 205179, 1613)
	elseif rnd == 6 then 
		alife():create("af_fulminating_napkin", vector():set (-164.96,-2.99,2.71), 155792, 1628)
	elseif rnd == 7 then 
		alife():create("af_fulminating_napkin", vector():set (-337.47,-4.38,126.47), 14395, 1792)
	end
end

function notebook_client1task3mil_spawns()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		alife():create("af_cancer_eye", vector():set (-85.94,-8.36,411.05), 228117, 1819)
	elseif rnd == 2 then 
		alife():create("af_cancer_eye", vector():set (34.48,-11.80,384.20), 338597, 1814)
	elseif rnd == 3 then 
		alife():create("af_cancer_eye", vector():set (104.55,0.79,305.20), 396083, 1775)
	elseif rnd == 4 then 
		alife():create("af_cancer_eye", vector():set (23.39,-8.17,24.23), 329004, 1581)
	elseif rnd == 5 then 
		alife():create("af_cancer_eye", vector():set (-110.77,-5.41,-8.51), 205179, 1613)
	elseif rnd == 6 then 
		alife():create("af_cancer_eye", vector():set (-164.96,-2.99,2.71), 155792, 1628)
	elseif rnd == 7 then 
		alife():create("af_cancer_eye", vector():set (-337.47,-4.38,126.47), 14395, 1792)
	end
end




function client1level_traveling()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			db.actor:give_info_portion ("client1_garbage_traveling")
		elseif level_name == "l03_agroprom" then
			db.actor:give_info_portion ("client1_agro_traveling")
		elseif level_name == "l04_darkvalley" then
			db.actor:give_info_portion ("client1_darkval_traveling")
		elseif level_name == "l07_military" then
			db.actor:give_info_portion ("client1_military_traveling")
		elseif level_name == "l08_yantar" then
			db.actor:give_info_portion ("client1_yantar_traveling")
		end
end


function black_splash_have2(stalker, player)
    return db.actor:object("af_black_splash") ~= nil
end

function black_splash_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_black_splash", "out")
end



function fulminating_napkin_have2(stalker, player)
    return db.actor:object("af_fulminating_napkin") ~= nil
end

function fulminating_napkin_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_fulminating_napkin", "out")
end



function cancer_eye_have2(stalker, player)
    return db.actor:object("af_cancer_eye") ~= nil
end

function cancer_eye_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_cancer_eye", "out")
end



function client1task1reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 20000, "in")
end

function client1task2reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 25000, "in")
end

function client1task3reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 30000, "in")
end


function notebook_client1task1marker()
	start_real_timer(1, "timer_actions.client1task1marker_action")
end

function notebook_client1task2marker()
	start_real_timer(1, "timer_actions.client1task2marker_action")
end

function notebook_client1task3marker()
	start_real_timer(1, "timer_actions.client1task3marker_action")
end



function notebook_client1task1marker_off()
text = "Район поиска артефакта Чёрные брызги"
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("af_black_splash") then
	level.map_remove_object_spot(sobj.id,"crlc_big")
	end
end
end

function notebook_client1task2marker_off()
text = "Район поиска артефакта Чёрные брызги"
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("af_fulminating_napkin") then
	level.map_remove_object_spot(sobj.id,"crlc_big")
	-- return
	end
end
end

function notebook_client1task3marker_off()
text = "Район поиска артефакта Чёрные брызги"
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("af_cancer_eye") then
	level.map_remove_object_spot(sobj.id,"crlc_big")
	end
end
end








-- Нунан -------------------------------------------------------------------------------------------------------------------------------------------

function client2_task1_give()
local new_task = CGameTask()
new_task:load("tm_find_item_6")
db.actor:give_task(new_task, 1728000*1000, false)
end

function client2_task2_give()
local new_task = CGameTask()
new_task:load("tm_find_item_7")
db.actor:give_task(new_task, 1728000*1000, false)
end

function client2_task3_give()
local new_task = CGameTask()
new_task:load("tm_find_item_8")
db.actor:give_task(new_task, 1728000*1000, false)
end


function client2_tasks_give()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		addon_devices.notebook_client2task1()
	elseif rnd == 2 then 
		addon_devices.notebook_client2task2()
	elseif rnd == 3 then
		addon_devices.notebook_client2task3()
	end
end

function client2level_traveling()
if ( db.actor:dont_has_info("client2_garbage_traveling") and db.actor:dont_has_info("client2_agro_traveling") and db.actor:dont_has_info("client2_darkval_traveling") and db.actor:dont_has_info("client2_military_traveling") ) then
	local sim = alife()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			db.actor:give_info_portion ("client2_garbage_traveling")
			--news_manager.send_tip(db.actor, "test_garbage", nil)
			local sobj = alife():create("client2_btr", vector():set (230.96,-1.22,-202.26), 359601, 403)
			sim_assign_story_id(sobj.id, story_ids.client2_btr)
			alife():create("client2_agent", vector():set (227.65,-0.55,-204.09), 358295, 402)
			alife():create("client2_guard1", vector():set (228.40,-1.28,-198.90), 359548, 402)
			alife():create("client2_guard2", vector():set (223.72,0.05,-202.58), 356844, 402)
			alife():create("client2_guard3", vector():set (234.20,-1.45,-200.89), 361084, 403)
			start_real_timer(1, "timer_actions.client2marker_action")
		elseif level_name == "l03_agroprom" then
			db.actor:give_info_portion ("client2_agro_traveling")
			--news_manager.send_tip(db.actor, "test_agro", nil)
			local sobj = alife():create("client2_btr", vector():set (-163.73,0.06,-303.66), 71362, 447)
			sim_assign_story_id(sobj.id, story_ids.client2_btr)
			alife():create("client2_agent", vector():set (-160.43,0.03,-305.09), 76755, 447)
			alife():create("client2_guard1", vector():set (-158.38,0.54,-308.83), 78911, 447)
			alife():create("client2_guard2", vector():set (-155.50,-0.06,-305.36), 81784, 447)
			alife():create("client2_guard3", vector():set (-163.80,0.53,-298.13), 73170, 447)
			start_real_timer(1, "timer_actions.client2marker_action")
		elseif level_name == "l04_darkvalley" then
			db.actor:give_info_portion ("client2_darkval_traveling")
			--news_manager.send_tip(db.actor, "test_darkval", nil)
			local sobj = alife():create("client2_btr", vector():set (93.39,2.19,-510.43), 287245, 951)
			sim_assign_story_id(sobj.id, story_ids.client2_btr)
			alife():create("client2_agent", vector():set (91.14,2.01,-507.77), 284933, 949)
			alife():create("client2_guard1", vector():set (87.17,1.75,-506.93), 281013, 951)
			alife():create("client2_guard2", vector():set (92.41,1.95,-500.14), 286481, 949)
			alife():create("client2_guard3", vector():set (102.05,2.65,-505.89), 297329, 949)
			start_real_timer(1, "timer_actions.client2marker_action")
		elseif level_name == "l07_military" then
			db.actor:give_info_portion ("client2_military_traveling")
			--news_manager.send_tip(db.actor, "test_mil", nil)
			local sobj = alife():create("client2_btr", vector():set (-80.22,-8.15,411.07), 233036, 1819)
			sim_assign_story_id(sobj.id, story_ids.client2_btr)
			alife():create("client2_agent", vector():set (-74.04,-8.55,405.42), 238709, 1819)
			alife():create("client2_guard1", vector():set (-74.04,-8.55,405.42), 238709, 1819)
			alife():create("client2_guard2", vector():set (-74.04,-8.55,405.42), 238709, 1819)
			alife():create("client2_guard3", vector():set (-74.04,-8.55,405.42), 238709, 1819)
		elseif level_name == "l08_yantar" then
			db.actor:give_info_portion ("client2_yantar_traveling")
			--news_manager.send_tip(db.actor, "test_yantar", nil)
		end
end
end

-- проверка артов для выполнения таска:
function three_coals_have()
	if (addon_utils.get_object_number(db.actor, "af_coal") >= 3) then  -- внимание! Предмет не должен быть вида "identity_immunities"!
               db.actor:give_info_portion ("client2_arts1_have")
	end
end

function two_rings_have()
	if (addon_utils.get_object_number(db.actor, "af_bearing") >= 2) then  -- внимание! Предмет не должен быть вида "identity_immunities"!
               db.actor:give_info_portion ("client2_arts2_have")
	end
end

function three_frogs_have()
	if (addon_utils.get_object_number(db.actor, "af_frog") >= 3) then  -- внимание! Предмет не должен быть вида "identity_immunities"!
               db.actor:give_info_portion ("client2_arts3_have")
	end
end

-- проверка артов для диалога по сдаче таска:
function three_coals_have2()
	return (addon_utils.get_object_number(db.actor, "af_coal") >= 3)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function two_rings_have2()
	return (addon_utils.get_object_number(db.actor, "af_bearing") >= 2)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function three_frogs_have2()
	return (addon_utils.get_object_number(db.actor, "af_frog") >= 3)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end


function three_coals_reward(first_speaker, second_speaker)
	addon_utils.give_object(actor, first_speaker, "af_coal", 3)
	dialogs.relocate_money(second_speaker, 25000, "in")
	db.actor:disable_info_portion("client2_agro_traveling")
	db.actor:disable_info_portion("client2_garbage_traveling")
	db.actor:disable_info_portion("client2_darkval_traveling")
	db.actor:disable_info_portion("client2_military_traveling")
end

function two_rings_reward(first_speaker, second_speaker)
	addon_utils.give_object(actor, first_speaker, "af_bearing", 2)
	dialogs.relocate_money(second_speaker, 35000, "in")
	db.actor:disable_info_portion("client2_agro_traveling")
	db.actor:disable_info_portion("client2_garbage_traveling")
	db.actor:disable_info_portion("client2_darkval_traveling")
	db.actor:disable_info_portion("client2_military_traveling")
end

function three_frogs_reward(first_speaker, second_speaker)
	addon_utils.give_object(actor, first_speaker, "af_frog", 3)
	dialogs.relocate_money(second_speaker, 30000, "in")
	db.actor:disable_info_portion("client2_agro_traveling")
	db.actor:disable_info_portion("client2_garbage_traveling")
	db.actor:disable_info_portion("client2_darkval_traveling")
	db.actor:disable_info_portion("client2_military_traveling")
end

function three_frogs_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "af_frog", 3)
end

function two_rings_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "af_bearing", 2)
end

function three_coals_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "af_coal", 3)
end




function client3level_traveling()
	local sim = alife()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			local sobj = alife():create("client3_car", vector():set (231.26,-3.15,-26.25), 359717, 389)
			sim_assign_story_id(sobj.id, story_ids.client3_car)
			alife():create("client3_agent", vector():set (229.13,-3.22,-22.84), 358928, 389)
			alife():create("client3_guard1", vector():set (223.95,-2.78,-26.39), 356954, 389)
			alife():create("client3_guard2", vector():set (232.52,-3.43,-19.24), 360295, 389)
		elseif level_name == "l03_agroprom" then
			local sobj = alife():create("client3_car", vector():set (4.95,19.49,203.14), 245516, 506)
			sim_assign_story_id(sobj.id, story_ids.client3_car)
			alife():create("client3_agent", vector():set (9.10,19.95,202.76), 249612, 506)
			alife():create("client3_guard1", vector():set (10.20,20.62,197.11), 250977, 506)
			alife():create("client3_guard2", vector():set (-0.65,19.50,199.83), 239940, 506)
		elseif level_name == "l04_darkvalley" then
			local sobj = alife():create("client3_car", vector():set (-165.72,0.56,-380.59), 3784, 838)
			sim_assign_story_id(sobj.id, story_ids.client3_car)
			alife():create("client3_agent", vector():set (-163.66,0.27,-379.88), 4818, 838)
			alife():create("client3_guard1", vector():set (-165.25,0.11,-374.60), 4133, 838)
			alife():create("client3_guard2", vector():set (-158.72,0.51,-389.89), 7373, 838)
		elseif level_name == "l07_military" then
			local sobj = alife():create("client3_car", vector():set (-172.47,-2.91,-9.65), 149783, 1654)
			sim_assign_story_id(sobj.id, story_ids.client3_car)
			alife():create("client3_agent", vector():set (-172.68,-3.02,-7.01), 149174, 1654)
			alife():create("client3_guard1", vector():set (-172.68,-3.02,-7.01), 149174, 1654)
			alife():create("client3_guard2", vector():set (-172.68,-3.02,-7.01), 149174, 1654)
		elseif level_name == "l08_yantar" then

		end
end

function disable_client3_portion()
	db.actor:disable_info_portion("notebook_client3travel")
end


-- Ноутбук нычки ----------------------------------------------------------------------------------------------------------------

function notebook_treasures()
local level_name = level.name()
	if level_name == "l02_garbage" then
		if db.actor:dont_has_info("garb_notebook_treasure1") then
			addon_devices.notebook_garb_treasure1()
		elseif ( has_alife_info("garb_notebook_treasure1") and db.actor:dont_has_info("garb_notebook_treasure2") ) then
			addon_devices.notebook_garb_treasure2()
		elseif ( has_alife_info("garb_notebook_treasure1") and has_alife_info("garb_notebook_treasure2") ) then
			addon_devices.notebook_garb_treasure3()
		elseif ( has_alife_info("garb_notebook_treasure3") and has_alife_info("garb_notebook_treasure2") and has_alife_info("garb_notebook_treasure1") ) then
			news_manager.send_tip(db.actor, "notebook_treasures_off", nil)
	end

	elseif level_name == "l03_agroprom" then
		if db.actor:dont_has_info("agr_notebook_treasure1") then
			addon_devices.notebook_agr_treasure1()
		elseif ( has_alife_info("agr_notebook_treasure1") and db.actor:dont_has_info("agr_notebook_treasure2") ) then
			addon_devices.notebook_agr_treasure2()
		elseif ( has_alife_info("agr_notebook_treasure1") and has_alife_info("agr_notebook_treasure2") ) then
			addon_devices.notebook_agr_treasure3()
		elseif ( has_alife_info("agr_notebook_treasure3") and has_alife_info("agr_notebook_treasure2") and has_alife_info("agr_notebook_treasure1") ) then
			news_manager.send_tip(db.actor, "notebook_treasures_off", nil)
	end

	elseif level_name == "l04_darkvalley" then
		if db.actor:dont_has_info("dar_notebook_treasure1") then
			addon_devices.notebook_dar_treasure1()
		elseif ( has_alife_info("dar_notebook_treasure1") and db.actor:dont_has_info("dar_notebook_treasure2") ) then
			addon_devices.notebook_dar_treasure2()
		elseif ( has_alife_info("dar_notebook_treasure1") and has_alife_info("dar_notebook_treasure2") ) then
			addon_devices.notebook_dar_treasure3()
		elseif ( has_alife_info("dar_notebook_treasure3") and has_alife_info("dar_notebook_treasure2") and has_alife_info("dar_notebook_treasure1") ) then
			news_manager.send_tip(db.actor, "notebook_treasures_off", nil)
	end

	elseif level_name == "l07_military" then
		if db.actor:dont_has_info("mil_treasure1") then
			addon_devices.notebook_mil_treasure1()
		elseif ( has_alife_info("mil_treasure1") and db.actor:dont_has_info("mil_treasure2") ) then
			addon_devices.notebook_mil_treasure2()
		elseif ( has_alife_info("mil_treasure1") and has_alife_info("mil_treasure2") ) then
			news_manager.send_tip(db.actor, "notebook_treasures_off", nil)
		end
	end
end

function spawn_notebook_garb_treasure1()
	local sobj = alife():create("garb_notebook_treasure1", vector():set (-42.29,16.70,91.83), 101920, 337)
	local sobj_id = sobj.id
	text = "Хабар по наводке №1"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
	
end

function spawn_notebook_garb_treasure2()
	local sobj = alife():create("garb_notebook_treasure2", vector():set (37.37,1.84,-291.63), 214110, 253)
	local sobj_id = sobj.id
	text = "Хабар по наводке №2"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
	
end

function spawn_notebook_garb_treasure3()
	local sobj = alife():create("garb_notebook_treasure3", vector():set (73.80,3.64,-139.98), 247675, 397)
	local sobj_id = sobj.id
	text = "Хабар по наводке №3"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
	
end



function spawn_notebook_agr_treasure1()
	local sobj = alife():create("agr_notebook_treasure1", vector():set (-120.83,10.07,165.17), 119390, 523)
	local sobj_id = sobj.id
	text = "Хабар по наводке №1"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end

function spawn_notebook_agr_treasure2()
	local sobj = alife():create("agr_notebook_treasure2", vector():set (81.64,0.19,1.90), 317120, 585)
	local sobj_id = sobj.id
	text = "Хабар по наводке №2"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end

function spawn_notebook_agr_treasure3()
	local sobj = alife():create("agr_notebook_treasure3", vector():set (154.10,11.82,108.86), 381659, 503)
	local sobj_id = sobj.id
	text = "Хабар по наводке №3"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end



function spawn_notebook_dar_treasure1()
	local sobj = alife():create("dar_notebook_treasure1", vector():set (-110.45,2.71,-419.89), 49586, 827)
	local sobj_id = sobj.id
	text = "Хабар по наводке №1"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end

function spawn_notebook_dar_treasure2()
	local sobj = alife():create("dar_notebook_treasure2", vector():set (-91.40,-0.73,-141.11), 71934, 886)
	local sobj_id = sobj.id
	text = "Хабар по наводке №2"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end

function spawn_notebook_dar_treasure3()
	local sobj = alife():create("dar_notebook_treasure3", vector():set (59.78,5.23,102.51), 248630, 904)
	local sobj_id = sobj.id
	text = "Хабар по наводке №3"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end


function spawn_notebook_mil_treasure1()
	local sobj = alife():create("mil_notebook_treasure1", vector():set (30.03,-1.49,90.01), 334904, 1638)
	local sobj_id = sobj.id
	text = "Хабар по наводке №1"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end

function spawn_notebook_mil_treasure2()
	local sobj = alife():create("mil_notebook_treasure2", vector():set (-346.87,-3.79,133.17), 8866, 1793)
	local sobj_id = sobj.id
	text = "Хабар по наводке №2"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "notebook_treasure_on", nil)
end


-- Турист, Бомж и Steyr_Aug ---------------------------------------------------------------------------------------------------------

function have_esc_cheramic_box(stalker, player)
    return db.actor:object("esc_cheramic_box") ~= nil
end

function esc_cheramic_box_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "esc_cheramic_box", "out")
end

function bomzh_habar_spawn()
alife():create("bomzh_habar", vector():set (-53.83,-9.11,-60.63), 225295, 77)
end

function mark_bomzh_habar()
   local obj = alife():story_object(8290)
   local obj_id = obj.id
   if obj_id then
   text = "Тайник Бомжа"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
end

function unmark_bomzh_habar()
   local obj = alife():story_object(8290)
   local obj_id = obj.id
   if obj_id then
   text = "Тайник Бомжа"
	level.map_remove_object_spot(obj_id,"crlc_mdl",text)
   end
end

function skidan_bomzh_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "armor_remkit", "in")
    dialogs.relocate_item_section(second_speaker, "repair_kit", "in")
    dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "esc_cheramic_box", "out")
end

function spawn_bomzh_habar2()
alife():create("bomzh_habar2", vector():set (-53.83,-9.11,-60.63), 225295, 77)
end

function skidan_bomzh_reward2(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "binocl_army", "in")
end

function have_broken_aug(stalker, player)
    return db.actor:object("wpn_aug_broken") ~= nil
end

function two_scales_have()
	return (addon_utils.get_object_number(db.actor, "af_scale") >= 2)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function have15000(stalker, player)
	return db.actor:money() >= 15000
end

function two_scales_out(actor, second_speaker)
	--addon_utils.give_object(actor, second_speaker, "af_scale", 2)
	addon.remove_items("af_scale", 2)
end

function out15000(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 15000, "out")
end

function wpn_aug_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_aug", "in")
end

function broken_aug_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_aug_broken", "out")
end

function release_skidan_aug()
local obj = alife():story_object(8436)
  if obj then
   alife():release(obj , true)
  end
end 

function have_bomzh_zapiska(stalker, player)
    return db.actor:object("bomzh_last_zapiska") ~= nil
end

function bomzh_zapiska_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "bomzh_last_zapiska", "out")
end
-------------------------------------------------------------------------------------------------------------------------------------


function have_village_house1_key(stalker, player)
    return db.actor:object("village_house1_door_key") ~= nil
end

function village_house1_task_think()
local st = get_hud():GetCustomStatic("village_house1_task_think") or get_hud():AddCustomStatic("village_house1_task_think",true)
st.m_endTime = time_global()/1000 + 10
end

function have_dynamite_pack(stalker, player)
    return db.actor:object("dynamite_pack") ~= nil
end

function have_suslik_pda()
	if db.actor:object("suslik_pda") ~= nil
                 then
               db.actor:give_info_portion ("suslik_pda_finded")
	end
end

function spawn_suslik_meshok()
alife():create("suslik_treasure", vector():set (-172.88,-20.24,-172.87), 77319, 54)
end

function have_suslik_pda2(stalker, player)
    return db.actor:object("suslik_pda") ~= nil
end

function have_smoke_dynamite(stalker, player)
    return db.actor:object("dynamite_pack") ~= nil
end

function smoke_dynamit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "dynamite_pack", "out")
end

function suslik_pda_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "suslik_pda", "out")
end

function have_deadman_head()
	if db.actor:object("deadman_head") ~= nil
                 then
               db.actor:give_info_portion ("deadmans_head_finded")
	end
end

function have_deadman_head2(stalker, player)
    return db.actor:object("deadman_head") ~= nil
end

function deadmans_head_zone_spawn1()
	local sobj = alife():create("deadmans_head_zone", vector():set (167.71,9.53,65.49), 471329, 154)
--[[	local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(2)
		pk:set(data)
	end
end

function deadman_head_random_find()
	rnd = math.random(1, 3)
	if rnd == 1 then 
		alife():create('deadman_head', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		soundtrack.find_something()
	elseif rnd == 2 then 
		soundtrack.find_nothing()
		obelisk_find_nothing_think()
	elseif rnd == 3 then 
		soundtrack.find_nothing()
		obelisk_find_nothing_think()
	end
end

function obelisk_find_nothing_think()
local st = get_hud():GetCustomStatic("obelisk_find_nothing_think") or get_hud():AddCustomStatic("obelisk_find_nothing_think",true)
st.m_endTime = time_global()/1000 + 5
end

function deadman_head_think()
local st = get_hud():GetCustomStatic("deadman_head_think") or get_hud():AddCustomStatic("deadman_head_think",true)
st.m_endTime = time_global()/1000 + 8
end


function deadman_head_cross1_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-175.41,-2.47,-9.61), 74890, 69)
sim_assign_story_id(sobj.id, story_ids.esc_grave1)
end

function deadman_head_cross2_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (12.41,2.70,84.28), 290000, 89)
sim_assign_story_id(sobj.id, story_ids.esc_grave2)
end

function deadman_head_cross3_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (245.69,8.72,170.21), 528839, 148)
sim_assign_story_id(sobj.id, story_ids.esc_grave3)
end

function deadman_head_cross4_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (295.10,17.17,44.15), 561564, 141)
sim_assign_story_id(sobj.id, story_ids.esc_grave4)
end

function deadman_head_cross5_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (145.44,-7.00,-45.83), 450198, 131)
sim_assign_story_id(sobj.id, story_ids.esc_grave5)
end

function deadman_head_cross6_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (30.07,0.78,-301.06), 203083, 253)
sim_assign_story_id(sobj.id, story_ids.esc_grave6)
end

function deadman_head_cross7_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-50.44,9.87,-137.91), 140494, 286)
sim_assign_story_id(sobj.id, story_ids.esc_grave7)
end

function deadman_head_cross8_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (163.60,-3.40,263.91), 317121, 367)
sim_assign_story_id(sobj.id, story_ids.esc_grave8)
end

function deadman_head_cross9_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-199.89,1.44,-54.95), 29569, 303)
sim_assign_story_id(sobj.id, story_ids.esc_grave9)
end

function deadman_head_cross10_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-43.84,-3.34,-154.05), 123116, 879)
sim_assign_story_id(sobj.id, story_ids.esc_grave10)
end

function deadman_head_cross11_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (154.04,-3.22,-113.75), 353817, 920)
sim_assign_story_id(sobj.id, story_ids.esc_grave11)
end

function deadman_head_cross12_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (119.18,-0.25,92.08), 316150, 907)
sim_assign_story_id(sobj.id, story_ids.esc_grave12)
end

function deadman_head_cross13_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (11.05,3.62,-479.13), 186715, 953)
sim_assign_story_id(sobj.id, story_ids.esc_grave13)
end

function deadman_head_cross14_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-124.27,10.46,31.28), 115529, 527)
sim_assign_story_id(sobj.id, story_ids.esc_grave14)
end

function deadman_head_cross15_spawn()
local sim = alife()
local sobj = alife():create("esc_grave", vector():set (-107.29,8.37,-248.70), 132726, 630)
sim_assign_story_id(sobj.id, story_ids.esc_grave15)
end





function deadman_head_cross1_release()
local obj = alife():story_object(8284)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross2_release()
local obj = alife():story_object(8285)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross3_release()
local obj = alife():story_object(8286)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross4_release()
local obj = alife():story_object(8287)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross5_release()
local obj = alife():story_object(8288)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross6_release()
local obj = alife():story_object(8293)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross7_release()
local obj = alife():story_object(8294)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross8_release()
local obj = alife():story_object(8295)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross9_release()
local obj = alife():story_object(8296)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross10_release()
local obj = alife():story_object(8297)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross11_release()
local obj = alife():story_object(8298)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross12_release()
local obj = alife():story_object(8299)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross13_release()
local obj = alife():story_object(8300)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross14_release()
local obj = alife():story_object(8301)
  if obj then
   alife():release(obj , true)
  end
end

function deadman_head_cross15_release()
local obj = alife():story_object(8302)
  if obj then
   alife():release(obj , true)
  end
end


--------------------------------------------------------------------------------------------------------------------------------------------------

function esc_tunnel_skafandr_breaking_think()
local st = get_hud():GetCustomStatic("esc_tunnel_skafandr_breaking_think") or get_hud():AddCustomStatic("esc_tunnel_skafandr_breaking_think",true)
st.m_endTime = time_global()/1000 + 8
end


-- Кукла ---------------------------------------------------------------------------------------------------------------------------------------

function wonderdoll_esc_mafon_spawn()
alife():create("wonderdoll_esc_mafon", vector():set (-217.94,-17.23,-164.12), 34087, 47)
end

function wonderdoll_akumulator_spawn()
alife():create("akumulator", vector():set (-16.97,3.90,66.70), 258946, 88)
end

function wonderdoll_secrets_tell()
	if xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_esc1"}) then
	addon_devices.wonder_doll_level_secret1()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_esc2"}) then
	addon_devices.wonder_doll_level_secret2()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_esc3"}) then
	addon_devices.wonder_doll_level_secret3()

	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_garb1"}) then
	addon_devices.wonder_doll_level_secret4()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_garb2"}) then
	addon_devices.wonder_doll_level_secret5()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_garb3"}) then
	addon_devices.wonder_doll_level_secret6()
	
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_ros1"}) then
	addon_devices.wonder_doll_level_secret7()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_ros2"}) then
	addon_devices.wonder_doll_level_secret8()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_ros3"}) then
	addon_devices.wonder_doll_level_secret9()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_ros4"}) then
	addon_devices.wonder_doll_level_secret9a()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_yan1"}) then
	addon_devices.wonder_doll_level_secret10()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_yan2"}) then
	addon_devices.wonder_doll_level_secret11()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_pri1"}) then
	addon_devices.wonder_doll_level_secret12()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_aes1"}) then
	addon_devices.wonder_doll_level_secret13()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_aes2"}) then
	addon_devices.wonder_doll_level_secret13()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_aes3"}) then
	addon_devices.wonder_doll_level_secret13()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_aes4"}) then
	addon_devices.wonder_doll_level_secret13()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_aes5"}) then
	addon_devices.wonder_doll_level_secret13()
	elseif xr_conditions.actor_in_zone(nil,nil,{"doll_secret_zone_predb1"}) then
	addon_devices.wonder_doll_level_secret14()

	else 
		addon_devices.wonder_doll_level_secret0()
		soundtrack.wonderdoll_sucess_tip36()
	end
end

function esc_carcrash_pda_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "esc_carcrash_pda", "in")
end

function spawn_esc_carcrash_pda_shron()
	local sobj = alife():create("esc_carcrash_pda_shron", vector():set (-186.86,-18.63,-209.84), 64193, 39)
	local sobj_id = sobj.id
	text = "Точка эвакуации полковника Краснова"
	level.map_add_object_spot_ser(sobj_id,"crlc_big",text)
	news_manager.send_tip(db.actor, "mapspot_added", nil)
	addon.actor_disable_inventory()
end


function wonderdoll_seifs_help()
	if xr_conditions.actor_behind_safe1() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip1", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe2() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip2", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe3() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip3", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()	
	elseif xr_conditions.actor_behind_safe4() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip4", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe5() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip5", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe6() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip6", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe7() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip7", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe8() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip8", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe9() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip9", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe10() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip10", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe11() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip11", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe12() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip12", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe13() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip13", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe14() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip14", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe15() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip15", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe16() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip16", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe17() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip17", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe18() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip18", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif xr_conditions.actor_behind_safe19() == true then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip19", nil, "doll", 15000, nil)
		soundtrack.wonderdoll_sucess_tip41()
		addon.actor_disable_inventory()
	elseif ( xr_conditions.actor_behind_safe1() ~= true 
	and xr_conditions.actor_behind_safe2() ~= true 
	and xr_conditions.actor_behind_safe3() ~= true 
	and xr_conditions.actor_behind_safe4() ~= true 
	and xr_conditions.actor_behind_safe5() ~= true 
	and xr_conditions.actor_behind_safe6() ~= true 
	and xr_conditions.actor_behind_safe7() ~= true 
	and xr_conditions.actor_behind_safe8() ~= true 
	and xr_conditions.actor_behind_safe9() ~= true 
	and xr_conditions.actor_behind_safe10() ~= true 
	and xr_conditions.actor_behind_safe11() ~= true 
	and xr_conditions.actor_behind_safe12() ~= true
	and xr_conditions.actor_behind_safe13() ~= true
	and xr_conditions.actor_behind_safe14() ~= true
	and xr_conditions.actor_behind_safe15() ~= true
	and xr_conditions.actor_behind_safe16() ~= true
	and xr_conditions.actor_behind_safe17() ~= true
	and xr_conditions.actor_behind_safe18() ~= true
	and xr_conditions.actor_behind_safe19() ~= true	) then
		news_manager.send_tip(db.actor, "wonderdoll_seif_tip0", nil, "doll", 5000, nil)
		soundtrack.wonderdoll_sucess_tip36()
		addon.actor_disable_inventory()
	end
end

-----------------------------------------------------------------------------------------------------------------------------------------------


function spawn_dar_zapravka_bloodsuckers()
alife():create("dar_zapravka_bloodsucker1", vector():set (130.54,0.04,-75.63),327578, 979)
alife():create("dar_zapravka_bloodsucker2", vector():set (130.54,0.04,-75.63),327578, 979)
alife():create("dar_zapravka_bloodsucker3", vector():set (130.54,0.04,-75.63),327578, 979)
end


function all_zapravka_blsuckers_dead()
	if has_alife_info("dar_zapravka_bloodsucker1_dead") and
		has_alife_info("dar_zapravka_bloodsucker2_dead") and
		has_alife_info("dar_zapravka_bloodsucker3_dead") 
	then
		return true
	else
		return false
	end
end



function have_garb3spheres()
	if db.actor:object("af_gold_sphere") ~= nil and db.actor:object("af_red_sphere") ~= nil and db.actor:object("af_green_sphere") ~= nil 
				then
               db.actor:give_info_portion ("garb3spheres_finded")
	end
end

function have_af_guider(stalker, player)
    return db.actor:object("af_guider") ~= nil
end

function give_af_guider(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_guider", "out")
end


function spawn_dar_cristall()
local sim = alife()
local sobj = alife():create("dar_cristall", vector():set (34.39,12.64,-51.60), 217674, 1067)
sim_assign_story_id(sobj.id, story_ids.dar_cristall)
delete_dar_building_turrets1()
delete_dar_building_turrets2()
news_manager.send_tip(db.actor, "dar_building_turrets_off", nil)
news_manager.send_tip(db.actor, "dar_building_cristall_shield_off", nil)
end

function delete_dar_building_turrets1()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^turret_darkval") then
		sim:release(sobj,true)
		end
	end
end

function delete_dar_building_turrets2()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^turret_darkval_sniper") then
		sim:release(sobj,true)
		end
	end
end


function have_flamethrower(stalker, player)
    return db.actor:object("wpn_flame") ~= nil
end

function have_dar_explorers_key()
	if db.actor:object("dar_explorers_key") ~= nil then
               db.actor:give_info_portion ("dar_explorers_key_finded")
	end
end

function spawn_dar_explorers_key()
alife():create("dar_explorers_key", vector():set (155.04,0.30,-233.69), 354447, 976)
	if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "wonderdoll_dar_fabrik_key_tip", nil, "doll", 8000, nil)
	soundtrack.wonderdoll_sucess_tip24()
	end
end



function spawn_dar_fadric_ballon1() -- пропан
	local sim = alife()
 local sobj = sim:create("dar_fadric_ballon1", vector():set (147.95,14.79,-275.02), 341884, 959)
 sim_assign_story_id(sobj.id, story_ids.dar_fadric_ballon1)
end

function spawn_dar_fadric_ballon2() -- кислород
	local sim = alife()
 local sobj = sim:create("dar_fadric_ballon2", vector():set (175.68,0.06,-278.32), 376323, 975)
 sim_assign_story_id(sobj.id, story_ids.dar_fadric_ballon2)
end


function have_dar_fadric_ballon1(stalker, player)
	return db.actor:object("dar_fadric_ballon1") ~= nil
end

function have_dar_fadric_ballon2(stalker, player)
	return db.actor:object("dar_fadric_ballon2") ~= nil
end

function have_dar_fadric_rezak(stalker, player)
	return db.actor:object("dar_fadric_rezak") ~= nil
end


-- Приключения в х-18: --------------------------------------------------------------------------------------------------------------------------------------

function put_items_to_x18_box()
--[[local box = level_object_by_sid(8329)
if box then
for i = 0, db.actor:object_count() - 1 do
local obj = db.actor:object(i)
if obj and not (system_ini():line_exist(obj:section(), "quest_item") and system_ini():r_bool(obj:section(), "quest_item")) then db.actor:transfer_item(obj, box) end
end
end]]
transfer_to_box(8329)
end



function three_rats_have()
	return (addon_utils.get_object_number(db.actor, "mutant_rat_corp") >= 3)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function two_rats_have()
	return (addon_utils.get_object_number(db.actor, "mutant_rat_corp") >= 2)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function three_rats_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "mutant_rat_corp", 3)
end

function two_rats_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "mutant_rat_corp", 2)
end

function ecolog_suit_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ecolog_outfit", "in")
end

function spawn_x18radpit_buttons()
--alife():create("x18radpit_manom_button", vector():set (-8.46,2.89,12.55), 1907, 1125)
--alife():create("x18radpit_klapan_button2", vector():set (-7.51,3.09,14.14), 1907, 1125)
--alife():create("x18radpit_klapan_button1", vector():set (-7.44,2.90,15.89), 1908, 1125)
end

function biboran_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "biboran", "in")
end

function rat_trap_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "rat_trap_empty", "in")
end

function start_x18pray_timer()
	start_real_timer(1800, "timer_actions.x18pray_timer_action")
end

function five_rats_have()
	return (addon_utils.get_object_number(db.actor, "mutant_rat_corp") >= 5)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function five_rats_out(actor, stalker)
	addon_utils.give_object(actor, stalker, "mutant_rat_corp", 5)
end

function rat_meet_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "rat_meet", "in")
end

function x18pray_think()
local st = get_hud():GetCustomStatic("x18pray_think") or get_hud():AddCustomStatic("x18pray_think",true)
st.m_endTime = time_global()/1000 + 12
end

function mushroom_nastoyka_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mushroom_nastoyka", "in")
end

function mushroom_nastoyka_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "mushroom_nastoyka", "out")
end

function have_mushroom_nastoyka(stalker, player)
	return db.actor:object("mushroom_nastoyka") ~= nil
end

function x18archive_journal_spawn()
--alife():create("x18_archive_journal", vector():set (12.39,5.31,-1.86), 4639, 1116)
end

function spawn_x18oficer_lock()
--alife():create("x18oficer_lock1", vector():set (-1.66,10.70,-8.65), 2533, 1109)
--alife():create("x18oficer_lock2", vector():set (-2.17,10.70,-1.58), 2795, 1109)
--alife():create("x18oficer_lock3", vector():set (-2.80,10.90,-1.60), 2792, 1109)
--alife():create("x18oficer_lock4", vector():set (-2.80,10.90,-2.71), 2792, 1109)
--alife():create("x18oficer_lock5", vector():set (-2.20,10.90,-2.71), 2792, 1109)
end

function three_perfocards_finded()
	return (addon_utils.get_object_number(db.actor, "perfocard") >= 3)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function have_x18ruined_docks(stalker, player)
	return db.actor:object("x18_ruined_dokuments") ~= nil
end

function subject_weak1reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_sagebrush", "in")
    dialogs.relocate_item_section(second_speaker, "mutant_rat_corp", "in")
    dialogs.relocate_item_section(second_speaker, "mutant_rat_corp", "in")
end

function x18ruined_docks_release()
	addon.remove_items("x18_ruined_dokuments", 4)
	addon.remove_items("x18coder", 1)
end

function three_diskets_loaded()
	if ( has_alife_info("x18_electric_acess") and
		has_alife_info("x18_gidro_acess") )
	then
		return true
	else
		return false
	end
end

function x18_tubezone1spawn()
	local sobj = alife():create("x18_tubezone1", vector():set (-9.67,5.22,-9.12), 1725, 1166)
--	alife():create("x18_tubebox1", vector():set (-9.67,5.22,-9.12), 1725, 1166)
--[[	local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2.5
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(2.5)
		pk:set(data)
	end
end

function x18_tubezone2spawn()
	local sobj = alife():create("x18_tubezone2", vector():set (12.79,5.38,-0.17), 4764, 1116)
--	alife():create("x18_tubebox2", vector():set (12.79,5.38,-0.17), 4764, 1116)
--[[	local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2.5
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(2.5)
		pk:set(data)
	end
end

function x18_tubezone3spawn()
	local sobj = alife():create("x18_tubezone3", vector():set (12.24,5.19,-10.50), 4516, 1114)
--	alife():create("x18_tubebox3", vector():set (12.24,5.19,-10.50), 4516, 1114)
	--[[local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2.5
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(2.5)
		pk:set(data)
	end
end

function x18_powerboxes_spawn()
--alife():create("x18_powerbox1", vector():set (25.82,6.00,19.88), 6516, 1120)
--alife():create("x18_powerbox2", vector():set (17.53,7.00,13.75), 5564, 1165)
--alife():create("x18_powerbox3", vector():set (17.47,7.00,-7.46), 5528, 1117)
--alife():create("x18_powerbox4", vector():set (4.39,6.50,14.72), 3384, 1121)
--alife():create("x18_powerbox5", vector():set (-16.83,5.50,0.93), 1095, 1126)
--alife():create("x18_powerbox6", vector():set (-5.98,2.50,16.41), 1990, 1125)
end

function x18powerboxes_on()
	if ( has_alife_info("x18powerbox1_on") and
		has_alife_info("x18powerbox2_on") and
		has_alife_info("x18powerbox3_on") and
		has_alife_info("x18powerbox4_on") and
		has_alife_info("x18powerbox5_on") and
		has_alife_info("x18powerbox6_on")  )
	then
		return true
	else
		return false
	end
end

function x18tubeboxes_on()
	if ( has_alife_info("x18tubebox1_on") and
		has_alife_info("x18tubebox2_on") and
		has_alife_info("x18tubebox3_on")  )
	then
		return true
	else
		return false
	end
end

function x18subj3appointment1()
level.add_pp_effector("deadcity_wake_old.ppe", 2007, false)
db.actor:set_actor_position(vector():set(-10.60,4.18,-5.30), 1611, 1166)
end

function x18subj3appointment2()
level.add_pp_effector("deadcity_wake_old.ppe", 2007, false)
db.actor:set_actor_position(vector():set(-7.45,4.19,-5.08), 1828, 1166)
end

function rat_meet_have(stalker, player)
	return db.actor:object("rat_meet") ~= nil
end

function rat_meet_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "rat_meet", "out")
    dialogs.relocate_item_section(second_speaker, "knife_5", "in")
end

function set_subjects_friends()
	relation_registry.set_community_goodwill ("pervert", db.actor:id(), 5000)
end


function x18subjects_unmake_invulnerable()
local npc1 = level_object_by_sid(8458)
  npc1:invulnerable(false)
  amk.remove_item(npc1:object("invulnerable"))
local npc2 = level_object_by_sid(8459)
  npc2:invulnerable(false)
  amk.remove_item(npc2:object("invulnerable"))
local npc3 = level_object_by_sid(8460)
  npc3:invulnerable(false)
  amk.remove_item(npc3:object("invulnerable"))
local npc4 = level_object_by_sid(8461)
  npc4:invulnerable(false)
  amk.remove_item(npc4:object("invulnerable"))
local npc5 = level_object_by_sid(8462)
  npc5:invulnerable(false)
  amk.remove_item(npc5:object("invulnerable"))
local npc6 = level_object_by_sid(8463)
  npc6:invulnerable(false)
  amk.remove_item(npc6:object("invulnerable"))
local npc7 = level_object_by_sid(8309)
  npc7:invulnerable(false)
  amk.remove_item(npc7:object("invulnerable"))
local npc8 = level_object_by_sid(8311)
  npc8:invulnerable(false)
  amk.remove_item(npc8:object("invulnerable"))
local npc9 = level_object_by_sid(8315)
  npc9:invulnerable(false)
  amk.remove_item(npc9:object("invulnerable"))
end

function x18big_schemes_have()
	return ( db.actor:object("x18_microshema1") ~= nil and
		db.actor:object("x18_microshema2") ~= nil and
		db.actor:object("x18_microshema3") ~= nil )
end

function x18small_schemes_have()
	return ( db.actor:object("x18_microshema4") ~= nil and
		db.actor:object("x18_microshema5") ~= nil )
end

function release_codedoor_nopass_zone()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^x18_codedoor_nopass_zone") then
		sim:release(sobj,true)
		end
	end
end

function x18details_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "x18_microshema1", "out")
    dialogs.relocate_item_section(second_speaker, "x18_microshema2", "out")
    dialogs.relocate_item_section(second_speaker, "x18_microshema3", "out")
    dialogs.relocate_item_section(second_speaker, "x18_microshema4", "out")
    dialogs.relocate_item_section(second_speaker, "x18_microshema5", "out")
    dialogs.relocate_item_section(second_speaker, "wpn_pm", "in")
end

function spawn_x18controler_boss()
alife():create("x18controler_boss", vector():set (-1.35,-10.81,-8.32), 2532, 1134)
spawn_x18doctors_trap_zone()
end

function spawn_x18doctors_trap_zone()
	local sobj = alife():create("x18doctors_trap_zone", vector():set (18.21,-6.61,-14.62), 5514, 1140)
--[[	local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 2.5
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(2.5)
		pk:set(data)
	end
end

function spawn_x18exit()
	ogsm_freeplay.create_level_changer(8475, vector():set(-1.54,16.31,-13.64), 2388, 1129,
		320180,
		812,
		vector():set( 122.86351776123,-2.86983823776245,-255.919952392578 ),
		vector():set(    0.0 ,  0.0   , -1.0 ),
		"l04_darkvalley",
		2)
	release_x18turrets()
end

function release_x18turrets()
	local sim = alife()
--[[	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^turret_x18") then
		sim:release(sobj,true)
		end
	end]]
	sim:iterate_objects(function(sobj)
		if sobj:name():find("^turret_x18") then
		sim:release(sobj,true)
		end
	end)
end

function delete_x18trash()
addon.remove_items("pliers", 1)
addon.remove_items("x18oficer_book", 1)
addon.remove_items("x18komendant_key", 1)
end

-----------------------------------------------------------------------------------------------------------------------------------------------------------


-- Спасаем девушку в ТД: ------------------------------------------------------------------------------------------------------------------------------

function spawn_dar_ovrag_anomaly()
local sim = alife()
local sobj = alife():create("dar_ovrag_teleport", vector():set (158.62,-3.22,-121.16), 359125, 920)
sim_assign_story_id(sobj.id, story_ids.dar_ovrag_teleport)
end

function dar_ovrag_woman_think()
local st = get_hud():GetCustomStatic("dar_ovrag_woman_think") or get_hud():AddCustomStatic("dar_ovrag_woman_think",true)
st.m_endTime = time_global()/1000 + 10
start_real_timer(1800, "timer_actions.dar_woman_timer_action")
end

function spawn_dar_swamp_teleport()
local sim = alife()
local sobj = alife():create("dar_swamp_teleport", vector():set (37.38,-4.73,-363.82), 220184, 841)
sim_assign_story_id(sobj.id, story_ids.dar_swamp_teleport)
end


function send_actor_items_to_dar_location_box()
--[[local box = level_object_by_sid(8357)
if box then
for i = 0, db.actor:object_count() - 1 do
local obj = db.actor:object(i)
if obj and not (system_ini():line_exist(obj:section(), "quest_item") and system_ini():r_bool(obj:section(), "quest_item")) then db.actor:transfer_item(obj, box) end
end
end]]
transfer_to_box(8357)
end


function spawn_dar_trap_habar()
alife():create("dar_trap_habar", vector():set (151.72,4.13,-468.44), 351102, 941)
end

function give_rusty_pistol(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_tt_rusty", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x25_p", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x25_p", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x25_p", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x25_p", "in")
end

function spawn_dar_trap_tuschano()
alife():create("dar_trap_tuschano1", vector():set (101.84,2.28,-488.61), 299595, 949)
alife():create("dar_trap_tuschano2", vector():set (101.84,2.28,-488.61), 299595, 949)
alife():create("dar_trap_tuschano3", vector():set (101.84,2.28,-488.61), 299595, 949)
alife():create("dar_trap_tuschano4", vector():set (101.84,2.28,-488.61), 299595, 949)
alife():create("dar_trap_tuschano5", vector():set (99.74,2.05,-478.17), 294319, 949)
alife():create("dar_trap_tuschano6", vector():set (99.74,2.05,-478.17), 294319, 949)
alife():create("dar_trap_tuschano7", vector():set (99.74,2.05,-478.17), 294319, 949)
end


----------------------------------------------------------------------------------------------------------------------------------------------------------------

function cargo_heli_level_traveling()
	local level_name = level.name()
		if level_name == "l02_garbage" then
			db.actor:give_info_portion ("garb_cargo_heli_goto_place")
		elseif level_name == "l03_agroprom" then
			db.actor:give_info_portion ("agro_cargo_heli_goto_place")
		elseif level_name == "l04_darkvalley" then
			db.actor:give_info_portion ("dar_cargo_heli_goto_place")
		elseif level_name == "l07_military" then
			db.actor:give_info_portion ("mil_cargo_heli_goto_place")
		elseif level_name == "l08_yantar" then
			db.actor:give_info_portion ("yan_cargo_heli_goto_place")
		end
end




-- Дневники Ворпала ---------------------------------------------------------------------------------------------------------------------

function vorpal_diary1_think()
local st = get_hud():GetCustomStatic("vorpal_diary1_think") or get_hud():AddCustomStatic("vorpal_diary1_think",true)
st.m_endTime = time_global()/1000 + 10
end

function spawn_vorpal_diary1()
alife():create("vorpal_diary1", vector():set (116.44,4.45,-425.70), 312782, 946) -- в палатке у холма, Долина
end

function spawn_vorpal_diary2()
alife():create("vorpal_diary2", vector():set (-100.00,0.95,-487.18), 58351, 830) -- на ферме у входа, Долина
end

function spawn_vorpal_diary3()
alife():create("vorpal_diary3", vector():set (-134.96,0.96,-488.37), 22750, 831) -- на ферме у второго входа, Долина
end

function spawn_vorpal_diary4()
alife():create("vorpal_diary4", vector():set (-137.54,0.97,-521.03), 20952, 832) -- на ферме у костра, Долина
end

function spawn_vorpal_diary5()
alife():create("vorpal_diary5", vector():set (-116.56,0.78,-503.64), 39388, 834) -- на ферме у экскаватора, Длина
end


function spawn_vorpal_diary6() 
alife():create("vorpal_diary6", vector():set (-124.52,-0.33,208.54), 91748, 348) -- в ложбинке у бочек, Свалка
end

function spawn_vorpal_diary7()
alife():create("vorpal_diary7", vector():set (-239.97,-3.24,93.47), 11920, 339) -- в другой ложбинке со скелетами, Свалка
alife():create("garb_vorpal_habar", vector():set (-240.49,-3.36,95.33), 11716, 339)
alife():create("garb_vorpal_habar_guardian", vector():set (-240.49,-3.36,95.33), 11716, 339)
alife():create("garb_vorpal_habar_guardian", vector():set (-240.49,-3.36,95.33), 11716, 339)
alife():create("garb_vorpal_habar_guardian", vector():set (-240.49,-3.36,95.33), 11716, 339)
alife():create("garb_vorpal_habar_guardian", vector():set (-240.49,-3.36,95.33), 11716, 339)
end

function spawn_vorpal_diary8()
alife():create("vorpal_diary8", vector():set (117.04,2.61,-175.84), 350465, 639) -- у поворота к НИИ, Агропром
alife():create("agr_vorpal_habar", vector():set (117.04,2.61,-175.84), 350465, 639)
end


function spawn_vorpal_body()

end

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function all_farm_ports_completed()
	if has_alife_info("dar_farm_trap_teleport_stage1") and
		has_alife_info("dar_farm_trap_teleport_stage2") and
		has_alife_info("dar_farm_trap_teleport_stage3") and
		has_alife_info("dar_farm_trap_teleport_stage4") and
		has_alife_info("dar_farm_trap_teleport_stage5") and
		has_alife_info("dar_farm_trap_teleport_stage6") and
		has_alife_info("dar_farm_trap_teleport_stage7") and
		has_alife_info("dar_farm_trap_teleport_stage8") 
	then
		return true
	else
		return false
	end
end

function spawn_dar_farm_renegades_box()
	local sim = alife()
 local sobj = sim:create("farm_renegades_box", vector():set (-135.88,1.43,-524.46), 22096, 832)
 sim_assign_story_id(sobj.id, story_ids.farm_renegades_box)
end

function dar_farm_renegades_box_have()
	if db.actor:object("farm_renegades_box") ~= nil then
               db.actor:give_info_portion ("farm_renegades_box_finded")
	end
end

function dar_farm_renegades_ambush_tip()
news_manager.send_tip(db.actor, "dar_farm_renegades_ambush_tip", nil, "stalker", 9000, nil)
end

function spawn_dezintegrator()
local sim = alife()
local pos = db.actor:position()
local sobj = alife():create("dezintegrator", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
sim_assign_story_id(sobj.id, story_ids.dezintegrator)
end

function dar_deadzone_uncharge_think()
local st = get_hud():GetCustomStatic("dar_deadzone_uncharge_think") or get_hud():AddCustomStatic("dar_deadzone_uncharge_think",true)
st.m_endTime = time_global()/1000 + 7
spawn_dar_farm_vorpal_habar()
end

function dar_renegade_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_mushroom", "in")
	dialogs.relocate_money(second_speaker, 30000, "in")
end

function dar_renegades_box_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "farm_renegades_box", "out")
end

function set_renegade1_neutral()
  local sold = level_object_by_sid(8187)
if sold ~= nil and sold:alive() then
   sold:set_relation(game_object.neutral, db.actor)
   sold:set_goodwill(5000, db.actor)
  end
end

function set_renegade2_neutral()
  local sold = level_object_by_sid(8188)
if sold ~= nil and sold:alive() then
   sold:set_relation(game_object.neutral, db.actor)
   sold:set_goodwill(5000, db.actor)
  end
end

function spawn_dar_farm_vorpal_habar()
alife():create("dar_farm_vorpal_habar", vector():set (-118.57,0.78,-503.11), 39388, 834)
end

--------------------------------------------------------------------------------------------------------------------------------------------------------

function dar_btr_soldiers_meeting()
if db.actor:dont_has_info("dar_btr_soldiers_meeting") then
	db.actor:give_info_portion ("dar_btr_soldiers_meeting")
end
end

function spawn_dar_btr_mobs()
alife():create("dar_btr_chimera1", vector():set (-94.89,2.35,-320.78), 64081, 865)
alife():create("dar_btr_chimera2", vector():set (-94.89,2.35,-320.78), 64081, 865)
--alife():create("dar_btr_chimera3", vector():set (-94.89,2.35,-320.78), 64081, 865)
dar_btr_soldiers_chimeras_think()
end

function dar_btr_soldiers_chimeras_think()
local st = get_hud():GetCustomStatic("dar_btr_soldiers_chimeras_think") or get_hud():AddCustomStatic("dar_btr_soldiers_chimeras_think",true)
st.m_endTime = time_global()/1000 + 7
end

function mark_army_disaster_places()
   local obj1 = alife():story_object(	)
   local obj2 = alife():story_object(	)
   local obj3 = alife():story_object(	)
   local obj4 = alife():story_object(	)
   local obj5 = alife():story_object(	)
   local obj6 = alife():story_object(	)
   local obj7 = alife():story_object(	)
   local obj8 = alife():story_object(	)
   local obj9 = alife():story_object(	)
   local obj10 = alife():story_object(	)
   local obj1_id = obj1.id
   local obj2_id = obj2.id
   local obj3_id = obj3.id
   local obj4_id = obj4.id
   local obj5_id = obj5.id
   local obj6_id = obj6.id
   local obj7_id = obj7.id
   local obj8_id = obj8.id
   local obj9_id = obj9.id
   local obj10_id = obj10.id
   if obj1_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj1_id,"blue_location",text)
   end
   if obj2_id then
  text = "Военный пилот" 
	level.map_add_object_spot_ser(obj2_id,"blue_location",text)
   end
   if obj3_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj3_id,"blue_location",text)
   end
   if obj4_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj4_id,"blue_location",text)
   end
   if obj5_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj5_id,"blue_location",text)
   end
   if obj6_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj6_id,"blue_location",text)
   end
   if obj7_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj7_id,"blue_location",text)
   end
   if obj8_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj8_id,"blue_location",text)
   end
   if obj9_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj9_id,"blue_location",text)
   end
   if obj10_id then
   text = "Военный пилот"
	level.map_add_object_spot_ser(obj10_id,"blue_location",text)
   end
end


function dar_zomb_oficer_rewrd(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "dar_crash_btr_box_key", "in")
	db.actor:disable_info_portion("dar_btr_chimera1_dead")
	db.actor:disable_info_portion("dar_btr_chimera2_dead")
end




-- Группа Дятлова -----------------------------------------------------------------------------------------------------------------

function spawn_dyatlov_group_task_items()
alife():create("garb_hangar_burer_boss", vector():set (-81.77,0.44,12.28), 124221, 328)
alife():create("garb_hangar_burer1", vector():set (-85.51,0.43,8.00), 122115, 328)
alife():create("garb_hangar_burer2", vector():set (-87.62,0.42,12.09), 120817, 328)
alife():create("garb_hangar_burer3", vector():set (-84.33,0.94,16.18), 122969, 328)
alife():create("garb_hangar_burer4", vector():set (-91.23,0.34,10.00), 118613, 328)

alife():create("garb_angar_laz1", vector():set (-124.79,0.53,26.41), 91513, 327)
alife():create("garb_angar_laz2", vector():set (-115.95,0.53,-13.66), 99380, 320)
alife():create("garb_angar_laz3", vector():set (-82.40,0.53,-15.03), 123775, 322)
alife():create("dyatlovs_group_zapis1", vector():set (-57.97,10.28,1.66), 137382, 330)
alife():create("garb_angar_gallery_teleport", vector():set (-105.27,10.28,1.03), 108125, 319)
alife():create("garb_angar_gallery_teleport", vector():set (-103.08,5.64,-5.46), 106496, 319)
end

function actor_in_garb_angar()
	if xr_conditions.actor_in_zone(nil,nil,{"garb_angar_inside_zone"})
	then
		return true
	else
		return false
	end
end

function spawn_garb_angar_kabina_bag()
--alife():create("garb_angar_kabina_bag", vector():set (-61.84,23.03,9.35), 135489, 330)
end

function dyatlovs_group_zapis2_info_think()
start_real_timer(5, "timer_actions.dyatlovs_group_info_think_action")
alife():create("dyatlovs_man_pda1", vector():set (-57.77,0.44,33.22), 137420, 325)
end

function dyatlovs_group_zapis2_info_think2()
local st = get_hud():GetCustomStatic("dyatlovs_group_zapis2_info_think") or get_hud():AddCustomStatic("dyatlovs_group_zapis2_info_think",true)
st.m_endTime = time_global()/1000 + 10
end

function mark_dyatlovs_deadplace()
   local obj = alife():story_object(8105)
   local obj_id = obj.id
   if obj_id then
   text = "Сёма и Дятлов с товарищами"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
end

function spawn_dyatlovs_seif()
alife():create("dyatlovs_seif", vector():set (262.79,-9.75,-132.55), 374225, 404)
alife():create("dyatlovs_man_pda2", vector():set (252.92,-7.46,-135.83), 369593, 404)
end

function have_dyatlovs_seif(stalker, player)
	return db.actor:object("dyatlovs_seif") ~= nil
end

function dyatlovs_seif_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "dyatlovs_seif", "out")
end

function actor_in_agr_fabrika_zone()
	local zone = level_object_by_sid(8367)
	return zone ~= nil and zone:inside(db.actor:position())
end


function have_hammer(stalker, player)
	return db.actor:object("hammer") ~= nil
end

function have_screwdriver(stalker, player)
	return db.actor:object("screwdriver") ~= nil
end

function have_wrench1(stalker, player)
	return db.actor:object("wrench1") ~= nil
end

function have_wrench2(stalker, player)
	return db.actor:object("wrench2") ~= nil
end

function have_vise(stalker, player)
	return db.actor:object("vise") ~= nil
end


function spawn_fabrik_instruments()
alife():create("agr_fabrik_instruments_case1", vector():set (-0.46,2.50,19.19), 239689, 482) -- первый этаж, за колонной
alife():create("agr_fabrik_instruments_case2", vector():set (-26.62,9.43,12.12), 213983, 681) -- крыша, в углу
alife():create("agr_fabrik_instruments_case3", vector():set (13.63,-2.52,-1.16), 253440, 479) -- подвал, под лесенокй у насосов
alife():create("agr_fabrik_instruments_case4", vector():set (32.88,2.50,-18.34), 271736, 663) -- в одном из туалетов
alife():create("agr_fabrik_instruments_case5", vector():set (48.26,7.49,-9.42), 285431, 664) -- на 2 этаже, за колонной
end

function have_all_fabrik_instruments(stalker, player)
	return ( db.actor:object("hammer") ~= nil and db.actor:object("screwdriver") ~= nil and
 db.actor:object("wrench1") ~= nil and db.actor:object("wrench2") ~= nil and db.actor:object("vise") ~= nil )
end

function fabrik_instruments_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "hammer", "out")
	dialogs.relocate_item_section(second_speaker, "screwdriver", "out")
	dialogs.relocate_item_section(second_speaker, "wrench1", "out")
	dialogs.relocate_item_section(second_speaker, "wrench2", "out")
	dialogs.relocate_item_section(second_speaker, "vise", "out")
end

function marouders_hand_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_marouders_hand", "in")
end

function have_fotocamera(stalker, player)
	return db.actor:object("fotocamera") ~= nil
end

function spawn_garb_hangar_ufo()
local sim = alife()
local sobj = alife():create("garb_hangar_ufo", vector():set (-98.20,200.11,10.00), 110350, 319)
sim_assign_story_id(sobj.id, story_ids.garb_hangar_ufo)
	if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "wonderdoll_ufo_tip1", nil, "doll", 5000, nil)
	soundtrack.wonderdoll_sucess_tip23()
	end
end

function fotocamera_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "fotocamera", "out")
end

function spawn_garb_klim_habar()
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("garb_klim_habar", vector():set (206.40,-0.83,165.96), 347155, 378) -- в кустах у перехода на ТД
	local sobj_id = sobj.id
	text = "Хабар Клима"
	level.map_add_object_spot_ser(sobj_id,"crlc_big",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
	elseif karma<0.5 then
	db.actor:give_info_portion ("kilm_info_article")
	alife():create("garb_klim_habar", vector():set (206.40,-0.83,165.96), 347155, 378)
	news_manager.send_tip(db.actor, "treasure2", nil)
	end
end
------------------------------------------------------------------------------------------------------------------------------------------------


-- Приключения на фабрике Агро: -----------------------------------------------------------------------------------------------------------------------------------

function agr_fabrik_electroshema_task_spawn1()
alife():create("agr_fabrik_papka", vector():set (-16.80,0.98,-11.45), 225519, 467)
end

function agr_fabrik_electroshema_task_spawn2()
alife():create("agr_fabrik_electroshema", vector():set (61.07,1.28,-20.57), 297314, 460)
end

function have_agr_fabrik_elshema(stalker, player)
	return db.actor:object("agr_fabrik_electroshema") ~= nil
end

function agr_fabrik_electroshema_task_spawn3()
alife():create("agr_fabrik_pump_button1", vector():set (4.30,1.00,10.72), 244574, 478)
alife():create("agr_fabrik_pump_button2", vector():set (13.71,1.00,15.68), 254121, 479)
alife():create("agr_fabrik_power_box1", vector():set (19.59,1.00,-5.15), 259308, 465)
alife():create("agr_fabrik_power_box2", vector():set (-11.17,1.00,4.17), 228996, 466)
alife():create("agr_fabrik_power_box3", vector():set (-38.54,1.00,2.67), 201670, 661)
alife():create("agr_fabrik_electro_shron", vector():set (-15.72,-0.00,42.01), 224904, 471)
end

function agr_fabric_pumps_work()
	if has_alife_info("agr_fabrik_pumps1_on") and
		has_alife_info("agr_fabrik_pumps2_on") then
		return true
	else
		return false
	end
end

function yuriy_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit", "in")
    dialogs.relocate_item_section(second_speaker, "af_spiral", "in")
    dialogs.relocate_item_section(second_speaker, "wpn_sayga2", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_12x76_zhekan", "in")
end

function agr_fabrik_teleports_spawn()

end

function agr_nii_stairs_port_delete()
	bind_mteleport.delete_teleports_with_section("agr_nii_stairs_port")
end

function have_agr_fabrik_seif_key(stalker, player)
	return db.actor:object("agr_fabrik_seif_key") ~= nil
end


function agr_fabrik_nopass_teleport_delete()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^agr_fabrik_nopass_teleport") then
		sim:release(sobj,true)
		end
	end
end


function spawn_agr_cristall()
	local sim = alife()
 local sobj = sim:create("agr_cristall", vector():set (38.97,2.49,-11.81), 277414, 663)
 sim_assign_story_id(sobj.id, story_ids.agr_cristall)
end

function have_agr_fabrik_keys(stalker, player)
	return db.actor:object("agr_fabrik_seif_key") ~= nil
end

function yuriy_reward2(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_sks", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_fmj", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_fmj", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_fmj", "in")
end

function agr_seif_keys_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "agr_fabrik_seif_key", "out")
end

function spawn_script_dynamite()
local sim = alife()
local pos = db.actor:position()
local sobj = alife():create("dynamite_script", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
sim_assign_story_id(sobj.id, story_ids.dynamite_script)
end

function spawn_agr_hunter_vagon_key()
alife():create("agr_vagon_key", vector():set (-20.97,0.045,-163.72), 219217, 437)
end

function spawn_agr_hunter_vagon_box()
alife():create("agr_vagon_box", vector():set (-27.79,-0.20,-172.65), 212339, 676)
end

function two_germetic_suits_finded()
	return (addon_utils.get_object_number(db.actor, "ecolog_outfit") >= 2)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function ecolog_suit_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ecolog_outfit", "out")
end

function spawn_agr_kazarma_pogon_box()
alife():create("agr_kazarma_pogon_box", vector():set (-150.33,1.69,-174.58), 87368, 669)
end

function two_agr_polkovnik_pogons_finded(stalker, player)
	return ( db.actor:object("agr_kazarma_pogon1") ~= nil and
		db.actor:object("agr_kazarma_pogon2") ~= nil )
end

function two_agr_polkovnik_pogons_not_finded(stalker, player)
	return  db.actor:object("agr_kazarma_pogon2") == nil 
end

function agr_polkovnik_pogons_out(first_speaker, second_speaker)
	addon.remove_items("agr_kazarma_pogon1", 1)
	addon.remove_items("agr_kazarma_pogon2", 1)
end

function have_hunter3_kolba(stalker, player)
	return  db.actor:object("agrund_hunter3_kolba") ~= nil 
end

function spawn_agrund_hunter3_box()
alife():create("agrund_hunter3_box", vector():set (-73.66,-2.06,-129.26), 3166, 804)
end

function agrund_virus_konteyner_opened_think()
local st = get_hud():GetCustomStatic("agrund_virus_konteyner_opened_think") or get_hud():AddCustomStatic("agrund_virus_konteyner_opened_think",true)
st.m_endTime = time_global()/1000 + 6
end

function spawn_agrund_motor_table()
alife():create("agrund_motor_table", vector():set (-112.96,-16.46,-41.48), 393, 709)
end

function spawn_redrik_vakcine_shron()
	local sobj = alife():create("redrik_vakcine_shron", vector():set (79.08,1.86,-108.58), 314341, 427)
	local sobj_id = sobj.id
	text = "Схрон Шухарта с вакциной"
	level.map_add_object_spot_ser(sobj_id,"find_item_location",text)
end

function start_agrund_virus_timer()
	start_real_timer(1800, "timer_actions.agrund_virus_timer_action")
end


function spawn_agr_nii_candles_box()
if db.actor:dont_has_info("agr_body9_info1") then
	db.actor:give_info_portion ("agr_body9_info1")
end
end

function spawn_agr_nii_candles_box1()
	alife():create("agr_nii_candles_box", vector():set (-164.35,-0.20,-226.26), 72551, 554) -- за гаражами
end


function spawn_agr_nii_lift_buttons()
alife():create("agr_nii_lift_button", vector():set (-122.86,1.10,-201.99), 116720, 623)
alife():create("agr_nii_lift_button", vector():set (-122.87,6.10,-201.99), 117449, 622)
alife():create("agr_nii_lift_button", vector():set (-122.86,11.10,-201.99), 116722, 624)
alife():create("agr_nii_lift_button", vector():set (-122.83,16.10,-201.99), 117451, 642)
end

function agr_nii_ecolog_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "wpn_colt_python", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_357_hp_mag", "in")
end

function spawn_agr_redrik_ecolog_shron()
alife():create("redrik_ecolog_shron", vector():set (-125.59,15.04,32.99), 115531, 527)
end
------------------------------------------------------------------------------------------------------------------------------------------------------------------


function have_scient_colba1(stalker, player)
	return  db.actor:object("capsula_alpha") ~= nil 
end

function colba1out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "capsula_alpha", "out")
end

function colba1reward1(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 30000, "in")
end



function have_scient_colba2(stalker, player)
	return  db.actor:object("capsula_beta") ~= nil 
end

function colba2out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "capsula_beta", "out")
end

function colba2reward1(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 35000, "in")
end

function colba2reward2(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
end

-----------------------------------------------------------------------------------------------------------------------------------------------------------------

function have_vodka(stalker, player)
    return db.actor:object("vodka") ~= nil
end

function vodka_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "vodka", "out")
end


function esc_musorka_tree_art_spawn()
alife():create("af_electro_nut_dummy", vector():set (-241.91,-3.54,-40.81), 20185, 67)
end

function money40000out(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 40000, "out")
end

function sanya_planshet_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "esc_btr_planshet", "in")
end

function have_electro_nut(stalker, player)
	return db.actor:object("af_electro_nut") ~= nil
end

function have40000money(stalker, player)
	return db.actor:money() >= 40000
end

function sanya_planshet_items_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
end

function electro_nut_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_electro_nut", "out")
end


function mark_darkvalley_evacuation_place()
   local obj = alife():story_object(8384)
   local obj_id = obj.id
   if obj_id then
   text = "Место эвакуации"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
	news_manager.send_tip(db.actor, "mark_darkvalley_evacuation_place_tip", nil)
end

function spawn_agr_camerer_car_box()
alife():create("agr_camerer_car_box", vector():set (-90.37,12.35,-107.55), 150090, 605)
end

function spawn_agr_camerer_box()
alife():create("camerer_box", vector():set (-175.73,0.01,-190.99), 60963, 666)
alife():create("camerer_box_guardian", vector():set (-175.73,0.01,-190.99), 60963, 666)
alife():create("camerer_box_guardian", vector():set (-175.73,0.01,-190.99), 60963, 666)
alife():create("camerer_box_guardian", vector():set (-175.73,0.01,-190.99), 60963, 666)
alife():create("agr_camerer_key", vector():set (-175.88,0.55,-133.25), 60348, 665)
end

function mark_garb_colonna_zone()
   local obj = alife():story_object(8530)
   local obj_id = obj.id
   if obj_id then
   text = "Автоколонна эвакуации"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
end

-- "Смерть-лампа" --------------------------------------------------------------------------------------------------------------------

function have_ochkaric_pda(stalker, player)
	return db.actor:object("pda_ochkaric") ~= nil
end

function spawn_ochkaric_shron()
alife():create("ochkaric_shron", vector():set (84.28,16.32,22.65), 218994, 294)
end

function ochkaric_pda_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "pda_ochkaric", "out")
end

function garb_heap_green_portion_sign()
	news_manager.send_tip(db.actor, "green_portion", nil, "doll", 3000, nil)
end

function garb_heap_blue_portion_sign()
	news_manager.send_tip(db.actor, "blue_portion", nil, "doll", 3000, nil)
end

function garb_heap_red_portion_sign()
	news_manager.send_tip(db.actor, "red_portion", nil, "doll", 3000, nil)
end

function mark_deathlamp()
   local obj = alife():story_object(8438)
   local obj_id = obj.id
   if obj_id then
   text = "Смерть-лампа"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
end

function have_deathlamp(stalker, player)
	return db.actor:object("item_deathlamp") ~= nil
end

function deathlamp_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "item_deathlamp", "out")
end

function army_receiver_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "army_receiver", "in")
end

function karma_low()
local karma = starvation.get_karma()
	if karma<0.5 then
		return true
	else
		return false
	end
end

function karma_high()
local karma = starvation.get_karma()
	if karma>=0.5 then
		return true
	else
		return false
	end
end

function hue_deathlamp_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 1000000, "in")
end

function mark_esc_army_drop_zone()
   local obj = alife():story_object(8439)
   local obj_id = obj.id
   if obj_id then
   text = "Место вызова военного вертолета"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
   end
end
----------------------------------------------------------------------------------------------------------------------

function mark_chickenblind_zone()
   local obj = alife():story_object(8442)
   local obj_id = obj.id
	text = "Куриная слепота"
	level.map_add_object_spot_ser(obj_id,"green_location",text)
end















function dollhelp_tip1()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip1", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip2()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip2", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip3()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip3", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip4()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip4", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip5()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip5", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip6()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip6", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip7()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip7", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip8()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip8", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip9()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip9", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip10()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip10", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip11()
	end
end

function dollhelp_tip11()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip11", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip10()
	end
end

function dollhelp_tip12()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip12", nil, "doll", 12000, nil)
		soundtrack.wonderdoll_sucess_tip42()
	end
end

function dollhelp_tip13()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip13", nil, "doll", 12000, nil)
		soundtrack.wonderdoll_sucess_tip8()
	end
end

function dollhelp_tip15()
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_help_tip15", nil, "doll", 12000, nil)
		soundtrack.wonderdoll_sucess_tip34()
	end
end

-- Излом-оборотень ----------------------------------------------------------------------------------------

function spawn_dar_izlom_werwolf()
local sim = alife()
local sobj = alife():create("dar_izlom_werwolf", vector():set (142.83,0.45,-201.11), 341172, 926)
sim_assign_story_id(sobj.id, story_ids.dar_izlom_werwolf)
end

function af_uley_have(stalker, player)
    return db.actor:object("af_hive") ~= nil
end

function anomal_radio_have(stalker, player)
    return db.actor:object("anomal_radio") ~= nil
end

function izlom_drugs_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "izlom_drugs", "in")
end

function spawn_af_hive()
alife():create("af_hive", vector():set (132.71,4.31,-180.89), 331003, 926)
end

function izlom_art_random1()
rnd = math.random(1, 3)
if rnd == 1 then 
amk.spawn_item_in_inv("af_scale")
news_manager.send_tip(db.actor, "af_scale_obtained", nil)
end
if rnd == 2 then 
amk.spawn_item_in_inv("af_roll")
news_manager.send_tip(db.actor, "af_roll_obtained", nil)
end
if rnd == 3 then 
amk.spawn_item_in_inv("af_steel_nut")
amk.spawn_item_in_inv("af_steel_nut")
news_manager.send_tip(db.actor, "af_steel_nut_obtained", nil)
end
end

function izlom_art_random2()
rnd = math.random(1, 3)
if rnd == 1 then 
amk.spawn_item_in_inv("af_frog")
news_manager.send_tip(db.actor, "af_frog_obtained", nil)
end
if rnd == 2 then 
amk.spawn_item_in_inv("af_glass")
news_manager.send_tip(db.actor, "af_glass_obtained", nil)
end
if rnd == 3 then 
amk.spawn_item_in_inv("af_spiral")
news_manager.send_tip(db.actor, "af_spiral_obtained", nil)
end
end

function izlom_art_random3()
rnd = math.random(1, 3)
if rnd == 1 then 
amk.spawn_item_in_inv("af_snail")
news_manager.send_tip(db.actor, "af_snail_obtained", nil)
end
if rnd == 2 then 
amk.spawn_item_in_inv("af_chestnut")
news_manager.send_tip(db.actor, "af_chestnut_obtained", nil)
end
if rnd == 3 then 
amk.spawn_item_in_inv("af_coal")
news_manager.send_tip(db.actor, "af_coal_obtained", nil)
end
end

function izlom_art_random4()
rnd = math.random(1, 3)
if rnd == 1 then 
amk.spawn_item_in_inv("af_roll")
news_manager.send_tip(db.actor, "af_roll_obtained", nil)
end
if rnd == 2 then 
amk.spawn_item_in_inv("af_glass")
news_manager.send_tip(db.actor, "af_glass_obtained", nil)
end
if rnd == 3 then 
amk.spawn_item_in_inv("af_coal")
amk.spawn_item_in_inv("af_coal")
news_manager.send_tip(db.actor, "af_coal_obtained", nil)
news_manager.send_tip(db.actor, "af_coal_obtained", nil)
end
end

function spawn_arts_in_werwolf()
	    local obj = level_object_by_sid(8360)
	    local pos = obj:position()
alife():create("af_crown", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
alife():create("af_mushroom", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
alife():create("af_lens", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
alife():create("af_snail", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
alife():create("af_cristallic", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
alife():create("af_hive", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
end


function spawn_dar_build_agent_bags()
alife():create("dar_build_agent_bag1", vector():set (46.90,1.02,-57.76), 233715, 1083)
-- alife():create("dar_build_agent_bag2", vector():set (41.52,5.44,-83.64), 225221, 1100)

-- коробки хедхантеров. Кордон:
alife():create("headhunters_shron", vector():set (-135.08,-11.45,-126.77), 117633, 44)
alife():create("headhunters_shron", vector():set (-1.45,-6.97,-51.24), 272400, 111)
alife():create("headhunters_shron", vector():set (-22.82,7.71,68.24), 254787, 88)
alife():create("headhunters_shron", vector():set (277.49,13.50,6.53), 549056, 139)
alife():create("headhunters_shron", vector():set (129.25,1.59,366.63), 430954, 229)
alife():create("headhunters_shron", vector():set (7.57,16.35,681.30), 285030, 209)
-- Свалка:
alife():create("headhunters_shron", vector():set (64.86,-0.05,-294.23), 233754, 253)
alife():create("headhunters_shron", vector():set (72.03,0.30,-151.49), 242846, 289)
alife():create("headhunters_shron", vector():set (-75.15,23.88,-108.81), 195832, 290)
alife():create("headhunters_shron", vector():set (-56.98,4.33,-28.68), 134730, 322)
alife():create("headhunters_shron", vector():set (112.98,2.30,72.00), 276619, 371)
alife():create("headhunters_shron", vector():set (85.42,-1.74,178.34), 253818, 363)
alife():create("headhunters_shron", vector():set (-181.85,0.52,26.29), 40391, 315)
--Агро:
alife():create("headhunters_shron", vector():set (31.99,-0.00,3.01), 270462, 464)
alife():create("headhunters_shron", vector():set (-52.54,-0.00,52.40), 188968, 680)
alife():create("headhunters_shron", vector():set (9.02,14.69,146.24), 251586, 516)
alife():create("headhunters_shron", vector():set (123.89,7.44,141.13), 355611, 578)
alife():create("headhunters_shron", vector():set (-56.46,3.76,-100.28), 185266, 542)
alife():create("headhunters_shron", vector():set (-117.56,-0.00,-144.47), 122369, 563)
alife():create("headhunters_shron", vector():set (-179.08,-0.00,-219.49), 57394, 555)
alife():create("headhunters_shron", vector():set (-163.03,1.83,70.26), 80022, 532)
-- Долина:
alife():create("headhunters_shron", vector():set (-4.25,5.61,-111.97), 168389, 822)
alife():create("headhunters_shron", vector():set (-138.70,0.32,-199.50), 22479, 860)
alife():create("headhunters_shron", vector():set (5.73,-0.59,-346.08), 181119, 841)
alife():create("headhunters_shron", vector():set (112.78,4.77,-398.64), 309019, 942)
alife():create("headhunters_shron", vector():set (-156.17,1.31,-513.18), 9452, 835)
alife():create("headhunters_shron", vector():set (132.05,3.58,-177.82), 329641, 926)
alife():create("headhunters_shron", vector():set (121.73,0.11,-19.36), 318902, 980)
alife():create("headhunters_shron", vector():set (58.78,-0.04,44.75), 251820, 906)
-- Бар:
alife():create("headhunters_shron", vector():set (247.98,2.71,-142.00), 63337, 1280)
alife():create("headhunters_shron", vector():set (212.24,-1.16,-22.55), 52213, 1264)
end


-- После возвращения из Долины: --------------------------------------------------------------------------------

function release_garb_company()
release_garb_hunter()
release_garb_andrey()
release_garb_soldier()
end

function spawn_reketirs_zapiska()
alife():create("garb_reketirs_zapiska", vector():set (45.02,0.91,243.73), 218601, 359)
end

function release_garb_hunter()
local obj = alife():story_object(8057)
  if obj then
   alife():release(obj , true)
  end
end 

function release_garb_andrey()
local obj = alife():story_object(8224)
  if obj then
   alife():release(obj , true)
  end
end 

function release_garb_soldier()
local obj = alife():story_object(8225)
  if obj then
   alife():release(obj , true)
  end
end 

function give_af_zuda(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_zuda", "in")
end

function have_reketirs_zapiska(stalker, player)
	return db.actor:object("reketirs_zapiska") ~= nil
end

function reketirs_zuda_ready_to_use_think()
local st = get_hud():GetCustomStatic("reketirs_zuda_ready_to_use_think") or get_hud():AddCustomStatic("reketirs_zuda_ready_to_use_think",true)
st.m_endTime = time_global()/1000 + 5
end

function spawn_reketirs_assistant1()
alife():create("reketirs_assistant", vector():set (137.28,-3.19,267.26), 296137, 367)
end

function spawn_reketirs_assistant2()
alife():create("reketirs_assistant", vector():set (172.25,-0.92,250.17), 324074, 368)
end

function mark_garb_hostage()
   local obj = alife():story_object(8493)
   local obj_id = obj.id
	text = "Пленный разведчик"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
end

function give_reductor(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "btr_reduktor", "out")
end

function spawn_exit_to_bar()
ogsm_freeplay.create_level_changer(8980, vector():set(-15.13,1.15,290.03), 163658, 258,
			86991,
			1289,
			vector():set( 386.98,10.11,-434.53 ),
			vector():set(    0.0 ,  0.0   , -1.0 ),
			"l05_bar",
			2)
end


-- Мы в Баре: ------------------------------------------------------------------------------------------------------------

function spawn_bar_roadbus_magnitofon()
	local sim = alife()
 local sobj = sim:create("bar_roadbus_magnitofon1", vector():set (394.15,13.52,-347.68), 90067, 1290)
 sim_assign_story_id(sobj.id, story_ids.roadbus_magnitofon)
alife():create("bar_roadbus_magnitofon2", vector():set (394.15,13.52,-347.68), 90067, 1290)
end

function spawn_bar_road_raciya()
	local sim = alife()
 local sobj = sim:create("bar_road_raciya", vector():set (307.46,3.58,-145.36), 71893, 1171)
 sim_assign_story_id(sobj.id, story_ids.bar_road_raciya)
end

function bar_raciya_connect_off()
local st = get_hud():GetCustomStatic("bar_raciya_connect_off_think") or get_hud():AddCustomStatic("bar_raciya_connect_off_think",true)
st.m_endTime = time_global()/1000 + 3
end

function spawn_af_top_zone()
	local sobj = alife():create('af_top_zone', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id())
	--[[local t = m_net_utils.get_restrictor_data(sobj)
	t.shapes = {}
	local shape1 = {}
	shape1.shtype = 0
	shape1.center = vector():set(0,0,0)
	shape1.radius = 5
	t.restrictor_type = 3
	table.insert(t.shapes,shape1)
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.restrictor_type = restrictor_type.RestrictorTypeNone -- тип 3
		data.shapes:addSphere(5)
		pk:set(data)
	end
end


function spawn_bar_medicin_boxes()
--alife():create("bar_medicin_box1", vector():set (194.78,0.09,77.99), 45458, 1186)
end

function bar_karlik_meet_dolltip()
	if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "wonderdoll_karlik_tip1", nil, "doll", 5000, nil)
	soundtrack.wonderdoll_sucess_tip8()
	end
end

function bar_bunkerdoor_key_have(stalker, player)
	return db.actor:object("bar_bunkerdoor_key") ~= nil
end

function mark_bar_bunkerdoor()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^bar_bunkerdoor_trigger1") then
    amk.add_spot_on_map(obj.id,"alife_presentation_smart_target","Путь к подземному складу")
	news_manager.send_tip(db.actor, "bar_bunkerdoor_marked_tip", nil, "default", 7000, nil)
   end
  end
 end
end

function bar_sklad_seif_key_have(stalker, player)
	return db.actor:object("bar_sklad_seif_key") ~= nil
end

function cheburaska_have(stalker, player)
	return db.actor:object("cheburashka") ~= nil
end

function bar_vakcine_ballon_have(stalker, player)
	return db.actor:object("bar_vakcine_ballon") ~= nil
end



function money50000out(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 500000, "out")
end

function money5000out(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 5000, "out")
end

function have50000money(stalker, player)
	return db.actor:money() >= 500000
end

function have5000money(stalker, player)
	return db.actor:money() >= 5000
end

function bar_vakcine_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "bar_vakcine_ballon", "out")
end

function spawn_bar_arena_gigant_point1()
local sim = alife()
 local sobj = sim:create("bar_arena_gigant_point1", vector():set (151.78,-17.76,114.51), 40485, 1205)
 sim_assign_story_id(sobj.id, story_ids.arena_gigant_zone1)
end

function set_bar_abdul_companion()
	local npc = level_object_by_sid(8503)
	if npc:alive() then
		dialogs.companion_start_following(npc, db.actor)
	end
end

function spawn_bar_zombies()
alife():create("bar_zombie1", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie2", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie3", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie4", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie5", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie6", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie7", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)
alife():create("bar_zombie8", vector():set (176.619995117188,0.0900000035762787,50.0400009155273), 44454, 1178)

alife():create("bar_zombie5", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie6", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie7", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie8", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie9", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie10", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie11", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie12", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)

alife():create("bar_zombie5", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie6", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie7", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie8", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie9", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie10", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie11", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
alife():create("bar_zombie12", vector():set (242.279998779297,2.72000002861023,-90.9499969482422), 61889, 1272)
end

function spawn_bar_zomb_komendant()
local sim = alife()
 local sobj = sim:create("bar_zombie_boss", vector():set (116.28,-1.70,83.97), 33971, 1216)
 sim_assign_story_id(sobj.id, story_ids.bar_zombie_boss)
end

function has_bar_komendant_key(stalker, player)
	return db.actor:object("bar_komendant_key") ~= nil
end

function remove_bar_minefield_board()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^bar_minefield_danger_board") then
		sim:release(sobj,true)
		end
	end
end

function remove_bar_karlik()
local obj = alife():story_object(8516)
  if obj then
   alife():release(obj , true)
  end
end

function have_big_condensator(stalker, player)
	return db.actor:object("kondensator_big") ~= nil
end

function spawn_bar_ventil1()
local sim = alife()
 local sobj = sim:create("bar_ventil1", vector():set (131.99,3.61,100.77), 36275, 1249)
 sim_assign_story_id(sobj.id, story_ids.bar_ventil1)
end

function spawn_bar_ventil2()
local sim = alife()
 local sobj = sim:create("bar_ventil2", vector():set (128.33,3.61,100.96), 35813, 1249)
 sim_assign_story_id(sobj.id, story_ids.bar_ventil2)
end

function spawn_bar_ventil3()
local sim = alife()
 local sobj = sim:create("bar_ventil3", vector():set (129.57,7.80,86.00), 35906, 1216)
 sim_assign_story_id(sobj.id, story_ids.bar_ventil3)
end

function bar_tower_top_art_spawn()
alife():create("af_pumice_static", vector():set (153.29,23.25,110.67), 40835, 1209)
		if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "doll_af_pumice_help_tip", nil, "doll", 10000, nil)
		soundtrack.wonderdoll_sucess_tip34()
		xr_effects.give_dolltip1()
		end
end

function start_bar_abdul_rest_timer()
start_real_timer(5*60, "timer_actions.bar_abdul_rest_off")
end

-- Шизеем на Ростке: ---------------------------------------------------------

function spawn_ros_deadzombies()
spawn_ros_deadzomb1()
spawn_ros_deadzomb2()
spawn_ros_deadzomb3()
spawn_ros_deadzomb4()
spawn_ros_deadzomb5()
spawn_ros_deadzomb6()
spawn_ros_deadzomb7()
spawn_ros_deadzomb8()
spawn_ros_deadzomb9()
spawn_ros_deadzomb10()
spawn_ros_deadzomb11()
spawn_ros_deadzomb12()
spawn_ros_deadzomb13()
spawn_ros_deadzomb14()
spawn_ros_deadzomb15()
spawn_ros_deadzomb16()
spawn_ros_deadzomb17()
spawn_ros_deadzomb18()
spawn_ros_deadzomb19()
spawn_ros_deadzomb20()
spawn_ros_deadzomb21()
spawn_ros_deadzomb22()
spawn_ros_deadzomb23()
spawn_ros_deadzomb24()
spawn_ros_deadzomb25()
spawn_ros_deadzomb26()
spawn_ros_deadzomb27()
spawn_ros_deadzomb28()
spawn_ros_deadzomb29()
spawn_ros_deadzomb30()
spawn_ros_deadzomb31()
spawn_ros_deadzomb32()
spawn_ros_deadzomb33()
spawn_ros_deadzomb34()
spawn_ros_deadzomb35()
spawn_ros_deadzomb36()
spawn_ros_deadzomb37()
spawn_ros_deadzomb38()
spawn_ros_deadzomb39()
spawn_ros_deadzomb40()
spawn_ros_deadzomb41()
spawn_ros_deadzomb42()
spawn_ros_deadzomb43()
spawn_ros_deadzomb44()
spawn_ros_deadzomb45()
spawn_ros_deadzomb46()
spawn_ros_deadzomb47()
spawn_ros_deadzomb48()
spawn_ros_deadzomb49()
spawn_ros_deadzomb50()
end


function spawn_ros_deadzomb1()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-97.04,0.09,147.75), 45448, 1422)
 sobj:on_death()
end

function spawn_ros_deadzomb2()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-106.63,0.09,139.77), 44465, 1311)
 sobj:on_death()
end

function spawn_ros_deadzomb3()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-119.02,0.09,146.28), 42900, 1312)
 sobj:on_death()
end

function spawn_ros_deadzomb4()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-135.76,-0.02,143.05), 40807, 1313)
 sobj:on_death()
end

function spawn_ros_deadzomb5()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-152.85,-0.00,132.33), 38231, 1319)
 sobj:on_death()
end

function spawn_ros_deadzomb6()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-168.56,-0.01,142.31), 33124, 1314)
 sobj:on_death()
end

function spawn_ros_deadzomb7()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-168.56,-0.01,142.31), 33124, 1314)
 sobj:on_death()
end

function spawn_ros_deadzomb8()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-115.65,0.99,156.33), 43316, 1317)
 sobj:on_death()
end

function spawn_ros_deadzomb9()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-155.50,-0.00,148.97), 37447, 1327)
 sobj:on_death()
end

function spawn_ros_deadzomb10()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-179.17,-0.00,113.02), 30830, 1324)
 sobj:on_death()
end

function spawn_ros_deadzomb11()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-190.35,-0.03,108.91), 28719, 1368)
 sobj:on_death()
end

function spawn_ros_deadzomb12()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-211.85,1.39,120.10), 24118, 1369)
 sobj:on_death()
end

function spawn_ros_deadzomb13()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-217.28,1.40,106.19), 22817, 1370)
 sobj:on_death()
end

function spawn_ros_deadzomb14()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-227.43,1.39,95.97), 19268, 1371)
 sobj:on_death()
end

function spawn_ros_deadzomb15()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-214.61,0.79,82.92), 23389, 1380)
 sobj:on_death()
end

function spawn_ros_deadzomb16()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-198.41,-0.10,91.72), 27169, 1373)
 sobj:on_death()
end

function spawn_ros_deadzomb17()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-197.67,0.00,77.16), 27284, 1372)
 sobj:on_death()
end

function spawn_ros_deadzomb18()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-219.63,-1.00,67.63), 22011, 1374)
 sobj:on_death()
end

function spawn_ros_deadzomb19()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-215.72,-0.00,51.82), 23165, 1385)
 sobj:on_death()
end

function spawn_ros_deadzomb20()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-233.35,-0.00,54.28), 16968, 1387)
 sobj:on_death()
end

function spawn_ros_deadzomb21()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-231.55,-0.00,41.63), 17478, 1386)
 sobj:on_death()
end

function spawn_ros_deadzomb22()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-244.90,-0.00,32.90), 11548, 1423)
 sobj:on_death()
end

function spawn_ros_deadzomb23()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-261.66,-0.00,53.99), 6167, 1392)
 sobj:on_death()
end

function spawn_ros_deadzomb24()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-250.84,0.09,63.99), 9543, 1383)
 sobj:on_death()
end

function spawn_ros_deadzomb25()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-263.92,-0.00,72.51), 5664, 1410)
 sobj:on_death()
end

function spawn_ros_deadzomb26()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-275.38,-0.00,59.58), 2854, 1410)
 sobj:on_death()
end

function spawn_ros_deadzomb27()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-276.94,-0.15,96.32), 2326, 1411)
 sobj:on_death()
end

function spawn_ros_deadzomb28()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-259.39,0.00,126.31), 6782, 1357)
 sobj:on_death()
end

function spawn_ros_deadzomb29()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-276.65,-4.52,118.86), 2547, 1351)
 sobj:on_death()
end

function spawn_ros_deadzomb30()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-283.22,-0.00,138.10), 1094, 1349)
 sobj:on_death()
end

function spawn_ros_deadzomb31()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-273.16,-0.00,150.25), 3482, 1349)
 sobj:on_death()
end

function spawn_ros_deadzomb32()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-260.97,-0.00,161.28), 6443, 1344)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb32)
 sobj:on_death()
end

function spawn_ros_deadzomb33()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-241.40,-0.00,156.42), 13338, 1345)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb33)
 sobj:on_death()
end

function spawn_ros_deadzomb34()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-215.30,-0.00,163.74), 23251, 1335)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb34)
 sobj:on_death()
end

function spawn_ros_deadzomb35()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-187.64,-0.00,170.39), 29300, 1331)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb35)
 sobj:on_death()
end

function spawn_ros_deadzomb36()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-204.41,-0.00,150.66), 25933, 1363)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb36)
 sobj:on_death()
end

function spawn_ros_deadzomb37()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-202.67,0.09,185.26), 26262, 1333)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb37)
 sobj:on_death()
end

function spawn_ros_deadzomb38()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-171.59,-0.00,172.84), 32475, 1328)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb38)
 sobj:on_death()
end

function spawn_ros_deadzomb39()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-232.38,-0.00,126.66), 17303, 1355)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb39)
 sobj:on_death()
end

function spawn_ros_deadzomb40()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-265.77,-0.00,140.43), 5196, 1356)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb40)
 sobj:on_death()
end

function spawn_ros_deadzomb41()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-171.96,-0.01,94.59), 32234, 1322)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb41)
 sobj:on_death()
end

function spawn_ros_deadzomb42()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-161.36,-0.00,108.54), 35339, 1321)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb42)
 sobj:on_death()
end

function spawn_ros_deadzomb43()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-126.06,-0.12,134.37), 41996, 1312)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb43)
 sobj:on_death()
end

function spawn_ros_deadzomb44()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-152.18,0.09,167.22), 38444, 1328)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb44)
 sobj:on_death()
end

function spawn_ros_deadzomb45()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-230.80,0.10,190.79), 17953, 1334)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb45)
 sobj:on_death()
end

function spawn_ros_deadzomb46()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-253.17,0.79,171.10), 8636, 1342)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb46)
 sobj:on_death()
end

function spawn_ros_deadzomb47()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-283.59,-0.00,159.65), 1116, 1343)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb47)
 sobj:on_death()
end

function spawn_ros_deadzomb48()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-270.18,0.04,125.44), 4161, 1356)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb48)
 sobj:on_death()
end

function spawn_ros_deadzomb49()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-263.65,-0.15,98.71), 5695, 1378)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb49)
 sobj:on_death()
end

function spawn_ros_deadzomb50()
 local sim = alife()
 local sobj = sim:create("ros_deadzomb", vector():set (-245.84,-0.00,60.21), 11296, 1383)
 --sim_assign_story_id( sobj.id, story_ids.ros_deadzomb50)
 sobj:on_death()
end



function spawn_ros_scelets()
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("^ros_deadzomb") then
	local pos = sobj.position
	local lv = sobj.m_level_vertex_id
	local gv = sobj.m_game_vertex_id
    alife():create("ros_sceleton", vector():set(pos.x, pos.y, pos.z), lv, gv)
   end
  end
 end


function del_ros_zombies()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^ros_deadzomb") then
		sim:release(sobj,true)
		end
	end
end



function spawn_ros_hunter_diary2()
local obj = level_object_by_sid(8604)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	local sobj = alife():create("ros_hunter_diary2", vector():set (-255.91,-5.83,86.87), 7127, 1359)
	local sobj_id = sobj.id
	text = "Часть дневника разведчика"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
	news_manager.send_tip(db.actor, "ros_hunters_tunnel_tip", nil)
	addon.actor_disable_inventory()
end
end

function spawn_ros_hunter_diary3()
	local sobj = alife():create("ros_hunter_diary3", vector():set (-134.25,-0.00,124.83), 43371, 1315)
	local sobj_id = sobj.id
	text = "Часть дневника разведчика"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_ros_hunter_diary4()
	local sobj = alife():create("ros_hunter_diary4", vector():set (-197.87,1.05,127.65), 27469, 1326)
	local sobj_id = sobj.id
	text = "Часть дневника разведчика"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_ros_hunter_diary5()
	local sobj = alife():create("ros_hunter_diary5", vector():set (-146.84,1.46,146.12), 39817, 1327)
	local sobj_id = sobj.id
	text = "Часть дневника разведчика"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function ros_galery_key_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ros_galery_key", "in")
end

function ros_garage_key_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ros_garage_key", "in")
end

function spawn_ros_hunters_shron()
	local sobj = alife():create("ros_hunters_shron", vector():set (-256.40,0.17,91.84), 8120, 1377)
	local sobj_id = sobj.id
	text = "Общак разведчиков"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_ros_hunter2diary2()
	local sobj = alife():create("ros_hunter_diary6", vector():set (-214.591,1.45,126.11), 23409, 1369)
	local sobj_id = sobj.id
	text = "Часть дневника разведчика"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end


function mark_ros_deadhunter()
   local obj = alife():story_object(8604)
   local obj_id = obj.id
   if obj_id then
   if not text then text = "Разведчик" end
	level.map_add_object_spot_ser(obj_id,"blue_location",text)
   end
end

function montirovka_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "montirovka", "in")
end

function spawn_ros_house_door_trigger()
	local sobj = alife():create("ros_house_door_trigger1", vector():set (-207.00,2.80,98.96), 25421, 1373)
	local sobj_id = sobj.id
	text = "Вход в администрацию"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
	news_manager.send_tip(db.actor, "ros_house_door_trigger1_tip", nil)
	alife():create("ros_house_door_trigger2", vector():set (-207.80,3.10,99.41), 20847, 1371)
end

function spawn_ros_hunter_shron2()
	local sobj = alife():create("ros_hunter_shron2", vector():set (-235.70,8.37,177.65), 15942, 1337)
	local sobj_id = sobj.id
	text = "Тайник Григория"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
end


function has_ros_hunters_items(stalker, player)
	return db.actor:object("ros_hunters_mayak") ~= nil 
end

function ros_hunters_mayak_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ros_hunters_mayak", "out")
	dialogs.relocate_item_section(second_speaker, "lenin_bust", "out")
	dialogs.relocate_item_section(second_speaker, "ros_gate_key", "in")
	db.actor:give_info_portion ("ros_hunter_yan_box_info")
end

function mark_ros_hunter_yan_box()
   local obj = alife():story_object(8610)
   local obj_id = obj.id
   if obj_id then
   if not text then text = "Ящик разведчиков с Ростка" end
	level.map_add_object_spot_ser(obj_id,"find_item_location",text)
	news_manager.send_tip(db.actor, "ros_hunter_yan_box_tip", nil)
   end
end

function have_otrezvin(stalker, player)
	return db.actor:object("otrezvin") ~= nil
end

function otrezvin_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "otrezvin", "out")
end

function has_ros_lenin_bust(stalker, player)
	return db.actor:object("lenin_bust") ~= nil
end






----------------------------------------------------------------------------------------------------------------------------------

function have_af_chamelleon(stalker, player)
    return db.actor:object("chamelleon") ~= nil
end
----------------------------------------------------------------------------------------------------------------------------------

function spawn_dar_fabrik_burers()
local sim = alife()
local sobj = alife():create("dar_fabrik_burer_boss", vector():set (185.67,0.13,-258.59), 385056, 974)
sim_assign_story_id(sobj.id, story_ids.dar_fabrik_burer_boss)
alife():create("dar_fabrik_burer1", vector():set (180.49,0.09,-267.88), 381075, 974)
alife():create("dar_fabrik_burer2", vector():set (182.62,0.11,-271.06), 382972, 972)
alife():create("dar_fabrik_burer3", vector():set (185.40,0.13,-269.26), 385040, 972)
end

function dar_fabrik_burers_dead()
	if has_alife_info("dar_fabrik_burerboss_dead") and
		has_alife_info("dar_fabrik_burer1_dead") and
		has_alife_info("dar_fabrik_burer2_dead") and
		has_alife_info("dar_fabrik_burer3_dead") then
		return true
	else
		return false
	end
end

function dar_subj_burers_task_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_bur", "in")
end


function ruined_docs_have(stalker, player)
	return db.actor:object("x18_ruined_dokuments") ~= nil
end

function dar_subj_documents_out()
	amk.remove_item(db.actor:object("x18_ruined_dokuments"))
end

function dar_subj_documents_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "rad_mashroom", "in")
end









function mark_mob()
   local obj = alife():story_object(8155)
   local obj_id = obj.id
   if obj_id then
   if not text then text = "Моб" end
	level.map_add_object_spot_ser(obj_id,"blue_location",text)
   end
end


function actor_disable_inventory()
	-- закрываем верхнее окно:
	local wnd = level.main_input_receiver()
	if wnd then
		wnd:GetHolder():start_stop_menu(wnd, true)
	end
end



-- спавним рестрикторы -------------------------------------------------------------------------------------------------------------------

function spawn_restrictor_box (pos,lv,gv,logic)
	-- создаем серверный объект
	local sobj = alife():create("space",pos,lv,gv)
	-- парсим его нетпакет
	--[[local t = m_net_utils.get_restrictor_data(sobj)
	-- прописываем логику
	t.custom_data = logic
	-- создаем шейпы
	t.shapes = {}
	-- задаем параметры для шейпа 1
	local shape1 = {}
	shape1.shtype = 1 -- параллелепипед
	shape1.offset = vector():set(0,0,0) -- смещение в пространстве относительно позиции спавна
	shape1.v1 = vector():set(1,0,0) -- позиции вершин относительно offset
	shape1.v2 = vector():set(0,1,0)
	shape1.v3 = vector():set(0,0,1)
	-- добавляем шейп в таблицу шейпов
	table.insert(t.shapes,shape1)
	-- применяем изменения к нетпакету
	m_net_utils.set_restrictor_data(t,sobj)]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.custom_data:setString(logic)
		data.shapes:addBox(vector():set(1,0,0),vector():set(0,1,0),vector():set(0,0,1),vector():set(0,0,0))
		pk:set(data)
	end
end

function spawn_restrictor_sphere (pos,lv,gv,logic,radius)
	-- создаем серверный объект
	local sobj = alife():create("space",pos,lv,gv)
	--[[ парсим его нетпакет
	local t = m_net_utils.get_restrictor_data(sobj)
	-- прописываем логику
	t.custom_data = logic
	-- создаем шейпы
	t.shapes = {}
	-- задаем параметры для шейпа 1
	local shape1 = {}
	shape1.shtype = 0 -- сфера
	shape1.center = vector():set(0,0,0) -- смещение в пространстве относительно позиции спавна
	shape1.radius = radius or 2 -- радиус сферы ( по умолчанию 2 метра)
	-- добавляем шейп в таблицу шейпов
	table.insert(t.shapes,shape1)
	-- применяем изменения к нетпакету
	m_net_utils.set_restrictor_data(t,sobj)
	]]
	local pk = get_netpk(sobj)
	if pk:isOk() then
		local data = pk:get()
		data.custom_data:setString(logic)
		data.shapes:addSphere(radius or 2)
		pk:set(data)
	end
end
-- Проверка на стрельбу из любого оружия --------------------------------------------------------------------------------------------
local old_ai_id = 0
local check_ammo = false

function actor_update()
	local ai = db.actor:active_item()
	if ai then
		if ai:id()~=old_ai_id then
			old_ai_id = ai:id()
			if string.find(ai:section(),"^wpn_") and ai:section() ~= "wpn_crossbow" then
				check_ammo = true
				on_change_wpn(ai)
			end
		end
	else
		if old_ai_id~=0 then old_ai_id=0 check_ammo=false end
	end
	if check_ammo then
		local curr_ammo = ai:get_ammo_in_magazine()
		if curr_ammo < ammo_old then
			ammo_old = curr_ammo
			if not level.main_input_receiver() then on_actor_shoot() end
		end
	end
end

function on_change_wpn( obj )
	ammo_old = obj:get_ammo_in_magazine()
end

function on_actor_shoot()
-- action
end



-----------------------------------------------------------------------------------------------------------------------------------------------
function quest_spawn()
addon.quest_spawn("pseudodog_v_strong", 1, vector():set(188.42, -7.47, 5.615), 5, 487797, 137)
end



function have_master_art(stalker, player)
    return db.actor:object("master_art") ~= nil
end


function headhunters_robbery()
	rnd = math.random(1, 7)
	if rnd == 1 then 
		amk.spawn_item_in_inv("ammo_psy")
		amk.send_tip("Получены заряды")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 2 then 
		amk.spawn_item_in_inv("mre")
		amk.spawn_item_in_inv("mre")
		amk.send_tip("Получена еда")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 3 then 
		amk.spawn_item_in_inv("antirad")
		amk.spawn_item_in_inv("dix")
		amk.spawn_item_in_inv("medkit")
		amk.send_tip("Получены медикаменты")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 4 then 
		amk.spawn_item_in_inv("grenade_f1")
		amk.spawn_item_in_inv("grenade_f1")
		amk.send_tip("Получены гранаты")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 5 then 
		amk.spawn_item_in_inv("af_ballast")
		amk.send_tip("Получен артефакт")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 6 then 
		amk.spawn_item_in_inv("af_coal")
		amk.send_tip("Получен артефакт")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	elseif rnd == 7 then 
		amk.spawn_item_in_inv("af_glass")
		amk.send_tip("Получен артефакт")
		start_real_timer(60, "timer_actions.strangers_robbery_action")
	end
end









function mark_water_places1()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^vater_place") then
    amk.add_spot_on_map(obj.id,"alife_presentation_monolith","Вода")
   end
  end
 end
end

function mark_water_places2()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^vater_place_kanistra") then
    amk.add_spot_on_map(obj.id,"alife_presentation_monolith","Вода")
    -- return
   end
  end
 end
end




function mark_sleep_places1()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^sleep_place") then
    amk.add_spot_on_map(obj.id,"alife_presentation_ecolog","Отдых")
    -- return
   end
  end
 end
end

function mark_sleep_places2()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^sleep_place_matras") then
    amk.add_spot_on_map(obj.id,"alife_presentation_ecolog","Отдых")
    -- return
   end
  end
 end
end

function mark_anomal_zones()
   local zone1 = alife():story_object(8145)
   local zone2 = alife():story_object(8149)
   local zone3 = alife():story_object(8150)
   local zone4 = alife():story_object(8151)
   local zone5 = alife():story_object(8152)
   local zone6 = alife():story_object(8153)
   -- local zone7 = alife():story_object(8154)
   local zone1_id = zone1.id
   local zone2_id = zone2.id
   local zone3_id = zone3.id
   local zone4_id = zone4.id
   local zone5_id = zone5.id
   local zone6_id = zone6.id
   -- local zone7_id = zone7.id
   if zone1_id then
   text = "Аномальная зона"
	level.map_add_object_spot_ser(zone1_id,"artefact_location",text)
   end
   if zone2_id then
   text = "Аномальная зона"
	level.map_add_object_spot_ser(zone2_id,"artefact_location",text)
   end
   if zone3_id then
   text = "Аномальная зона"
	level.map_add_object_spot_ser(zone3_id,"artefact_location",text)
   end
   if zone4_id then
   text = "Аномальная зона"
	level.map_add_object_spot_ser(zone4_id,"artefact_location",text)
   end
   if zone5_id then
    text = "Аномальная зона"
	 level.map_add_object_spot_ser(zone5_id,"artefact_location",text)
    end
    if zone6_id then
    text = "Аномальная зона"
	 level.map_add_object_spot_ser(zone6_id,"artefact_location",text)
    end
    --  if zone7_id then
   -- text = "Аномальная зона"
	-- level.map_add_object_spot_ser(zone7_id,"artefact_location",text)
   -- end
end




function mark_habar()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^atp_shotgun_shron") then
    amk.add_spot_on_map(obj.id,"alife_presentation_ecolog","Хабар")
    -- return
   end
  end
 end
end





function mark_bobik()
   local obj = alife():story_object(8413)
   if obj then
	level.map_add_object_spot_ser(obj.id,"green_location","Бобик")
   end
end




function is_day()
local time = level.get_time_hours()
return time >= 6 or time < 21
   -- return level.get_time_hours() >= 6 and level.get_time_hours() < 21
end  

function is_night()
local time = level.get_time_hours()
return time >= 21 or time < 6
-- return level.get_time_hours() >= 21 and level.get_time_hours() < 6
end  


-- Первичный спавн агентов по локам: ---------------------------------------------------------------------------

function headhunters_respawn()
-- Кордон:
alife():create("headhunter1", vector():set (27.28,1.19,24.76), 306643, 90)
--alife():create("headhunter2", vector():set (27.28,1.19,24.76), 306643, 90)

-- Свалка:
alife():create("headhunter1", vector():set (124.63,-1.24,177.09), 286162, 374)
--alife():create("headhunter4", vector():set (124.63,-1.24,177.09), 286162, 374)

-- Агро:
alife():create("headhunter3", vector():set (-124.41,1.64,-14.34), 115467, 539)
--alife():create("headhunter2", vector():set (-124.41,1.64,-14.34), 115467, 539)

-- Долина:
alife():create("headhunter1", vector():set (-27.62,0.35,-411.90), 142307, 840)
--alife():create("headhunter3", vector():set (-27.62,0.35,-411.90), 142307, 840)

-- Милитари: -- перенесено на окончание квеста с деревней;
--alife():create("headhunter1", vector():set (-317.29,-13.64,381.82), 29152, 1849)
--alife():create("headhunter4", vector():set (-317.29,-13.64,381.82), 29152, 1849)


-- Янтарь:
--alife():create("headhunter3", vector():set (-81.61,-8.36,-205.13), 10946, 1488)
--alife():create("headhunter4", vector():set (-81.61,-8.36,-205.13), 10946, 1488)

-- Радар:
alife():create("headhunter2", vector():set (72.13,-5.29,-25.01), 34589, 1967)
alife():create("headhunter4", vector():set (72.13,-5.29,-25.01), 34589, 1967)

-- Окраина:
alife():create("headhunter1", vector():set (-324.74,-6.31,348.77), 437638, 2843)
--alife():create("headhunter2", vector():set (-324.74,-6.31,348.77), 437638, 2843)

--alife():create("headhunter4", vector():set (-506.14,18.13,104.85), 168877, 2817)
--alife():create("headhunter2", vector():set (-506.14,18.13,104.85), 168877, 2817)

--alife():create("headhunter3", vector():set (-175.27,2.46,108.72), 670290, 2885)
alife():create("headhunter2", vector():set (-175.27,2.46,108.72), 670290, 2885)

alife():create("headhunter1", vector():set (-192.48,7.28,-298.99), 642326, 2883)

bridge_killer2delete()
bridge_killer3delete()
end

function mil_headhunters_respawn()
alife():create("headhunter1", vector():set (-317.29,-13.64,381.82), 29152, 1849)
alife():create("headhunter4", vector():set (-317.29,-13.64,381.82), 29152, 1849)
end


---------------------------------------------------------------------------------------------------------------------
function bridge_killer2delete()
local obj = alife():story_object(8180)
	if obj and obj ~= nil then
	alife():release(obj , true)
	end
end

function bridge_killer3delete()
local obj = alife():story_object(8181)
	if obj and obj ~= nil then
	alife():release(obj , true)
	end
end

function have_btr_reduktor(stalker, player)
    return db.actor:object("btr_reduktor") ~= nil
end

function dont_has_btr_reduktor(stalker, player)
    return db.actor:object("btr_reduktor") == nil
end


--------------------------------------------------------------------------------------------------------------------


function spawn_script_mob()
	local obj = alife():create("script_mob", vector():set (86.80,2.11,414.48), 383184, 197)
	amk.add_spot_on_map(obj.id, "red_location", "Наш моб")
end


-- Заполнение локаций аномалиями ----------------------------------------------------------------------------------------
function spawn_anoms_on_locations()
ogsm_anomaly.add_anom(predbannik, true)

end
----------------------------------------------------------------------------------



-- Предбанник(окраина) -------------------------------------------------------------------------------------------------------

function mark_predb_hutor_zone()
   local obj = alife():story_object(8620)
   local obj_id = obj.id
   if obj_id then
   text = "Логово контрабандистов"
	level.map_add_object_spot_ser(obj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "mark_predb_hutor_zone_tip", nil, "stalker", 6000, nil)
   end
end

function actor_in_predb_hutor_zone()
	local zone = level_object_by_sid(8642)
	return zone ~= nil and zone:inside(db.actor:position())
end

function have_predb_kontrab_fake_capsula(stalker, player)
    return db.actor:object("fake_capsula_1") ~= nil
end

function predb_kontrab_fake_capsula_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "fake_capsula_1", "out")
end

function predb_kontrab_capsula_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_capsula_1", "in")
	dialogs.relocate_money(second_speaker, 2000, "in")
end

function predb_capsula_dollhelp_timer_start()
start_real_timer(6, "timer_actions.predb_capsula_dollhelp_timer_action")
end

function predb_kontrab_cave_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 10000, "in")
end


function predb_cave_port1delete()
	bind_mteleport.delete_teleports_with_section("predb_to_cave_port")
	addon.script_spawn("predb_cave_tesla1", "predbannik", vector():set(-265.04,17.65,234.63) )
	addon.script_spawn("predb_cave_tesla2", "predbannik", vector():set(-265.04,17.65,234.63) )
	addon.script_spawn("predb_cave_tesla3", "predbannik", vector():set(-265.04,17.65,234.63) )
	addon.script_spawn("predb_cave_tesla4", "predbannik", vector():set(-265.04,17.65,234.63) )
end

function predb_hermit_capsula_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_capsula_1", "in")
	dialogs.relocate_item_section(second_speaker, "af_capsula_1", "in")
	start_real_timer(5*60, "timer_actions.predb_hermit_timer_action")
end

function spawn_hermit_habar()
	local sobj = alife():create("hermit_habar", vector():set (-240.40,40.43,273.05), 570999, 2946)
	local sobj_id = sobj.id
	text = "Хабар Аскета"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end





function predb_cave_capsula_spawn()
local obj = level_object_by_sid(8649)
local pos = obj:position()
alife():create("af_capsula_1", vector():set(pos.x, pos.y, pos.z), obj:level_vertex_id(), obj:game_vertex_id(), obj:id())
end

function hermit_art1exchange(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_capsula_2", "in")
	dialogs.relocate_item_section(second_speaker, "vint", "out")
	db.actor:disable_info_portion("predb_hermit_call")
	db.actor:disable_info_portion("predb_hermit_art1")
	db.actor:disable_info_portion("predb_hermit_art2")
	db.actor:disable_info_portion("predb_hermit_art3")
	start_real_timer(30*60, "timer_actions.predb_hermit_timer_action")
end

function hermit_art2exchange(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_capsula_3", "in")
	dialogs.relocate_item_section(second_speaker, "vint", "out")
	db.actor:disable_info_portion("predb_hermit_call")
	db.actor:disable_info_portion("predb_hermit_art1")
	db.actor:disable_info_portion("predb_hermit_art2")
	db.actor:disable_info_portion("predb_hermit_art3")
	start_real_timer(30*60, "timer_actions.predb_hermit_timer_action")
end

function hermit_art3exchange(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_capsula_4", "in")
	dialogs.relocate_item_section(second_speaker, "vint", "out")
	db.actor:disable_info_portion("predb_hermit_call")
	db.actor:disable_info_portion("predb_hermit_art1")
	db.actor:disable_info_portion("predb_hermit_art2")
	db.actor:disable_info_portion("predb_hermit_art3")
	start_real_timer(30*60, "timer_actions.predb_hermit_timer_action")
end


function mark_village_grass()
   local obj = alife():story_object(8943)
   local obj_id = obj.id
   if obj_id then
   text = "Лекарственное растение"
	level.map_add_object_spot_ser(obj_id,"green_location",text)
   end
end


function spawn_predb_mobs()
	addon.script_spawn("wheel", "predbannik", vector():set(95.78,4.33,-24.21) )
	addon.script_spawn("wheel", "predbannik", vector():set(45.93,4.67,-30.48) )
	addon.script_spawn("wheel", "predbannik", vector():set(18.18,8.92,-74.85) )
	addon.script_spawn("bucket", "predbannik", vector():set(0.18,9.22,-39.81) )
	addon.script_spawn("old_album", "predbannik", vector():set(10.74,9.14,-35.20) )
	addon.script_spawn("avtomobile_tank", "predbannik", vector():set(63.21,4.40,-26.18) )
	addon.script_spawn("af_frog", "predbannik", vector():set(99.92,-21.88,-280.38) )
	
	addon.script_spawn("predb_village_tunnel_smoke1", "predbannik", vector():set(169.21,8.56,-30.40) )
	addon.script_spawn("predb_village_tunnel_smoke2", "predbannik", vector():set(169.21,8.56,-30.40) )
	addon.script_spawn("predb_village_tunnel_smoke3", "predbannik", vector():set(169.21,8.56,-30.40) )
	
	addon.script_spawn("predb_village_children", "predbannik", vector():set(73.81,11.68,73.10) )
	addon.script_spawn("predb_village_kanava_smoke", "predbannik", vector():set(-11.42,8.62,-72.11) )
	addon.script_spawn("predb_good_izlom", "predbannik", vector():set(82.64,9.97,463.47) )
	spawn_predb_firest_vishka_port()
	
	-- мутанты:
	addon.script_spawn("predb_mob1", "predbannik", vector():set(-547.70,20.71,85.87) )
	addon.script_spawn("predb_mob2", "predbannik", vector():set(-547.70,20.71,85.87) )
	addon.script_spawn("predb_mob3", "predbannik", vector():set(-547.70,20.71,85.87) )
	addon.script_spawn("predb_mob4", "predbannik", vector():set(-547.70,20.71,85.87) )
	
	addon.script_spawn("predb_mob9", "predbannik", vector():set(-339.80,9.06,21.63) )
	addon.script_spawn("predb_mob10", "predbannik", vector():set(-339.80,9.06,21.63) )
	addon.script_spawn("predb_mob11", "predbannik", vector():set(-339.80,9.06,21.63) )
	
	addon.script_spawn("predb_mob15", "predbannik", vector():set(-587.08,2.83,-103.76) )
	addon.script_spawn("predb_mob16", "predbannik", vector():set(-587.08,2.83,-103.76) )
	
	addon.script_spawn("predb_mob19", "predbannik", vector():set(76.04,2.50,-0.19) )
	
	addon.script_spawn("predb_zomb1", "predbannik", vector():set(-417.38,30.43,81.05) )	--	это зомбированный.
	
end

function spawn_predb_firest_vishka_port()
 local sim = alife()
 local sobj = alife():create("predb_firest_vishka_port", vector():set (-470.10,-3.72,-228.70), 897661, 2910)
 sim_assign_story_id(sobj.id, story_ids.predb_firest_teleport)
end


function del_predb_rogue_npc1()
start_real_timer(1, "timer_actions.del_predb_rogue_npc1")
end

function del_predb_rogue_npc2()
start_real_timer(1, "timer_actions.del_predb_rogue_npc2")
end

function del_predb_rogue_npc3()
start_real_timer(1, "timer_actions.del_predb_rogue_npc3")
end


function predb_dead_friend_info_action()
local obj = level_object_by_sid(8951)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 6*6 then
	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "predb_dead_friend_info_article_text", nil, "info", 12000, nil)
end
end

function have_ponzil_item(stalker, player)
    return db.actor:object("predb_ponzil_item") ~= nil
end

function ponzil_item_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "predb_ponzil_item", "out")
	dialogs.relocate_money(second_speaker, 4800, "in")
end

function have_acid_box(stalker, player)
    return db.actor:object("acid_box") ~= nil
end

function acid_box_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "acid_box", "out")
	dialogs.relocate_money(second_speaker, 3500, "in")
end

function have_old_radio(stalker, player)
    return db.actor:object("old_radio") ~= nil
end

function old_radio_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_radio", "out")
	dialogs.relocate_money(second_speaker, 4500, "in")
end

function have_old_watch(stalker, player)
    return db.actor:object("old_watch") ~= nil
end

function old_watch_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_watch", "out")
	dialogs.relocate_money(second_speaker, 5500, "in")
end

function have_old_book(stalker, player)
    return db.actor:object("old_book") ~= nil
end

function old_book_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_book", "out")
	dialogs.relocate_money(second_speaker, 6000, "in")
end

function have_old_tv(stalker, player)
    return db.actor:object("old_tv") ~= nil
end

function old_tv_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_tv", "out")
	dialogs.relocate_money(second_speaker, 4500, "in")
end

function have_old_music_box(stalker, player)
    return db.actor:object("old_music_box") ~= nil
end

function old_music_box_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_music_box", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end

function have_af_manipulator(stalker, player)
    return db.actor:object("af_manipulator") ~= nil
end

function af_manipulator_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "af_manipulator", "out")
	dialogs.relocate_money(second_speaker, 10000, "in")
end

function have_sssr_moneta(stalker, player)
    return db.actor:object("sssr_moneta_1") ~= nil
end

function sssr_moneta_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "sssr_moneta_1", "out")
	dialogs.relocate_money(second_speaker, 4000, "in")
end

function have_collection_box(stalker, player)
    return db.actor:object("old_collection_box") ~= nil
end

function collection_box_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "old_collection_box", "out")
	dialogs.relocate_money(second_speaker, 8000, "in")
end

function have_anomal_lamp(stalker, player)
    return db.actor:object("anomal_lamp") ~= nil
end

function anomal_lamp_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "anomal_lamp", "out")
	dialogs.relocate_money(second_speaker, 10000, "in")
end





function predb_rogue_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 8000, "in")
end

function have_predb_village_suit(stalker, player)
    return db.actor:object("scout_outfit") ~= nil
end


function have_predb_grass(stalker, player)
    return db.actor:object("village_grass") ~= nil
end

function predb_grass_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "village_grass", "out")
	dialogs.relocate_item_section(second_speaker, "kontrab_termos", "in")
end

function have_predb_termos(stalker, player)
    return db.actor:object("kontrab_termos") ~= nil
end

function predb_termos_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "kontrab_termos", "out")
end

function have_predb_radio_part(stalker, player)
    return db.actor:object("predb_radio_part") ~= nil
end

function have_rpg()
    return db.actor:object("wpn_rpg7") ~= nil
end

function have_predb_firestation_komander_key(stalker, player)
    return db.actor:object("predb_firestation_komander_key") ~= nil
end

function have_predb_maroder_box(stalker, player)
    return db.actor:object("marouders_box") ~= nil
end

function marouders_box_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "marouders_box", "out")
end

function old_moneta_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "old_moneta", "in")
end

function dont_have_old_moneta(stalker, player)
    return db.actor:object("old_moneta") == nil
end

function have_predb_weapon_box(stalker, player)
    return db.actor:object("weapon_box") ~= nil
end

function predb_weapon_box_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "weapon_box", "out")
	dialogs.relocate_item_section(second_speaker, "af_green", "in")
end

function predb_weapon_box_reward(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "weapon_box", "out")
	dialogs.relocate_money(second_speaker, 4000, "in")
end

function have_electron_block(stalker, player)
    return db.actor:object("electron_block") ~= nil
end

function electron_block_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "electron_block", "out")
	dialogs.relocate_money(second_speaker, 2000, "in")
end

function have_broken_radiostation(stalker, player)
    return db.actor:object("broken_radiostation") ~= nil
end

function broken_radiostation_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "broken_radiostation", "out")
	dialogs.relocate_money(second_speaker, 3000, "in")
end

function have_old_album(stalker, player)
    return db.actor:object("old_album") ~= nil
end

function old_album_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "old_album", "out")
	dialogs.relocate_money(second_speaker, 3500, "in")
end

function have_old_komp_block(stalker, player)
    return db.actor:object("old_komp_block") ~= nil
end

function old_komp_block_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "old_komp_block", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end


function predb_maroders_infoportions_clear()
db.actor:disable_info_portion("predb_firest_maroud_mob1_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob2_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob3_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob4_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob5_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob6_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob7_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob8_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob9_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob10_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob11_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob12_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob13_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob14_dead")
db.actor:disable_info_portion("predb_firest_maroud_mob15_dead")
end


function predb_courier_reward1(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 10000, "in")
end

function predb_kontrabs_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 5000, "in")
end

function predb_kontrabs_vodka_spawn()
addon.script_spawn("vodka", "predbannik", vector():set(-38.60,1.60,344.18) )
addon.script_spawn("vodka", "predbannik", vector():set(-38.60,1.60,344.18) )
addon.script_spawn("vodka", "predbannik", vector():set(-38.60,1.60,344.18) )
addon.script_spawn("vodka", "predbannik", vector():set(-38.60,1.60,344.18) )
addon.script_spawn("vodka", "predbannik", vector():set(-38.60,1.60,344.18) )
end

function predb_recipes_message()
news_manager.send_tip(db.actor, "predb_recipes_message_tip", nil, "anomal", 8000, nil)
end

function have20ibuprophens()
return (addon_utils.get_object_number(db.actor, "ibuprophen") >= 20)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function predb_kontrab_ibuprophens_out()
addon.remove_items("ibuprophen", 20)
end

function have20vodka()
return (addon_utils.get_object_number(db.actor, "vodka") >= 20)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function have5zomby_hands()
return (addon_utils.get_object_number(db.actor, "mutant_zombie_hand") >= 5)  -- внимание! Предмет не должен быть вида "identity_immunities"!
end

function have_antirad(stalker, player)
    return db.actor:object("antirad") ~= nil
end

function not_has_rad_seek_info()
if db.actor:dont_has_info("rad_seek") then
	return true
	end
	return false
end


function predb_megaboar_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "hunter_outfit", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x76_zhekan", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x76_zhekan", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x76_zhekan", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_money(second_speaker, 5000, "in")
end


function predb_quest_spawn()
relation_registry.set_community_goodwill ("marauder", db.actor:id(), -5000)
end


function predb_body1info_tip()
local obj = level_object_by_sid(8641)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	news_manager.send_tip(db.actor, "predb_body1_info_tip", nil, "stalker", 12000, nil)
	addon.actor_disable_inventory()
end
end

function have_predb_kontrab_radio_list(stalker, player)
    return db.actor:object("predb_kontrab_radio_list") ~= nil
end

function predb_komandr_hutor_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "predb_kontrab_radio_list", "out")
	dialogs.relocate_item_section(second_speaker, "grenade_rgd5", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_item_section(second_speaker, "irp-b", "in")
end


function mark_firest_radio()
   local obj = alife():story_object(8970)
   local obj_id = obj.id
   if obj_id then
   text = "Радиостанция"
	level.map_add_object_spot_ser(obj_id,"green_location",text)
   end
end

function mark_tower_teleport()
   local obj = alife():story_object(8960)
   if obj then
	level.map_add_object_spot_ser(obj.id, "green_location", "Телепорт")
   end
end

function have_predb_capsula(stalker, player)
    return db.actor:object("af_capsula_1") ~= nil
end

function spawn_predb_ovrag_capsula()
addon.script_spawn("af_capsula_1", "predbannik", vector():set(-211.56,16.98,249.57) )
end

function predb_komandr_firest_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "predb_army_maps", "out")
	dialogs.relocate_item_section(second_speaker, "wpn_aps", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x18_pmm", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x18_pmm", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x18_pmm", "in")
end

function have_all_predb_btr_items(stalker, player)
    return ( db.actor:object("btr_engine_kit") ~= nil and 
		db.actor:object("repair_kit") ~= nil and
		db.actor:object("akumulator") ~= nil )
end

function predb_btr_items_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "btr_engine_kit", "out")
	dialogs.relocate_item_section(second_speaker, "repair_kit", "out")
	dialogs.relocate_item_section(second_speaker, "akumulator", "out")
end

function predb_komandr_cave_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "oficer_outfit", "in")
	dialogs.relocate_item_section(second_speaker, "grenade_f1", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "yod", "in")
end


function spawn_hutor_courier()
	addon.script_spawn("predb_courier", "predbannik", vector():set(14.60,0.76,345.81) )
	addon.script_spawn("predb_courier_guard1", "predbannik", vector():set(14.60,0.76,345.81) )
	addon.script_spawn("predb_courier_guard2", "predbannik", vector():set(14.60,0.76,345.81) )
end


function have_courier_gruz(stalker, player)
    return db.actor:object("predb_couriers_seif") ~= nil
end

function predb_gruz_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "predb_couriers_seif", "out")
end

function set_village_sold_companion()
	local npc = level_object_by_sid(8972)
	if npc and npc:alive() then
		dialogs.companion_start_following(npc, db.actor)
		news_manager.send_tip(db.actor, "village_sold_companion_tip", nil, "stalker", 8000, nil)
	end
end

function cave_task_action()
local obj = level_object_by_sid(8647)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 5*5 then
	if has_alife_info("predb_kpp_kontrab_atacked") then
		db.actor:give_info_portion ("cave_task_2")
		spawn_body_habar38()
	elseif db.actor:dont_has_info("predb_kpp_kontrab_atacked") then
		db.actor:give_info_portion ("cave_task_1")
		spawn_body_habar38()
	end
end
end

function predb_kpp_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "predb_kpp_seif_key", "in")
end

function village_sold_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "wpn_vihr", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x39_pab9", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x39_pab9", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_9x39_pab9", "in")
end


function have_tuschano_king_head(stalker, player)
    return db.actor:object("tuschano_king_head") ~= nil
end

function tuschano_king_head_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "tuschano_king_head", "out")
	dialogs.relocate_item_section(second_speaker, "af_mushroom", "in")
end

function mil_grocery_key_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_grocery_key", "in")
end

---------------------------------------------------------------------------------------------------


-- Чуваки без сознания -----------------------------------------------------------------------------

function spawn_faint_body1()
 local sim = alife()
 local sobj = sim:create("faint_body1", vector():set (-176.26,-6.14,-39.53), 74207, 71)
 sim_assign_story_id(sobj.id, story_ids.faint_body1)
end


function set_faint_man1companion()
	local npc = level_object_by_sid(8666)
	if npc and npc:alive() then
		dialogs.companion_start_following(npc, db.actor)
		news_manager.send_tip(db.actor, "faint_man1companion_tip", nil, "stalker", 8000, nil)
	end
end

function faint_man1reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 5000, "in")
end

function set_faint_man1invulnerable()
local npc1 = level_object_by_sid(8666)
if npc1:alive() then
   if npc1:object("invulnerable") == nil then
    alife():create("invulnerable", npc1:position(), npc1:level_vertex_id(), npc1:game_vertex_id(), npc1:id())
   end
   npc1:invulnerable(true)
end
end

function set_faint_man1not_invulnerable()
local npc1 = level_object_by_sid(8666)
if npc1:alive() then
   npc1:invulnerable(false)
end
end

function faint_bodies_check()
	if xr_conditions.actor_behind_faintbody1() == true then
		addon_devices.faint_npc_use_interface_start()
	end
	if xr_conditions.actor_behind_faintbody2() == true then
		addon_devices.faint_npc_use_interface_start()
	end
end

function faint_npcs_reanimation()	--	реанимируем
	if xr_conditions.actor_behind_faintbody1() == true then
		db.actor:give_info_portion("faint_body1_use_morphine")
	end
	if xr_conditions.actor_behind_faintbody2() == true then
		db.actor:give_info_portion("faint_body2_use_morphine")
	end

	if ( xr_conditions.actor_behind_faintbody1() ~= true 
	and xr_conditions.actor_behind_faintbody1() ~= true )
	then
		addon.actor_disable_inventory()
	end
end

function faint_npcs_finish()	--	добиваем
	if xr_conditions.actor_behind_faintbody1() == true then
		db.actor:give_info_portion("faint_body1_finish")
	end
	if xr_conditions.actor_behind_faintbody2() == true then
		db.actor:give_info_portion("faint_body2_finish")
	end

	if ( xr_conditions.actor_behind_faintbody1() ~= true 
	and xr_conditions.actor_behind_faintbody1() ~= true )
	then
		addon.actor_disable_inventory()
	end
end

function faint_man1habar_spawn1()
if db.actor:dont_has_info("deadmask_task1") then
	local karma = starvation.get_karma()
	if karma>=0.5 then
	local sobj = alife():create("faint_man1_habar", vector():set (-112.71,8.09,74.46), 143669, 81)
	local sobj_id = sobj.id
	text = "Хабар Степки"
	level.map_add_object_spot_ser(sobj_id,"crlc_big",text)
	news_manager.send_tip(db.actor, "treasure1", nil)

	elseif karma<0.5 then
	db.actor:give_info_portion ("faint_man1_pda_info_article")
	alife():create("faint_man1_habar", vector():set (-112.71,8.09,74.46), 143669, 81)
	news_manager.send_tip(db.actor, "treasure2", nil)
	end
end
end

function faint_man1habar_spawn2()
		local sobj = alife():create("faint_man1_habar", vector():set (-112.71,8.09,74.46), 143669, 81)
		local sobj_id = sobj.id
		text = "Тайник Степки"
		level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function unmark_faint_man_habar()
local sim = alife()
for a=1,65534 do
local obj = sim:object( a )
  if obj then
   if obj:section_name():find("^faint_man1_habar") then
    amk.remove_spot_from_map(obj.id,"green_location","Тайник Степки")
   end
  end
 end
end

function have_af_deadmask(stalker, player)
    return db.actor:object("af_deadmask") ~= nil
end

function start_deadmask_timer()
local pos = db.actor:position()
local n = math.random(-2,2)
start_real_timer(60, "timer_actions.deadmask_timer_action")
alife():create('deadmask_sound_obj', vector():set(pos.x+n, pos.y, pos.z-n), db.actor:level_vertex_id(), db.actor:game_vertex_id())
end

function deadmask_soundobj_respawn2()
local pos = db.actor:position()
local n = math.random(-2,2)
alife():create('deadmask_sound_obj', vector():set(pos.x+n, pos.y, pos.z-n), db.actor:level_vertex_id(), db.actor:game_vertex_id())
end

function teleport_faint_man_to_hutor()
alife_teleport_object("", vector():set(-203.95,-20.03,-141.02), 49128, 57, id_by_sid(story_ids.faint_npc1))
end

function faint_man1bad_health()
 	local sobj = level_object_by_sid(8666)
    if sobj then
		local hlth = sobj.health
		if hlth < 0.9 then return true end
	end
end

function faint_man1health_up()
	local sobj = level_object_by_sid(8666)
    if sobj then
		local hlth = sobj.health
		if hlth < 0.9 then
		sobj.health = 1.0 end
	end
end

function stop_faint_man1companion()
	local npc = level_object_by_sid(8666)
	if npc and npc:alive() then
		dialogs.companion_stop_following(npc, db.actor)
	end
end

function faint_man1reward1(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 50000, "in")
end

function faint_man1reward2(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 25000, "in")
end

function deadmask_exchange1()
addon.remove_items("af_deadmask", 1)
alife():create('af_deadmask_2', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
end

function deadmask_exchange2()
addon.remove_items("af_deadmask", 1)
alife():create('af_deadmask_2', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
end

function faint_man1rest_action()

end

function set_faint_man2companion()
	local npc = level_object_by_sid(8748)
	if npc and npc:alive() then
		dialogs.companion_start_following(npc, db.actor)
		news_manager.send_tip(db.actor, "faint_man2companion_tip", nil, "stalker", 8000, nil)
	end
end

-- Бюрериада на Янтаре --------------------------------------------------------------------------------------------------

function mark_yan_sold7body()
   local obj = alife():story_object(8697)
   if obj then
	level.map_add_object_spot_ser(obj.id, "crlc_mdl", "утонувший боец")
	addon.script_spawn("af_nightvision_2", "l08_yantar", vector():set(-61.83,-13.00,-268.36) )
   end
end

function unmark_yan_sold7body()
   local obj = alife():story_object(8697)
   if obj then 
	level.map_remove_object_spot(obj.id, "crlc_mdl")
   end
   local obj = alife():story_object(8699)
   if obj then
	level.map_remove_object_spot(obj.id,"crlc_mdl","здесь пропал сержант Егоров")
   end
end

function mark_yan_raciya_zone()
   local obj = alife():story_object(8699)
   if obj then
	level.map_add_object_spot_ser(obj.id,"crlc_mdl","здесь пропал сержант Егоров")
   end
end

function have_yan_sold_raciya(stalker, player)
    return db.actor:object("yan_sold_raciya") ~= nil
end

function yan_cold_comandr_reward1(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "ammo_7.62x54_7h1", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x54_7h1", "in")
    dialogs.relocate_item_section(second_speaker, "ammo_5.45x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.45x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.45x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.45x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.45x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_12x70_buck", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_army", "in")
	dialogs.relocate_item_section(second_speaker, "irp-b", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "ibuprophen", "in")
	dialogs.relocate_item_section(second_speaker, "ibuprophen", "in")
end

function spawn_yan_sergant_shron()
local sobj = alife():create("yan_sergant_shron", vector():set (95.63,0.03,31.06), 89773, 1520)
	local sobj_id = sobj.id
	text = "Схрон сержанта Егорова"
	level.map_add_object_spot_ser(sobj_id,"crlc_mdl",text)
	news_manager.send_tip(db.actor, "treasure1", nil)
end

function all_guard_yan_burers_dead()
	if ( has_alife_info("yan_burer_sold9_dead") 
	and has_alife_info("yan_burer_sold10_dead") 
	and has_alife_info("yan_burer_sold11_dead") ) then
		return true
	end
end

function spawn_yan_to_x16lchanger()
ogsm_freeplay.create_level_changer(8701, vector():set( -6.63, -8.93, -13.70 ), 38975, 1461,  -- позиция создаваемого перехода
7057,  -- lvertex после перехода
1544, -- gvertex после перехода
vector():set( 113.76,4.78,-13.25 ),  -- позиция после перехода
vector():set(  0.0, 0.0,  -1.0 ),  -- направление взгляда после перехода
"l08u_brainlab",  -- уровень после перехода
0)	--	если 1, то без запроса, если 0, то с запросом.
end

function release_yan_zavod_guard_burers()
local obj1 = alife():story_object(8691)
local obj2 = alife():story_object(8692)
local obj3 = alife():story_object(8693)
	alife():release(obj1 , true)
	alife():release(obj2 , true)
	alife():release(obj3 , true)
end


function teleport_x16burer_adviser()
local obj = alife():story_object(8722)
if obj ~= nil and obj:alive() == true then
alife_teleport_object("_", vector():set(51.01,5.58,-11.97), 5529, 1538, obj.id) 
end
end


function spawn_x16docks_box()
alife():create("x16docks_box", vector():set (-43.43,-7.83,1.55), 1493, 1531)
end

function spawn_x16docks_box2()
alife():create("x16docks2", vector():set (-130.30,21.56,-28.13), 4, 1529)
--alife():create("x16_room_snork1", vector():set (-124.74,21.56,-30.17), 99, 1529)
--alife():create("x16_room_snork2", vector():set (-124.74,21.56,-30.17), 99, 1529)
--alife():create("x16_room_snork3", vector():set (-124.74,21.56,-30.17), 99, 1529)
--alife():create("x16_room_snork4", vector():set (-124.74,21.56,-30.17), 99, 1529)
end

function x16brain_docks1have(stalker, player)
    return db.actor:object("x16_documents1") ~= nil
end

function x16brain_docks2have(stalker, player)
    return db.actor:object("x16_documents2") ~= nil
end

function x16brain_docks_out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "x16_documents1", "out")
end

function x16brain_docks2out(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "x16_documents2", "out")
end

function x16door_key_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "x16door_key", "in")
end

function release_x16burer_adviser1()
local obj1 = alife():story_object(8722)
	alife():release(obj1 , true)
end

function release_x16brain()
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("^x16brain_npc") then
	sim:release(sobj,true)
	return
	end
end
end

function spawn_x16burers_solds()
addon.script_spawn("x16_burer_sold1", "l08u_brainlab", vector():set(-65.35,11.75,-10.34) )
addon.script_spawn("x16_burer_sold2", "l08u_brainlab", vector():set(-65.35,11.75,-10.34) )
addon.script_spawn("x16_burer_sold3", "l08u_brainlab", vector():set(-65.35,11.75,-10.34) )
addon.script_spawn("x16_burer_sold4", "l08u_brainlab", vector():set(-65.35,11.75,-10.34) )
addon.script_spawn("x16_burer_sold5", "l08u_brainlab", vector():set(-65.35,11.75,-10.34) )
end

function matches_in(first_speaker, second_speaker)
    dialogs.relocate_item_section(second_speaker, "matches", "in")
end


function x16burers_door_break_think()
	local st = get_hud():GetCustomStatic("x16burers_door_break_think") or get_hud():AddCustomStatic("x16burers_door_break_think",true)
	st.m_endTime = time_global()/1000 + 5
end

function set_yan_saharov_companion()
	local npc = level_object_by_sid(8678)
	if npc and npc:alive() then
		dialogs.companion_start_following(npc, db.actor)
		--news_manager.send_tip(db.actor, "faint_man1companion_tip", nil, "stalker", 8000, nil)
	end
end

function saharov_invulnerable()
	local npc = level_object_by_sid(8678)
	if npc and npc:alive() then
        if npc:object("invulnerable") == nil then
            alife():create("invulnerable", npc:position(), npc:level_vertex_id(), npc:game_vertex_id(), npc:id())
        end
		npc:invulnerable(true)
	end
end

function yan_sold_comander_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 30000, "in")
end


function teleport_saharov_to_bunker()
local obj = alife():story_object(8678)
if obj ~= nil and obj:alive() == true then
alife_teleport_object("_", vector():set(25.66,-11.68,-271.90), 51615, 1480, obj.id) 
end
end


function teleport_sold6to_bunker()
local obj = alife():story_object(8690)
if obj and obj:alive() == true then
alife_teleport_object("_", vector():set(30.61,-11.88,-253.70), 54314, 1478, obj.id) 
end
end



function yan_our_items_back(box)
	transfer_from_box(8729)
end

function release_burer_scout()
	local obj = alife():story_object(8695)
	if obj then alife():release(obj, true) end
end



function x16secret_documents_doll_tip()
	if db.actor:object("wonder_doll") ~= nil then
		start_real_timer(5, "timer_actions.x16secret_documents_doll_tip_action")
	end
end


function spawn_ros_stroyka_atack_mobs()
local level_name = level.name()
if level_name == "l06_rostok" then
	addon.script_spawn("ros_stroyka_atack_mob1", "l06_rostok", vector():set(-228.63,0.00,-48.65) )
	addon.script_spawn("ros_stroyka_atack_mob2", "l06_rostok", vector():set(-228.63,0.00,-48.65) )
	addon.script_spawn("ros_stroyka_atack_mob3", "l06_rostok", vector():set(-228.63,0.00,-48.65) )
	addon.script_spawn("ros_stroyka_atack_mob4", "l06_rostok", vector():set(-228.63,0.00,-48.65) )
	addon.script_spawn("ros_stroyka_atack_mob5", "l06_rostok", vector():set(-228.63,0.00,-48.65) )
	addon.script_spawn("ros_stroyka_atack_mob6", "l06_rostok", vector():set(-171.23,0.00,93.15) )
	addon.script_spawn("ros_stroyka_atack_mob7", "l06_rostok", vector():set(-171.23,0.00,93.15) )
	addon.script_spawn("ros_stroyka_atack_mob8", "l06_rostok", vector():set(-171.23,0.00,93.15) )
	soundtrack.ros_stroyka_mobs_atack_start()
end
end


function ros_hunters_flash_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "ros_hunters_flash", "in")
end

function saharov_for_lab_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "saharov_medbox", "in")
end





function yan_carcrash_docks1have(stalker, player)
    return db.actor:object("yan_car_crash_docks1") ~= nil
end

function yan_carcrash_docks1out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_car_crash_docks1", "out")
	dialogs.relocate_money(second_speaker, 10000, "in")
end


function yan_carcrash_docks2have(stalker, player)
    return db.actor:object("yan_car_crash_docks2") ~= nil
end

function yan_carcrash_docks2out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_car_crash_docks2", "out")
	dialogs.relocate_money(second_speaker, 15000, "in")
end



function yan_vasiliev_swamp_pribor_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_anomaly_detector", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
end

function yan_saharov_swamp_reward1(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_anomaly_detector", "out")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "int")
	dialogs.relocate_item_section(second_speaker, "medkit_scientic", "in")
	dialogs.relocate_item_section(second_speaker, "antirad", "in")
	dialogs.relocate_item_section(second_speaker, "dix", "in")
	dialogs.relocate_item_section(second_speaker, "bipsizon", "in")
	dialogs.relocate_money(second_speaker, 10000, "in")
end

function yan_saharov_swamp_reward2(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_anomaly_detector", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end



function have_wheel(stalker, player)
    return db.actor:object("wheel") ~= nil
end

function have_car_tank(stalker, player)
    return db.actor:object("avtomobile_tank") ~= nil
end

function have_akumulator(stalker, player)
    return db.actor:object("akumulator") ~= nil
end

function have_bearings(stalker, player)
    return db.actor:object("bearing") ~= nil
end

function have_electromotor(stalker, player)
    return db.actor:object("electric_motor") ~= nil
end



function wheel_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "wheel", "out")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
end

function car_tank_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "avtomobile_tank", "out")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
end

function akumulator_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "akumulator", "out")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
end

function bearings_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "bearing", "out")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
end

function electromotor_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "electric_motor", "out")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "vodka", "in")
	dialogs.relocate_item_section(second_speaker, "specops_outfit", "in")
end




function have_saharov_flash(stalker, player)
    return db.actor:object("ros_hunters_flash") ~= nil
end

function saharov_flash_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "ros_hunters_flash", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end



function spawn_yan_lost_hunter_pda()
addon.script_spawn("yan_lost_hunter_pda_static", "l08_yantar", vector():set(141.87,-1.84,71.37) )
end

function have_yan_hunter_flash(stalker, player)
    return db.actor:object("yan_hunters_flash") ~= nil
end



function spawn_yan_lost_cargo()
	addon.script_spawn("yan_ammo_box", "l08_yantar", vector():set(60.15,0.53,43.08) )
	addon.script_spawn("yan_provision_box", "l08_yantar", vector():set(79.55,0.43,-58.72) )
end

function have_yan_ammo_box(stalker, player)
    return db.actor:object("yan_ammo_box") ~= nil
end

function have_yan_provision_box(stalker, player)
    return db.actor:object("yan_provision_box") ~= nil
end

function yan_lost_cargo_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_ammo_box", "out")
	dialogs.relocate_item_section(second_speaker, "yan_provision_box", "out")
	dialogs.relocate_money(second_speaker, 15000, "in")
end





function put_items_to_ros_nedostroyka_box()
transfer_to_box(8750)
end




function ros_rescuers_actor_getoff()
	db.actor:set_actor_position(patrol("ros_after_rescuers_atack_point"):point(0))
	local dir = patrol("ros_after_rescuers_atack_point"):point(1):sub(patrol("ros_after_rescuers_atack_point"):point(0))
	db.actor:set_actor_direction(-dir:getH())
	level.enable_input()
end



function yan_lost_hunter_task_reward1(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_hunters_flash", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end

function yan_lost_hunter_task_reward2(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "yan_hunters_flash", "out")
	dialogs.relocate_money(second_speaker, 20000, "in")
	xr_effects.karma_up()
end

function have_af_chip(stalker, player)
    return db.actor:object("af_chip") ~= nil
end

function have_ros_old_items(stalker, player)
    return ( db.actor:object("ros_pasport") ~= nil or db.actor:object("ros_papirosi") ~= nil )
end

function ros_old_pen_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "ros_pen", "in")
end


--------------------------------------------------------------------------------------------------------------------------------------

function teleport_body1()
local obj = alife():story_object(8066)
alife_teleport_object("_", vector():set(-218.770004272461,-19.9300003051758,-169.259994506836), 34087, 47, obj.id) 
end

function teleport_body2()
local obj = alife():story_object(8088)
alife_teleport_object("_", vector():set(56.62,2.50,138.18), 338607, 94, obj.id) 
end

function teleport_body3()
local obj = alife():story_object(8196)
alife_teleport_object("_", vector():set(13.73,15.37,645.43), 286589, 205, obj.id) 
end

function teleport_body4()
local obj = alife():story_object(8199)
alife_teleport_object("_", vector():set(13.73,15.37,645.43), 286589, 205, obj.id) 
end

function teleport_body5()
local obj = alife():story_object(8200)
alife_teleport_object("_", vector():set(13.73,15.37,645.43), 286589, 205, obj.id) 
end

function teleport_body6()
local obj = alife():story_object(8201)
alife_teleport_object("_", vector():set(13.73,15.37,645.43), 286589, 205, obj.id) 
end

function teleport_body7()
local obj = alife():story_object(8236)
alife_teleport_object("_", vector():set(344.30,16.76,244.18), 588104, 251, obj.id) 
end

function teleport_body8()
local obj = alife():story_object(8107)
alife_teleport_object("_", vector():set(-10.47,-1.01,-176.87), 166462, 287, obj.id) 
end

function teleport_body9()
local obj = alife():story_object(8109)
alife_teleport_object("_", vector():set(-107.73,-1.74,-191.17), 104521, 269, obj.id) 
end

function teleport_body10()
local obj = alife():story_object(8110)
alife_teleport_object("_", vector():set(105.19,8.20,177.42), 272578, 374, obj.id) 
end

function teleport_body11()
local obj = alife():story_object(8111)
alife_teleport_object("_", vector():set(-131.20,0.40,36.20), 83640, 327, obj.id) 
end

function teleport_body12()
local obj = alife():story_object(8112)
alife_teleport_object("_", vector():set(120.45,15.99,5.45), 217054, 294, obj.id) 
end

function teleport_body13()
local obj = alife():story_object(8247)
alife_teleport_object("_", vector():set(47.55,18.39,97.46), 236437, 370, obj.id) 
end

function teleport_body14()
local obj = alife():story_object(8304)
alife_teleport_object("_", vector():set(-21.76,0.96,261.22), 162004, 258, obj.id) 
end

function teleport_body15()
local obj = alife():story_object(8305)
alife_teleport_object("_", vector():set(-6.45,0.60,240.20), 172108, 258, obj.id) 
end

function teleport_body16()
local obj = alife():story_object(8306)
alife_teleport_object("_", vector():set(-0.50,0.39,260.20), 174305, 258, obj.id) 
end

function teleport_body17()
local obj = alife():story_object(8365)
alife_teleport_object("_", vector():set(-93.17,-1.15,-2.53), 119507, 322, obj.id) 
end

function teleport_body18()
local obj = alife():story_object(8466)
alife_teleport_object("_", vector():set(-76.95,21.56,120.30), 175846, 354, obj.id) 
end

function teleport_body19()
local obj = alife():story_object(8531)
alife_teleport_object("_", vector():set(-43.75,0.53,-205.13), 144362, 267, obj.id) 
end

function teleport_body20()
local obj = alife():story_object(8428)
alife_teleport_object("_", vector():set(-160.66,1.63,-148.17), 76238, 668, obj.id) 
end

function teleport_body21()
local obj = alife():story_object(8429)
alife_teleport_object("_", vector():set(-157.06,1.67,-153.67), 79085, 668, obj.id) 
end

function teleport_body22()
local obj = alife():story_object(8416)
alife_teleport_object("_", vector():set(-63.89,-16.10,12.88), 3742, 712, obj.id) 
end

function teleport_body23()
local obj = alife():story_object(8323)
alife_teleport_object("_", vector():set(125.07,3.43,-262.65), 317160, 955, obj.id) 
end

function teleport_body24()
local obj = alife():story_object(8325)
alife_teleport_object("_", vector():set(127.32,1.72,-74.77), 326124, 979, obj.id) 
end

function teleport_body25()
local obj = alife():story_object(8538)
alife_teleport_object("_", vector():set(156.90,0.09,76.79), 41289, 1181, obj.id) 
end

function teleport_body26()
local obj = alife():story_object(8604)
alife_teleport_object("_", vector():set(-238.90,8.28,95.33), 15263, 1362, obj.id) 
end






-- Вот мы и на Милитари: -------------------------------------------------------------------------------------------------------------

function spawn_mil_freak_key()
addon.script_spawn("mil_kazarma1_key", "l07_military", vector():set(-18.42,-4.11,-18.47) )
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "mil_doll_freak_key_look_tip", nil, "doll", 7000, nil)
		soundtrack.mil_doll_freak_key_look_snd()
		xr_effects.give_dolltip1()
	end
end

function spawn_mil_freak_key2shron()
	local sobj = alife():create("mil_freak_key2shron", vector():set (-51.81,-5.85,-24.87), 262118, 1605)
	local sobj_id = sobj.id
	text = "Тайник сумасшедшего"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_mil_freak3shron()
	--addon.script_spawn("mil_freak3shron", "l07_military", vector():set(73.72,-6.92,-23.66) )
	local sobj = alife():create("mil_freak3shron", vector():set (73.72,-6.92,-23.66), 262118, 1605)
	local sobj_id = sobj.id
	text = "Второй тайник сумасшедшего"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end



function spawn_mil_village_bloodsuckers()
addon.script_spawn("mil_village_bloodsucker1", "l07_military", vector():set(-213.33,-21.70,204.33) )
addon.script_spawn("mil_village_bloodsucker2", "l07_military", vector():set(-258.45,-22.55,199.32) )
addon.script_spawn("mil_village_bloodsucker3", "l07_military", vector():set(-255.83,-22.41,259.55) )
addon.script_spawn("mil_village_bloodsucker4", "l07_military", vector():set(-224.80,-21.37,226.08) )
end



function mil_kazarma1key_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_kazarma1_key", "in")
	if db.actor:object("wonder_doll") ~= nil then
		news_manager.send_tip(db.actor, "mil_doll_freak_key_look_tip", nil, "doll", 7000, nil)
		soundtrack.mil_doll_freak_key_look_snd()
		xr_effects.give_dolltip1()
	end
end

--function spawn_mil_village_shron1()
--addon.script_spawn("mil_village_shron1", "l07_military", vector():set(-213.33,-21.70,204.33) )
--end

function spawn_mil_village_shron1()
local sbox = alife():story_object(8828)
if sbox then
 alife():create("mil_hatchet",vector(),0,0,sbox.id)
 alife():create("mil_damian_portsigar",vector(),0,0,sbox.id)
end
end

function have_mil_hatchet(stalker, player)
    return db.actor:object("mil_hatchet") ~= nil
end

function have_mil_damian_portsigar(stalker, player)
    return db.actor:object("mil_damian_portsigar") ~= nil
end

function have_mil_damian_items(stalker, player)
    return ( db.actor:object("mil_hatchet") ~= nil and db.actor:object("mil_damian_portsigar") ~= nil )
end

function have_mil_kuzma_items(stalker, player)
    return ( db.actor:object("mil_money_pack") ~= nil and db.actor:object("mil_kuzma_letter") ~= nil )
end

function spawn_mil_village_panteley_tube_laz()
addon.script_spawn("panteley_tube_laz", "l07_military", vector():set(-285.25,-14.66,196.88) )
end

function spawn_mil_village_tabak_box()
addon.script_spawn("mil_village_tabak_box", "l07_military", vector():set(-204.30,-21.87,194.78) )
addon.script_spawn("mil_village_fireball1", "l07_military", vector():set(-206.10,-20.62,206.94) )
addon.script_spawn("mil_village_fireball2", "l07_military", vector():set(-206.10,-20.62,206.94) )
end

function have_mil_tabak_box(stalker, player)
    return db.actor:object("tabak_box") ~= nil
end

function have_all_mil_village_icon_parts(stalker, player)
    return ( db.actor:object("icon_part1") ~= nil and db.actor:object("icon_part2") ~= nil and db.actor:object("icon_part3") ~= nil and db.actor:object("icon_part4") ~= nil )
end

function tabak_box_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "tabak_box", "out")
end

function mil_village_portsigar_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_damian_portsigar", "out")
end

function mil_letter_money_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_kuzma_letter", "out")
	dialogs.relocate_item_section(second_speaker, "mil_money_pack", "out")
end

function spawn_mil_village_tower_tesla()
addon.script_spawn("mil_village_tower_tesla", "l07_military", vector():set(-245.11,-6.40,296.43) )
end

function release_mil_village_bloodsucker1()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^mil_village_bloodsucker1") then
		sim:release(sobj,true)
		end
	end
end

function release_mil_village_bloodsucker2()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^mil_village_bloodsucker1") then
		sim:release(sobj,true)
		end
	end
end

function release_mil_village_bloodsucker3()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^mil_village_bloodsucker1") then
		sim:release(sobj,true)
		end
	end
end

function release_mil_village_bloodsucker4()
	local sim = alife()
	for i=1,65534 do
	local sobj = sim:object(i)
		if sobj and sobj:name():find("^mil_village_bloodsucker1") then
		sim:release(sobj,true)
		end
	end
end

function release_mil_village_bloodsuckers()
release_mil_village_bloodsucker1()
release_mil_village_bloodsucker2()
release_mil_village_bloodsucker3()
release_mil_village_bloodsucker4()
end

function spawn_mil_village_bones()
addon.script_spawn("scelet_bone1", "l07_military", vector():set(-291.19,-22.20,292.72) )
addon.script_spawn("scelet_bone2", "l07_military", vector():set(-291.19,-22.20,292.72) )
addon.script_spawn("scelet_bone3", "l07_military", vector():set(-291.19,-22.20,292.72) )
addon.script_spawn("scelet_bone4", "l07_military", vector():set(-291.19,-22.20,292.72) )
addon.script_spawn("grob_part1", "l07_military", vector():set(-291.19,-22.20,292.72) )
end

function mil_actor_undream()
addon.actor_disable_inventory()
db.actor:hide_weapon()
level.add_pp_effector("deadcity_wake_old.ppe", 2107, false)
start_real_timer(4, "timer_actions.mil_actor_undream_action")
end

function have_mil_pribor(stalker, player)
    return db.actor:object("mil_electron_pribor") ~= nil
end

function mil_stalker_freak_exchange(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_electron_pribor", "out")
	dialogs.relocate_item_section(second_speaker, "mil_raciya", "in")
end


function mil_stalker_freak_doll_help()
if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "doll_help_tip30", nil, "doll", 7000, nil)
	xr_effects.give_dolltip2()
	soundtrack.wonderdoll_sucess_tip41()
end
end

function start_hue_pasport_timer(first_speaker, second_speaker)
start_game_timer(25*60, nil, {info_id = "mil_freak_pasport_ready"})
dialogs.relocate_money(second_speaker, 10000, "out")
end

function have10000money(stalker, player)
	return db.actor:money() >= 10000
end

function prapor_pasport_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "prapor_pasport", "in")
end

function has_prapor_pasport(stalker, player)
    return db.actor:object("prapor_pasport") ~= nil
end

function prapor_pasport_out(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 10000, "out")
	--dialogs.relocate_item_section(second_speaker, "prapor_pasport", "out")
	dialogs.relocate_item_section(second_speaker, "mil_shtab_key", "in")
end

function have_mil_dalnomer(stalker, player)
    return db.actor:object("mil_dalnomer") ~= nil
end

function mil_aviators_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_dalnomer", "out")
	dialogs.relocate_item_section(second_speaker, "anomal_gloves", "in")
end

function kanistra_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mobile_tank_empty", "in")
end

function have_mil_fuel(stalker, player)
    return db.actor:object("mil_fuel") ~= nil
end

function mil_fuel_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_fuel", "out")
end

function mil_vagon_key_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_hill_vagon_door_key", "in")
end

function mil_hntr_grav_off_tip()
start_real_timer(10, nil, "timer_actions.mil_hntr_grav_off_tip_action")
end 

function mil_teslas_release()
mil_tesla1release()
mil_tesla2release()
mil_tesla3release()
mil_tesla4release()
end 

function mil_tesla1release()
local obj = alife():story_object(8813)
  if obj then
   alife():release(obj , true)
  end
end 

function mil_tesla2release()
local obj = alife():story_object(8814)
  if obj then
   alife():release(obj , true)
  end
end 

function mil_tesla3release()
local obj = alife():story_object(8815)
  if obj then
   alife():release(obj , true)
  end
end 

function mil_tesla4release()
local obj = alife():story_object(8816)
  if obj then
   alife():release(obj , true)
  end
end 

function have_mil_electron_component(stalker, player)
    return db.actor:object("mil_electron_component") ~= nil
end

function have_mil_stimulator(stalker, player)
    return db.actor:object("mil_stimulator") ~= nil
end


function minefinder_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "detector_mine_finder", "in")
end

function mil_vsu_items_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "mil_electron_component", "out")
	dialogs.relocate_item_section(second_speaker, "mil_stimulator", "out")
end

function mil_separs_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "wpn_m16", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.56x45_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.56x45_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.56x45_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_5.56x45_ap", "in")
end

function mil_vsu_reward(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "wpn_akm", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x39_ap", "in")
end


function mil_komandr_body_port()
local obj = alife():story_object(8810)
alife_teleport_object("_", vector():set(-47.56,-4.41,233.58), 261852, 1736, obj.id)
end


function mil_vsu_solds_unmake_inv()
local npc1 = level_object_by_sid(8786)
if npc1:alive() then
   npc1:invulnerable(false)
end
local npc2 = level_object_by_sid(8787)
if npc2:alive() then
   npc2:invulnerable(false)
end
local npc3 = level_object_by_sid(8788)
if npc3:alive() then
   npc3:invulnerable(false)
end
local npc4 = level_object_by_sid(8789)
if npc4:alive() then
   npc4:invulnerable(false)
end
local npc5 = level_object_by_sid(8790)
if npc5:alive() then
   npc5:invulnerable(false)
end
local npc6 = level_object_by_sid(8791)
if npc6:alive() then
   npc6:invulnerable(false)
end
local npc7 = level_object_by_sid(8792)
if npc7:alive() then
   npc7:invulnerable(false)
end
end


function mil_vsu_dead()
	if ( has_alife_info("mil_vsu_sold2_dead") 
	and has_alife_info("mil_vsu_sold3_dead") 
	and has_alife_info("mil_vsu_sold4_dead") 
	and has_alife_info("mil_vsu_sold5_dead") 
	and has_alife_info("mil_vsu_sold6_dead") ) then
		return true
	end
	return false
end

function mil_separs_reward2(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "killer_outfit", "in")
	dialogs.relocate_item_section(second_speaker, "af_egg", "in")
end

function mil_separ_dead()
	if ( has_alife_info("mil_separ1_dead") 
	and has_alife_info("mil_separ2_dead")
	and has_alife_info("mil_separ3_dead") 
	and has_alife_info("mil_separ4_dead") 
	and has_alife_info("mil_separ5_dead") ) then
		return true
	end
	return false
end


function mil_separ_in_fire()
	local obj1 = level_object_by_sid(8794)
	local obj2 = level_object_by_sid(8795)
	local obj3 = level_object_by_sid(8796)
	local obj4 = level_object_by_sid(8797)
	local obj5 = level_object_by_sid(8798)
	if not ( obj1 and obj2 and obj3 and obj4 and obj5 ) then
			return false
	end
	local zone = db.zone_by_name["camp_fire_0003"]
	return utils.npc_in_zone(obj1, zone)
			and utils.npc_in_zone(obj2, zone)
			and utils.npc_in_zone(obj3, zone)
			and utils.npc_in_zone(obj4, zone)
			and utils.npc_in_zone(obj5, zone)
end


function separ_war_doll_hint()
start_real_timer(10, "timer_actions.separ_war_doll_hint_timer_action")
end


function mil_vsu_medics_tip()
news_manager.send_tip(db.actor, "mil_vsu_medics_tip", nil, "stalker", 12000, nil)
end



-- Радар: -------------------------------------------------------------------------------------------------------

function rad_mobs_spawn()
addon.script_spawn("rad_mob1", "l10_radar", vector():set(557.63,-62.52,-204.90) )	--	rad_mob_home1
addon.script_spawn("rad_mob2", "l10_radar", vector():set(557.63,-62.52,-204.90) )
addon.script_spawn("rad_mob3", "l10_radar", vector():set(557.63,-62.52,-204.90) )

--addon.script_spawn("rad_mob4", "l10_radar", vector():set(490.64,-52.52,-269.35) )	--	rad_mob_home2
--addon.script_spawn("rad_mob5", "l10_radar", vector():set(490.64,-52.52,-269.35) )
--addon.script_spawn("rad_mob6", "l10_radar", vector():set(490.64,-52.52,-269.35) )

addon.script_spawn("rad_mob7", "l10_radar", vector():set(403.24,-50.34,-207.48) )	--	rad_mob_home3
addon.script_spawn("rad_mob8", "l10_radar", vector():set(403.24,-50.34,-207.48) )
addon.script_spawn("rad_mob9", "l10_radar", vector():set(403.24,-50.34,-207.48) )

--addon.script_spawn("rad_mob10", "l10_radar", vector():set(314.82,-48.12,-129.08) )	--	rad_mob_home4
--addon.script_spawn("rad_mob11", "l10_radar", vector():set(314.82,-48.12,-129.08) )
--addon.script_spawn("rad_mob12", "l10_radar", vector():set(314.82,-48.12,-129.08) )

addon.script_spawn("rad_mob13", "l10_radar", vector():set(383.99,-50.50,-110.50) )	--	rad_mob_home5
addon.script_spawn("rad_mob14", "l10_radar", vector():set(383.99,-50.50,-110.50) )
addon.script_spawn("rad_mob15", "l10_radar", vector():set(383.99,-50.50,-110.50) )

--addon.script_spawn("rad_mob16", "l10_radar", vector():set(513.63,-50.85,-78.36) )	--	rad_mob_home6
--addon.script_spawn("rad_mob17", "l10_radar", vector():set(513.63,-50.85,-78.36) )
--addon.script_spawn("rad_mob18", "l10_radar", vector():set(513.63,-50.85,-78.36) )

addon.script_spawn("rad_mob19", "l10_radar", vector():set(570.40,-49.95,-6.49) )	--	rad_mob_home7

--addon.script_spawn("rad_mob20", "l10_radar", vector():set(636.73,-43.82,186.64) )	--	rad_mob_home8

addon.script_spawn("rad_base_electra1", "l10_radar", vector():set(89.45,3.60,86.94) )
addon.script_spawn("rad_base_electra2", "l10_radar", vector():set(89.45,3.60,86.94) )
addon.script_spawn("rad_base_electra3", "l10_radar", vector():set(89.45,3.60,86.94) )
end

function spawn_rad_abdul_zapiska()
addon.script_spawn("rad_abdul_zapiska", "l10_radar", vector():set(613.80,-51.50,-313.51) )
alife():create("antigas", vector():set (612.27,-51.51,-314.24), 220045, 1881)
end


function rad_headhunters_actor_alarm()
news_manager.send_tip(db.actor, "rad_headhunters_actor_alarm_tip", nil, "stalker", 10000, nil)
end


function rad_abdul_lost_think()
	local st = get_hud():GetCustomStatic("rad_abdul_lost_think") or get_hud():AddCustomStatic("rad_abdul_lost_think",true)
	st.m_endTime = time_global()/1000 + 10
end


function have_rad_agent_docks(stalker, player)
    return db.actor:object("rad_secret_docks") ~= nil
end

function rad_agent_docks_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "rad_secret_docks", "out")
	dialogs.relocate_money(second_speaker, 5000, "in")
end

function spawn_esc_secret_art()
--addon.script_spawn("esc_secret_art_box", "l01_escape", vector():set(17.23,-4.38,-84.91) )	--	перенесено в алл.спавн
end

function have_esc_secret_art(stalker, player)
    return db.actor:object("af_pult") ~= nil
end

function skidan_secret_art_reward(first_speaker, second_speaker)
	dialogs.relocate_money(second_speaker, 10000, "in")
end

function af_pult_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "af_pult", "out")
	addon.remove_items("af_pult", 1)
end

function secret_art_help_tip()
news_manager.send_tip(db.actor, "secret_art_help_tip", nil, "anomal", 8000, nil)
end

function rad_bunker_key_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "rad_vagon_door_key", "in")
end


function actor_in_pripyat_condition()
local level_name = level.name()
	if ( has_alife_info("x10_abdul_dead") or has_alife_info("rad_abdul_delete") and level_name ~= "l11_pripyat" ) then
		return true
	else
		return false
	end
end


function rad_agent_reward1(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "wpn_wa2000", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x51_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x51_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x51_ap", "in")
	dialogs.relocate_item_section(second_speaker, "ammo_7.62x51_ap", "in")
end

function rad_lost_info_dollhelp_tip()
if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "doll_help_tip28", nil, "doll", 8000, nil)
	xr_effects.give_dolltip2()
	soundtrack.wonderdoll_sucess_tip42()
end
end

function delete_x10door_nopass_zone()
local obj = alife():story_object(8877)
	alife():release(obj , true)
end




-- Припять: -----------------------------------------------------------------------------------------------------------------

function spawn_pri_abdul_sniper()
addon.script_spawn("pri_abdul_sniper", "l11_pripyat", vector():set(-19.19,12.44,-176.70) )
end

function spawn_pri_detsad_teleport()
--addon.script_spawn("pri_detsad_teleport", "l11_pripyat", vector():set(109.06,-0.80,-21.43) )
alife():create("pri_detsad_teleport", vector():set (122.14,-0.94,-21.53), 229050, 2230)
end

function have_pri_detsad_gazeta(stalker, player)
    return db.actor:object("pri_detsad_gazeta") ~= nil
end

function delete_pri_detsad_teleport()
local sim = alife()
for i=1,65534 do
local sobj = sim:object(i)
	if sobj and sobj:name():find("^pri_detsad_teleport") then
	sim:release(sobj,true)
	return
	end
end
end

function pri_agents_meet_task_think()
	local st = get_hud():GetCustomStatic("pri_agents_meet_task_think") or get_hud():AddCustomStatic("pri_agents_meet_task_think",true)
	st.m_endTime = time_global()/1000 + 10
end


function pri_stadion_agent_info_tip()
local obj = level_object_by_sid(8912)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 6*6 then
	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "pri_stadion_agent_info_tip", nil, "stalker", 18000, nil)
end
end


function pri_stadion_key_in(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "pri_stadion_key", "in")
end


function pri_monument_spawn()
addon.script_spawn("pri_monument_ghost", "l11_pripyat", vector():set(14.86,-2.22,18.99) )
end


-- ЧАЭС -----------------------------------------------------------------------------------------------

function aes_door_code1()
local obj = level_object_by_sid(8934)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 8*8 then
	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "aes_safezones_info_tip", nil, "stalker", 18000, nil)
	news_manager.send_tip(db.actor, "aes_door_code1_tip", nil, "stalker", 8000, nil)
	start_real_timer(4, "timer_actions.aes_quest_timer_action")
end
end

function aes_door_code2()
local obj = level_object_by_sid(8935)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 8*8 then
	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "aes_door_code2_tip", nil, "stalker", 8000, nil)
end
end

function aes_door_code3()
local obj = level_object_by_sid(8936)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 8*8 then
	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "aes_door_code3_tip", nil, "stalker", 8000, nil)
end
end

function aes_door_code4()
--local obj = level_object_by_sid(8937)
--if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 8*8 then
--	addon.actor_disable_inventory()
	news_manager.send_tip(db.actor, "aes_door_code4_tip", nil, "stalker", 8000, nil)
--end
end



function mark_aes_deadbody2()
   local obj = alife():story_object(8935)
   local obj_id = obj.id
   if obj_id then
   text = "Агент"
	level.map_add_object_spot_ser(obj_id,"blue_location",text)
   end
end

function mark_aes_deadbody3()
   local obj = alife():story_object(8936)
   local obj_id = obj.id
   if obj_id then
   text = "Агент"
	level.map_add_object_spot_ser(obj_id,"blue_location",text)
   end
end





function aes_last_agent_start_spawn()
local obj = level_object_by_sid(8936)
if obj ~= nil and obj:position():distance_to_sqr(db.actor:position())  <= 8*8 then
	spawn_aes_last_agent1()
end
end



function respawn_aes_last_agent()
rnd = math.random(1, 4)
if rnd == 1 then 
spawn_aes_last_agent1()
end
if rnd == 2 then 
spawn_aes_last_agent2()
end
if rnd == 3 then 
spawn_aes_last_agent3()
end
if rnd == 4 then 
spawn_aes_last_agent4()
end
end

function spawn_aes_last_agent1()
 local sim = alife()
 local sobj = alife():create("aes_last_agent", vector():set (273.30,0.00,-218.57), 113131, 2350)
 sim_assign_story_id(sobj.id, story_ids.aes_last_agent)
	local sobj_id = sobj.id
	text = "Агент"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_aes_last_agent2()
 local sim = alife()
 local sobj = alife():create("aes_last_agent", vector():set (307.96,-2.92,-116.61), 129375, 2354)
 sim_assign_story_id(sobj.id, story_ids.aes_last_agent)
	local sobj_id = sobj.id
	text = "Агент"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_aes_last_agent3()
 local sim = alife()
 local sobj = alife():create("aes_last_agent", vector():set (467.95,-2.92,-115.87), 206573, 2320)
 sim_assign_story_id(sobj.id, story_ids.aes_last_agent)
	local sobj_id = sobj.id
	text = "Агент"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end

function spawn_aes_last_agent4()
 local sim = alife()
 local sobj = alife():create("aes_last_agent", vector():set (671.36,-2.92,-116.11), 290399, 2316)
 sim_assign_story_id(sobj.id, story_ids.aes_last_agent)
	local sobj_id = sobj.id
	text = "Агент"
	level.map_add_object_spot_ser(sobj_id,"green_location",text)
end


function aes_kristall_out(first_speaker, second_speaker)
	dialogs.relocate_item_section(second_speaker, "aes_kristall", "out")
end

---------------------------------------------------------------------------------------------------------------------


function af_licvidator_use2()	-- для эффекта от настойки;
    for k, v in pairs (db.storage) do
    local mob = level.object_by_id(k)
	if mob and IsMonster(mob) and mob:alive() and mob:position():distance_to(db.actor:position()) < 10 then
			if  ( mob:section() == "^esc_atp_controler" and mob:alive()
			or mob:section() == "^m_controller_e" and mob:alive()
			or mob:section() == "^m_controller_normal" and mob:alive()
			or mob:section() == "^m_controller_act" and mob:alive()
			or mob:section() == "^controller_tubeman" and mob:alive() ) then
			return false 
			end
		local hit = hit()
		hit.direction = vector():set(0, 1, 0)
		hit.impulse = 200
		hit.draftsman = mob
		hit.power = 20.0
		hit.type = hit.wound
		mob:hit(hit)
	end
end
end


-- Заражение радиационной болезнью: --------------------------------------------------------------------------------------------

function rad_crossbow_seek_effect()
	local h=hit()
    h.type = hit.radiation
    h.power = 1.0
    h.impulse = 0
    h.draftsman = db.actor
    h.direction = vector():set(0,0,0) 
    db.actor:hit(h) 
	level.add_cam_effector("camera_effects\\drunk.anm", 999, false, "")	
		if db.actor:dont_has_info("rad_seek") then
			db.actor:give_info_portion ("rad_seek")
			local st = get_hud():GetCustomStatic("rad_crossbow_seek_think") or get_hud():AddCustomStatic("rad_crossbow_seek_think",true)
			st.m_endTime = time_global()/1000 + 10
		end
end

-- Артефакт "Мозг": ------------------------------------------------------------------------

function af_brain_effect()
	if ( inventory.belt["af_brain"] and db.actor:dont_has_info("af_brain_target") ) then 
		local target = level.get_target_obj()
		if target ~= nil then
			for k, v in pairs (db.storage) do
			local mob = level.object_by_id(k)
			local id = class_id or get_clsid (mob)
			local pos = mob:position()
	if mob:position():distance_to(db.actor:position()) < 20 then
	if ( id == clsid.boar_s and mob:section() ~= "boar_friend" and mob:section() ~= "dar_boar_werwolf" and mob:section() ~= "boar_master" ) then
		mob:kill( mob )
		alife():create("boar_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.dog_s and mob:section() ~= "dog_friend" and mob:section() ~= "ovcharka" ) then
		mob:kill( mob )
		alife():create("dog_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.cat_s and mob:section() ~= "cat_friend" ) then
		mob:kill( mob )
		alife():create("cat_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.zombie_s and mob:section() ~= "zombie_friend" ) then
		mob:kill( mob )
		alife():create("zombie_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.flesh_s and mob:section() ~= "flesh_friend" ) then
		mob:kill( mob )
		alife():create("flesh_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.bloodsucker_s and mob:section() ~= "bloodsucker_friend" and mob:section() ~= "dar_krovosos_werwolf" ) then
		mob:kill( mob )
		alife():create("bloodsucker_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.fracture_s and mob:section() ~= "fracture_friend" and mob:section() ~= "dar_izlom_werwolf" ) then
		mob:kill( mob )
		alife():create("fracture_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.pseudodog_s and mob:section() ~= "pseudodog_friend" and mob:section() ~= "ovcharka" ) then
		mob:kill( mob )
		alife():create("pseudodog_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.snork_s and mob:section() ~= "snork_friend" ) then
		mob:kill( mob )
		alife():create("snork_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.tushkano_s and mob:section() ~= "tushkano_friend" ) then
		mob:kill( mob )
		alife():create("tushkano_friend", vector():set(pos.x, pos.y, pos.z), db.actor:level_vertex_id(), db.actor:game_vertex_id())
		amk.remove_item(mob)
		soundtrack.actor_af_brain_use_snd()
		db.actor:give_info_portion ("af_brain_target")
		start_game_timer(240*60, "timer_actions.af_brain_timer_action")
	elseif ( id == clsid.chimera_s ) then
		news_manager.send_tip(db.actor, "chimera_psy_capture", nil)
		soundtrack.psy_weapon_target_hit()
	elseif ( id == clsid.gigant_s ) then
		news_manager.send_tip(db.actor, "gigant_psy_capture", nil)
		soundtrack.psy_weapon_target_hit()
	end
	
	end				
	end
	end
	end
end
----------------------------------

function sssr_sgns_bonus_tip()
news_manager.send_tip(db.actor, "sssr_sgns_bonus_tip", nil)
end

-----------------------------------

function give_test_equipment()
	alife():create('neytral_exo_antigas_outfit', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('wpn_svd', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_7.62x54_7h1', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_7.62x54_7h1', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_7.62x54_7h1', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_7.62x54_7h1', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('wpn_ks23', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_12x70_buck', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_12x70_buck', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_12x70_buck', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('ammo_12x70_buck', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medic_bag', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('mre', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('mre', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('mre', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medkit_army', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medkit_army', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medkit_army', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medkit_army', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('medkit_army', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('bandage', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('bandage', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('bandage', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('bandage', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
	alife():create('wonder_doll', db.actor:position(), db.actor:level_vertex_id(), db.actor:game_vertex_id(), db.actor:id())
end	
	
	
function art_cheat_dialog_fail_tip()
	if db.actor:object("wonder_doll") ~= nil then
	news_manager.send_tip(db.actor, "art_cheat_dialog_fail_tip", nil, "doll", 15000, nil)
	end
end


function art_cheat_treasure_tip()
	news_manager.send_tip(db.actor, "art_cheat_treasure_tip", nil, "doll", 15000, nil)
end
	
	

