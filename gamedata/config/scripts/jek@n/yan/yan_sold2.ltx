[smart_terrains]
none = true

[logic]
active = {+yan_bunker_sold_secret_talk} kamp@2, walker@start
combat_ignore = combat_ignore
threshold = threshold@yan_sold2
on_death = death


[walker@start]
path_walk = yan_sold_comander_walk1
path_look = yan_sold_comander_look1
on_timer = 1 | kamp@1 %=make_invulnerable%

[kamp@1]
center_point = yan_solds_bunker_koster_point
radius = 2 
def_state_moving = walk
danger = danger_condition
combat_ignore_cond = always
on_info = {+yan_bunker_atack_start} walker@defense
on_info2 = {=actor_yan_after_bunker_atack} walker@secret_talk %=send_tip(yan_sold_secret_talk_tip:soldier) +yan_bunker_sold_secret_talk%

[walker@defense]
path_walk = yan_sold2_walk_defense
path_look = yan_sold_comander_look_defense
danger = danger_condition
combat_ignore_cond = {-yan_bunker_atack_start}
def_state_moving1 = sprint_p
def_state_moving2 = sprint_p
def_state_moving3 = sprint_p
on_info = {-yan_bunker_atack_start} kamp@1
;on_info2 = {=actor_yan_after_bunker_atack} walker@secret_talk %=send_tip(yan_sold_secret_talk_tip:soldier) +yan_bunker_sold_secret_talk%


; за контейнером:
[walker@secret_talk]
path_walk = yan_sold2_walk_secret
path_look = yan_sold2_look_secret
danger = danger_condition
combat_ignore_cond = always
def_state_moving1 = sprint_p
def_state_moving2 = sprint_p
def_state_moving3 = sprint_p
on_info = {+yan_bunker_scout_hunt} kamp@2

[kamp@2]
center_point = yan_solds_bunker_koster_point
radius = 2 
def_state_moving = walk
danger = danger_condition
combat_ignore_cond = always
on_info = {+yan_bunker_atack_start} walker@defense






[threshold@yan_sold2]
max_ignore_distance = 15
ignore_monster = 0

[danger_condition]
ignore_distance = 0
ignore_distance_corpse = 0

[combat_ignore]
combat_ignore = always

[death]
on_info = %+yan_sold2_dead%