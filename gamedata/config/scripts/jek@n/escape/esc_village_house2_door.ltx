[logic]
active = ph_door@locked

[ph_door@close]
locked = false
closed = true
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = ph_door@open
; on_info = {+esc_house2_polter_dead} ph_door@free
on_info = {+esc_house2_polter_spawn -esc_house2_polter_dead} ph_door@locked

[ph_door@open]
locked = false
closed = false
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {+esc_house2_polter_dead} ph_door@close
on_info = {+esc_house2_polter_spawn -esc_house2_polter_dead} ph_door@locked


[ph_door@locked]
closed = true
locked = true
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {-esc_house2_polter_dead =actor_has_item(village_house2_door_key)} ph_door@open %+village_house2_door_opened%
on_info = {+esc_house2_polter_dead} ph_door@close


; [ph_door@free]
; locked = false
; closed = true
; no_force = true
; on_use = ph_door@open